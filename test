# ==========================
# ๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ ุงูููุณุนุฉ ุงูุดุงููุฉ
# ==========================
def show_calculators_section():
    st.markdown("### ๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ ุงููุชูุงููุฉ - ุงููุธุงู ุงูุดุงูู 2025")
    
    calc_tabs = st.tabs([
        "๐ฐ ููุงูุฉ ุงูุฎุฏูุฉ", 
        "โฐ ุงูุนูู ุงูุฅุถุงูู", 
        "๐ฅ ุงูุฅุฌุงุฒุงุช ูุงูุฃูููุฉ",
        "๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ",
        "๐ธ ุงูุชุนููุถุงุช",
        "๐ ุงูุฑูุงุชุจ ูุงูุงุณุชูุทุงุนุงุช",
        "๐๏ธ ุงูุถูุงู ุงูุงุฌุชูุงุนู",
        "๐ด ุงูุฅุฌุงุฒุงุช ุงููุฑูุจุฉ",
        "โ๏ธ ุงููุฎุงููุงุช ูุงูุบุฑุงูุงุช",
        "๐ ุชูุงุฑูุฑ ุงูุญุณุงุจุงุช"
    ])
    
    with calc_tabs[0]:
        show_end_of_service_calculator()
    
    with calc_tabs[1]:
        show_overtime_calculator()
    
    with calc_tabs[2]:
        show_vacation_calculator()
    
    with calc_tabs[3]:
        show_comprehensive_calculator()
    
    with calc_tabs[4]:
        show_compensation_calculator()
    
    with calc_tabs[5]:
        show_salary_deductions_calculator()
    
    with calc_tabs[6]:
        show_social_security_calculator()
    
    with calc_tabs[7]:
        show_compound_vacation_calculator()
    
    with calc_tabs[8]:
        show_violations_penalties_calculator()
    
    with calc_tabs[9]:
        show_calculations_reports()

# ==========================
# ๐ฐ ุญุงุณุจุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงูููุณุนุฉ
# ==========================
def show_end_of_service_calculator():
    st.markdown("#### ๐ฐ ุญุงุณุจุฉ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงููุชูุฏูุฉ 2025")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ุงููุฏุฎูุงุช ุงูุฃุณุงุณูุฉ")
        salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุฎูุฑ (ุฏููุงุฑ)", min_value=290, value=500, key="end_salary")
        years = st.number_input("ุนุฏุฏ ุงูุณููุงุช", min_value=0, max_value=40, value=5, key="end_years")
        months = st.number_input("ุนุฏุฏ ุงูุฃุดูุฑ", min_value=0, max_value=11, value=0, key="end_months")
        
        st.subheader("ุชูุงุตูู ุฅุถุงููุฉ")
        has_vacation = st.checkbox("ููุงู ุฅุฌุงุฒุงุช ูุณุชุญูุฉ", value=True, key="end_vacation")
        vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุงุช ุงููุณุชุญูุฉ", value=14, key="end_vac_days") if has_vacation else 0
        
        has_overtime = st.checkbox("ููุงู ูุณุชุญูุงุช ุนูู ุฅุถุงูู", value=True, key="end_overtime")
        overtime_amount = st.number_input("ูุจูุบ ุงูุนูู ุงูุฅุถุงูู ุงููุณุชุญู", value=200, key="end_overtime_amt") if has_overtime else 0
    
    with col2:
        st.subheader("ุธุฑูู ุฅููุงุก ุงูุฎุฏูุฉ")
        contract_type = st.selectbox("ููุน ุงูุนูุฏ", ["ุฏุงุฆู", "ูุคูุช"], key="end_contract")
        end_reason = st.selectbox("ุณุจุจ ุฅููุงุก ุงูุฎุฏูุฉ", [
            "ุงุณุชูุงูุฉ", "ุฅููุงุก ุฎุฏูุฉ ูู ุตุงุญุจ ุงูุนูู", "ุงูุชูุงุก ุนูุฏ", "ููุงุฉ ุฃู ุนุฌุฒ", "ูุตู ุชุฃุฏูุจู"
        ], key="end_reason")
        
        if end_reason == "ูุตู ุชุฃุฏูุจู":
            st.warning("โ๏ธ ูู ุญุงูุฉ ุงููุตู ุงูุชุฃุฏูุจูุ ูุฏ ูุง ุชุณุชุญู ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ")
        
        st.subheader("ุฎูุงุฑุงุช ุงูุญุณุงุจ")
        include_benefits = st.checkbox("ุงุญุชุณุงุจ ุงูุจุฏูุงุช ูุงูููุงูุขุช", value=True, key="end_benefits")
        detailed_calculation = st.checkbox("ุนุฑุถ ุงูุชูุงุตูู ุฎุทูุฉ ุจุฎุทูุฉ", value=True, key="end_detailed")
    
    if st.button("๐งฎ ุงุญุณุจ ุงูููุงูุฃุฉ ุงูุดุงููุฉ", type="primary", key="calc_end_service"):
        with st.spinner("ุฌุงุฑู ุญุณุงุจ ุงููุณุชุญูุงุช..."):
            # ุงูุญุณุงุจุงุช ุงูุฃุณุงุณูุฉ
            end_service, reference, calculation_steps = calculate_end_service_detailed(
                salary, years, months, contract_type, end_reason
            )
            
            # ุงููุณุชุญูุงุช ุงูุฅุถุงููุฉ
            vacation_pay = (salary / 30) * vacation_days if has_vacation else 0
            total_due = end_service + vacation_pay + overtime_amount
            
            st.success(f"""
            ## ๐ ูุชุงุฆุฌ ุญุณุงุจ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงูุดุงููุฉ
            
            **ุงูุชูุงุตูู ุงูุฃุณุงุณูุฉ:**
            - ๐ผ ุงูุฑุงุชุจ ุงูุฃุณุงุณู: **{salary:,.0f}** ุฏููุงุฑ
            - ๐ ูุฏุฉ ุงูุฎุฏูุฉ: **{years}** ุณูุฉ ู **{months}** ุดูุฑ
            - ๐ท๏ธ ููุน ุงูุนูุฏ: **{contract_type}**
            - ๐ฏ ุณุจุจ ุงูุฅููุงุก: **{end_reason}**
            
            **ุงููุณุชุญูุงุช ุงูุชูุตูููุฉ:**
            - ๐ฐ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ: **{end_service:,.0f}** ุฏููุงุฑ
            - ๐ด ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช: **{vacation_pay:,.0f}** ุฏููุงุฑ
            - โฐ ูุณุชุญูุงุช ุนูู ุฅุถุงูู: **{overtime_amount:,.0f}** ุฏููุงุฑ
            
            **๐ฐ ุงูุฅุฌูุงูู ุงููุณุชุญู:** **{total_due:,.0f}** ุฏููุงุฑ
            
            **ุงูุฃุณุงุณ ุงููุงูููู:**
            ๐ {reference}
            """)
            
            if detailed_calculation:
                with st.expander("๐ ุชูุงุตูู ุงูุญุณุงุจ ุฎุทูุฉ ุจุฎุทูุฉ", expanded=True):
                    for step in calculation_steps:
                        st.write(f"โข {step}")
            
            # ุฎูุงุฑุงุช ุงูุชุญููู
            col1, col2, col3 = st.columns(3)
            with col1:
                report_content = generate_end_service_report(salary, years, months, end_service, total_due, reference)
                st.download_button(
                    "๐ ุชูุฑูุฑ ููุตู",
                    data=report_content,
                    file_name=f"ุชูุฑูุฑ_ููุงูุฃุฉ_ููุงูุฉ_ุฎุฏูุฉ_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col2:
                st.button("๐จ๏ธ ุทุจุงุนุฉ ุงููุชุงุฆุฌ", key="print_end_service")
            with col3:
                st.button("๐พ ุญูุธ ูู ุงูุณุฌู", key="save_end_service")

# ==========================
# โฐ ุญุงุณุจุฉ ุงูุนูู ุงูุฅุถุงูู ุงูููุณุนุฉ
# ==========================
def show_overtime_calculator():
    st.markdown("#### โฐ ุญุงุณุจุฉ ุจุฏู ุงูุนูู ุงูุฅุถุงูู ุงููุชูุฏูุฉ")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ")
        basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="overtime_salary")
        regular_hours_weekly = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฃุณุจูุนูุฉ ุงูุนุงุฏูุฉ", value=48, key="regular_hours")
        
        st.subheader("ุชูุงุตูู ุงูุนูู ุงูุฅุถุงูู")
        overtime_type = st.selectbox("ููุน ุงูุนูู ุงูุฅุถุงูู", [
            "ููุงุฑู (8 ุต - 4 ู)", 
            "ูููู (4 ู - 8 ุต)", 
            "ุนุทูุฉ ุฑุณููุฉ", 
            "ุฌูุนุฉ ูุนุทู ุฏูููุฉ"
        ], key="overtime_type")
        
    with col2:
        st.subheader("ุชูุฒูุน ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ")
        daily_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูููููุฉ", value=2, key="daily_overtime")
        weekly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุฃุณุจูุนูุฉ", value=10, key="weekly_overtime")
        monthly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุดูุฑูุฉ", value=40, key="monthly_overtime")
        
        st.subheader("ูุชุฑุฉ ุงูุญุณุงุจ")
        calculation_period = st.selectbox("ูุชุฑุฉ ุงูุญุณุงุจ", ["ููู", "ุฃุณุจูุน", "ุดูุฑ", "ุฑุจุน ุณููู", "ุณููู"], key="overtime_period")
    
    if st.button("๐งฎ ุงุญุณุจ ุจุฏู ุงูุนูู ุงูุฅุถุงูู", key="calc_overtime_advanced"):
        hourly_rate = basic_salary / (30 * 8)  # 8 ุณุงุนุงุช ููููุงู
        
        # ุชุญุฏูุฏ ูุนุฏู ุงูุฒูุงุฏุฉ ุญุณุจ ููุน ุงูุนูู ุงูุฅุถุงูู
        rates = {
            "ููุงุฑู (8 ุต - 4 ู)": 1.25,
            "ูููู (4 ู - 8 ุต)": 1.5,
            "ุนุทูุฉ ุฑุณููุฉ": 1.5,
            "ุฌูุนุฉ ูุนุทู ุฏูููุฉ": 1.5
        }
        
        rate = rates[overtime_type]
        
        # ุญุณุงุจ ุงูุณุงุนุงุช ุญุณุจ ุงููุชุฑุฉ
        if calculation_period == "ููู":
            overtime_hours = daily_overtime
        elif calculation_period == "ุฃุณุจูุน":
            overtime_hours = weekly_overtime
        else:  # ุดูุฑ ุฃู ุฃูุซุฑ
            overtime_hours = monthly_overtime
        
        overtime_pay = overtime_hours * hourly_rate * rate
        
        st.success(f"""
        ## โฐ ูุชุงุฆุฌ ุญุณุงุจ ุจุฏู ุงูุนูู ุงูุฅุถุงูู
        
        **ุงูุชูุงุตูู:**
        - ๐ผ ุงูุฑุงุชุจ ุงูุฃุณุงุณู: **{basic_salary:,.0f}** ุฏููุงุฑ
        - โฑ๏ธ ุณุงุนุงุช ุงูุนูู ุงูุนุงุฏูุฉ: **{regular_hours_weekly}** ุณุงุนุฉ ุฃุณุจูุนูุงู
        - ๐ผ ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู: **{overtime_hours}** ุณุงุนุฉ ({calculation_period})
        - ๐ ููุน ุงูุนูู ุงูุฅุถุงูู: **{overtime_type}**
        - ๐ธ ุงูุณุงุนุฉ ุงูุฃุณุงุณูุฉ: **{hourly_rate:,.2f}** ุฏููุงุฑ
        - ๐ ูุนุฏู ุงูุฒูุงุฏุฉ: **{int((rate-1)*100)}%**
        
        **ุงููุชูุฌุฉ:**
        - ๐ฐ ุจุฏู ุงูุนูู ุงูุฅุถุงูู: **{overtime_pay:,.0f}** ุฏููุงุฑ
        
        **ุงูุฃุณุงุณ ุงููุงูููู:**
        - ุงููุงุฏุฉ 42 ูู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู
        - ูุฌุจ ุฃู ูุง ุชุฒูุฏ ุณุงุนุงุช ุงูุนูู ุงููุนููุฉ ุนู 8 ุณุงุนุงุช ููููุงู
        - ุงูุญุฏ ุงูุฃูุตู ููุนูู ุงูุฅุถุงูู: ุณุงุนุชูู ููููุงู
        """)
        
        # ุชุญุฐูุฑุงุช ูุงููููุฉ
        if daily_overtime > 2:
            st.error("โ๏ธ ุชุฌุงูุฒ ุงูุญุฏ ุงููุงูููู ููุนูู ุงูุฅุถุงูู ุงููููู (ุณุงุนุชุงู ูุญุฏ ุฃูุตู)")
        if regular_hours_weekly + weekly_overtime > 60:
            st.warning("โ๏ธ ุงูุชุฑุงุจ ุฃู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ูุณุงุนุงุช ุงูุนูู ุงูุฃุณุจูุนูุฉ")

# ==========================
# ๐ฅ ุญุงุณุจุฉ ุงูุฅุฌุงุฒุงุช ุงูููุณุนุฉ
# ==========================
def show_vacation_calculator():
    st.markdown("#### ๐ฅ ุญุงุณุจุฉ ุงูุฅุฌุงุฒุงุช ูุงููุณุชุญูุงุช ุงูุดุงููุฉ")
    
    vacation_tabs = st.tabs(["ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "ุฅุฌุงุฒุฉ ุงูุฃูููุฉ", "ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ", "ุงูุฅุฌุงุฒุงุช ุงููุฑูุจุฉ"])
    
    with vacation_tabs[0]:
        st.markdown("##### ๐ด ุญุงุณุจุฉ ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ")
        
        col1, col2 = st.columns(2)
        
        with col1:
            basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="annual_salary")
            service_years = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุณููุงุช)", value=3, key="annual_years")
            actual_vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ", value=14, key="annual_days")
        
        with col2:
            vacation_type = st.selectbox("ููุน ุงูุฅุฌุงุฒุฉ", [
                "ุนุงุฏูุฉ", "ูุฑุถูุฉ", "ุทุงุฑุฆุฉ", "ุฏุฑุงุณูุฉ"
            ], key="annual_type")
            
            include_allowances = st.checkbox("ุงุญุชุณุงุจ ุงูุจุฏูุงุช", value=True, key="annual_allowances")
        
        if st.button("๐งฎ ุงุญุณุจ ูุณุชุญูุงุช ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", key="calc_annual"):
            daily_rate = basic_salary / 30
            vacation_pay = daily_rate * actual_vacation_days
            
            # ุชุญุฏูุฏ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ ุญุณุจ ูุฏุฉ ุงูุฎุฏูุฉ
            if service_years < 5:
                entitled_days = 14
            elif service_years < 10:
                entitled_days = 21
            else:
                entitled_days = 28
            
            st.success(f"""
            ## ๐ด ูุชุงุฆุฌ ุญุณุงุจ ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ
            
            **ุงูุญููู ุงููุณุชุญูุฉ:**
            - ๐ ูุฏุฉ ุงูุฎุฏูุฉ: **{service_years}** ุณููุงุช
            - ๐ฏ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ: **{entitled_days}** ููู
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ: **{actual_vacation_days}** ููู
            
            **ุงููุณุชุญูุงุช ุงููุงููุฉ:**
            - ๐ฐ ุงูุฃุฌุฑ ุงููููู: **{daily_rate:,.2f}** ุฏููุงุฑ
            - ๐ธ ูุณุชุญูุงุช ุงูุฅุฌุงุฒุฉ: **{vacation_pay:,.0f}** ุฏููุงุฑ
            
            **ุงูุฃุณุงุณ ุงููุงูููู:**
            - ุงููุงุฏุฉ 52: ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ
            - ุงููุงุฏุฉ 53: ุงุณุชุญูุงู ุงูุฅุฌุงุฒุฉ
            - ุงููุงุฏุฉ 54: ุตุฑู ุฃุฌุฑ ุงูุฅุฌุงุฒุฉ
            """)
    
    with vacation_tabs[1]:
        st.markdown("##### ๐คฐ ุญุงุณุจุฉ ุฅุฌุงุฒุฉ ุงูุฃูููุฉ 2025")
        
        col1, col2 = st.columns(2)
        
        with col1:
            salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="maternity_salary")
            actual_leave = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ", value=70, key="maternity_days")
            multiple_birth = st.checkbox("ุญุงูุฉ ููุงุฏุฉ ูุชุนุฏุฏุฉ", key="maternity_multiple")
        
        with col2:
            complications = st.checkbox("ููุงู ูุถุงุนูุงุช ููุงุฏุฉ", key="maternity_complications")
            previous_maternity = st.number_input("ุนุฏุฏ ูุฑุงุช ุฅุฌุงุฒุฉ ุงูุฃูููุฉ ุงูุณุงุจูุฉ", value=0, key="maternity_previous")
        
        if st.button("๐งฎ ุงุญุณุจ ูุณุชุญูุงุช ุงูุฃูููุฉ", key="calc_maternity"):
            # ุญุณุจ ุงูุชุนุฏููุงุช 2025
            entitled_days = 70  # 10 ุฃุณุงุจูุน
            if multiple_birth:
                entitled_days += 14  # ุฃุณุจูุนูู ุฅุถุงูููู
            if complications:
                entitled_days += 14  # ุฃุณุจูุนูู ุฅุถุงูููู
            
            daily_rate = salary / 30
            maternity_pay = daily_rate * min(actual_leave, entitled_days)
            
            st.success(f"""
            ## ๐คฐ ูุชุงุฆุฌ ุญุณุงุจ ุฅุฌุงุฒุฉ ุงูุฃูููุฉ
            
            **ุงูุญููู ุงููุณุชุญูุฉ:**
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ: **{entitled_days}** ููู
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ: **{actual_leave}** ููู
            - ๐ฐ ุงูุฃุฌุฑ ุงููููู: **{daily_rate:,.2f}** ุฏููุงุฑ
            
            **ุงููุณุชุญูุงุช ุงููุงููุฉ:**
            - ๐ธ ูุณุชุญูุงุช ุงูุฃูููุฉ: **{maternity_pay:,.0f}** ุฏููุงุฑ
            
            **ุงูุฃุณุงุณ ุงููุงูููู:**
            - ุงููุงุฏุฉ 69 (ูุนุฏูุฉ 2025): ุฅุฌุงุฒุฉ ุฃูููุฉ 10 ุฃุณุงุจูุน
            - ุงููุงุฏุฉ 70: ุฅุฌุงุฒุฉ ูุงูุฏูุฉ
            - ูุฑุงุฑุงุช ูุฒุงุฑุฉ ุงูุนูู 2025
            """)

# ==========================
# ๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ ุงูููุณุนุฉ
# ==========================
def show_comprehensive_calculator():
    st.markdown("#### ๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ ูููุณุชุญูุงุช ุงููุงููููุฉ")
    
    st.info("""
    **๐ฏ ูุฐู ุงูุญุงุณุจุฉ ุชูููู ูู ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช ุงููุงููููุฉ ุฏูุนุฉ ูุงุญุฏุฉ**
    ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ูุณูุชู ุญุณุงุจ ูุงูุฉ ุงููุณุชุญูุงุช ุชููุงุฆูุงู
    """)
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.subheader("ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ")
        basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="comp_salary")
        service_years = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุณููุงุช)", value=3, key="comp_years")
        service_months = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุฃุดูุฑ)", value=6, key="comp_months")
    
    with col2:
        st.subheader("ุงูุนูู ุงูุฅุถุงูู")
        monthly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุดูุฑูุฉ", value=20, key="comp_overtime")
        overtime_type = st.selectbox("ููุน ุงูุนูู ุงูุฅุถุงูู", ["ููุงุฑู", "ูููู"], key="comp_overtime_type")
    
    with col3:
        st.subheader("ุงูุฅุฌุงุฒุงุช ุงููุณุชุญูุฉ")
        vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", value=14, key="comp_vacation")
        sick_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ", value=5, key="comp_sick")
        emergency_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงูุทุงุฑุฆุฉ", value=3, key="comp_emergency")
    
    # ุฎูุงุฑุงุช ุฅุถุงููุฉ
    with st.expander("โ๏ธ ุฎูุงุฑุงุช ูุชูุฏูุฉ", expanded=False):
        col1, col2 = st.columns(2)
        
        with col1:
            housing_allowance = st.number_input("ุจุฏู ุงูุณูู", value=100, key="comp_housing")
            transport_allowance = st.number_input("ุจุฏู ุงูููุงุตูุงุช", value=50, key="comp_transport")
        
        with col2:
            other_allowances = st.number_input("ุจุฏูุงุช ุฃุฎุฑู", value=0, key="comp_other")
            deductions = st.number_input("ุงูุงุณุชูุทุงุนุงุช", value=0, key="comp_deductions")
    
    if st.button("๐งฎ ุงุญุณุจ ุฌููุน ุงููุณุชุญูุงุช", type="primary", key="calc_comprehensive"):
        with st.spinner("ุฌุงุฑู ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช..."):
            # ุญุณุงุจ ูุงูุฉ ุงููุณุชุญูุงุช
            results = calculate_all_benefits(
                basic_salary, service_years, service_months, monthly_overtime, overtime_type,
                vacation_days, sick_days, emergency_days, housing_allowance, 
                transport_allowance, other_allowances, deductions
            )
            
            st.success("## ๐ฐ ูุชุงุฆุฌ ุงูุญุณุงุจ ุงูุดุงูู")
            
            # ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฃุนูุฏุฉ
            col1, col2, col3 = st.columns(3)
            
            with col1:
                st.metric("ุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ", f"{results['basic_benefits']:,.0f} ุฏููุงุฑ")
                st.metric("ุจุฏู ุงูุนูู ุงูุฅุถุงูู", f"{results['overtime']:,.0f} ุฏููุงุฑ")
            
            with col2:
                st.metric("ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช", f"{results['vacation_benefits']:,.0f} ุฏููุงุฑ")
                st.metric("ุงูุจุฏูุงุช ุงูุฅุถุงููุฉ", f"{results['allowances']:,.0f} ุฏููุงุฑ")
            
            with col3:
                st.metric("ุงูุงุณุชูุทุงุนุงุช", f"{-results['deductions']:,.0f} ุฏููุงุฑ")
                st.metric("ุงูุตุงูู ุงููุณุชุญู", f"{results['net_due']:,.0f} ุฏููุงุฑ", 
                         delta=f"{results['net_due'] - results['basic_benefits']:+.0f}")
            
            # ุชูุงุตูู ุฅุถุงููุฉ
            with st.expander("๐ ุงูุชูุงุตูู ุงููุงููุฉ", expanded=True):
                st.write("**ุชูุตูู ุงููุณุชุญูุงุช:**")
                for benefit, amount in results['breakdown'].items():
                    st.write(f"- {benefit}: {amount:,.0f} ุฏููุงุฑ")
                
                st.write("**ุงูุชูุตูุงุช:**")
                st.write("- ููุตู ุจูุฑุงุฌุนุฉ ุงูุญุณุงุจุงุช ูุน ูุฎุชุต ูุงูููู")
                st.write("- ุงูุงุญุชูุงุธ ุจูุณุฎุฉ ูู ูุดูู ุงูุญุณุงุจุงุช")
                st.write("- ูุชุงุจุนุฉ ุฃู ูุณุชุญูุงุช ูุชุฃุฎุฑุฉ ูุน ุตุงุญุจ ุงูุนูู")

# ==========================
# ๐๏ธ ุญุงุณุจุฉ ุงูุถูุงู ุงูุงุฌุชูุงุนู ุงูููุณุนุฉ
# ==========================
def show_social_security_calculator():
    st.markdown("#### ๐๏ธ ุญุงุณุจุฉ ุงุดุชุฑุงูุงุช ุงูุถูุงู ุงูุงุฌุชูุงุนู ุงููุชูุฏูุฉ")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ุจูุงูุงุช ุงูุฑุงุชุจ ูุงูุงุดุชุฑุงู")
        employee_salary = st.number_input("ุงูุฑุงุชุจ ุงูุดูุฑู (ุฏููุงุฑ)", value=500, key="social_salary")
        employee_rate = st.slider("ูุณุจุฉ ุงุดุชุฑุงู ุงูููุธู (%)", 5.0, 10.0, 7.5, key="social_emp_rate")
        employer_rate = st.slider("ูุณุจุฉ ุงุดุชุฑุงู ุตุงุญุจ ุงูุนูู (%)", 10.0, 20.0, 14.25, key="social_employer_rate")
    
    with col2:
        st.subheader("ุญุฏูุฏ ุงูุงุดุชุฑุงู")
        salary_ceiling = st.number_input("ุงูุญุฏ ุงูุฃูุตู ููุฃุฌุฑ ุงูุฎุงุถุน (ุฏููุงุฑ)", value=2000, key="social_ceiling")
        calculation_period = st.selectbox("ูุชุฑุฉ ุงูุญุณุงุจ", ["ุดูุฑู", "ุฑุจุน ุณููู", "ุณููู"], key="social_period")
        
        st.subheader("ุฎูุงุฑุงุช ุฅุถุงููุฉ")
        include_penalties = st.checkbox("ุงุญุชุณุงุจ ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ", value=False, key="social_penalties")
        delayed_months = st.number_input("ุฃุดูุฑ ุงูุชุฃุฎูุฑ", value=0, key="social_delayed") if include_penalties else 0
    
    if st.button("๐งฎ ุงุญุณุจ ุงูุงุดุชุฑุงูุงุช", key="calculate_social_advanced"):
        # ุงูุญุณุงุจุงุช ุงูุฃุณุงุณูุฉ
        base_salary = min(employee_salary, salary_ceiling)
        employee_share = base_salary * (employee_rate / 100)
        employer_share = base_salary * (employer_rate / 100)
        total_share = employee_share + employer_share
        
        # ุชุนุฏูู ุงููุชุฑุฉ
        period_multipliers = {"ุดูุฑู": 1, "ุฑุจุน ุณููู": 3, "ุณููู": 12}
        multiplier = period_multipliers[calculation_period]
        
        # ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ
        penalties = 0
        if include_penalties and delayed_months > 0:
            penalties = total_share * delayed_months * 0.05  # 5% ุบุฑุงูุฉ ุนู ูู ุดูุฑ
        
        st.success(f"""
        ## ๐๏ธ ูุชุงุฆุฌ ุงุดุชุฑุงูุงุช ุงูุถูุงู ุงูุงุฌุชูุงุนู
        
        **ุงูุฑุงุชุจ ุงูุฎุงุถุน ููุงุดุชุฑุงู:** **{base_salary:,.0f}** ุฏููุงุฑ
        **ูุชุฑุฉ ุงูุญุณุงุจ:** **{calculation_period}**
        
        **ุงูุงุดุชุฑุงูุงุช ({calculation_period}):**
        - ๐จโ๐ผ ุญุตุฉ ุงูููุธู ({employee_rate}%): **{employee_share * multiplier:,.0f}** ุฏููุงุฑ
        - ๐ ุญุตุฉ ุตุงุญุจ ุงูุนูู ({employer_rate}%): **{employer_share * multiplier:,.0f}** ุฏููุงุฑ
        - ๐ฐ ุงูุฅุฌูุงูู: **{total_share * multiplier:,.0f}** ุฏููุงุฑ
        
        **ุงููุณุชุญูุงุช:**
        - ๐ค ุตุงูู ุฑุงุชุจ ุงูููุธู: **{(employee_salary - employee_share) * multiplier:,.0f}** ุฏููุงุฑ
        - ๐ฅ ุงููุจูุบ ุงููุณุชุญู ููุถูุงู: **{total_share * multiplier:,.0f}** ุฏููุงุฑ
        """)
        
        if penalties > 0:
            st.error(f"โ๏ธ ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ: **{penalties:,.0f}** ุฏููุงุฑ")
        
        st.info("""
        **ุงููุฒุงูุง ุงููุดูููุฉ:**
        - ูุนุงุด ุชูุงุนุฏูุ ุชุนููุถ ุฅุตุงุจุฉ ุนููุ ุชุนููุถ ุจุทุงูุฉ
        - ุฑุนุงูุฉ ุตุญูุฉุ ุฅุฌุงุฒุฉ ุฃูููุฉุ ููุญ ููุงุฉ
        - ุฎุฏูุงุช ุฅุนุงุฏุฉ ุงูุชุฃููู ูุงูุชุฏุฑูุจ
        """)

# ==========================
# ๐ ุชูุงุฑูุฑ ุงูุญุณุงุจุงุช ุงูููุณุนุฉ
# ==========================
def show_calculations_reports():
    st.markdown("#### ๐ ูุธุงู ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช")
    
    report_tabs = st.tabs(["ุงูุชูุงุฑูุฑ ุงูุชูุตูููุฉ", "ุงูููุงุฑูุงุช", "ุงูุฑุณูู ุงูุจูุงููุฉ", "ุงูุชููุนุงุช"])
    
    with report_tabs[0]:
        st.markdown("##### ๐ ุงูุชูุงุฑูุฑ ุงูุชูุตูููุฉ ููุญุณุงุจุงุช")
        
        report_type = st.selectbox("ููุน ุงูุชูุฑูุฑ", [
            "ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ",
            "ุชูุฑูุฑ ุงูุนูู ุงูุฅุถุงูู", 
            "ุชูุฑูุฑ ุงูุฅุฌุงุฒุงุช",
            "ุชูุฑูุฑ ุงูุถูุงู ุงูุงุฌุชูุงุนู",
            "ุชูุฑูุฑ ุดุงูู ูุฌููุน ุงููุณุชุญูุงุช"
        ])
        
        if st.button("๐ ุฅูุดุงุก ุงูุชูุฑูุฑ", key="generate_report"):
            # ูุญุงูุงุฉ ุฅูุดุงุก ุงูุชูุฑูุฑ
            report_data = generate_detailed_report(report_type)
            
            st.success("## ๐ ุงูุชูุฑูุฑ ุงูุชูุตููู")
            st.write(report_data)
            
            # ุฎูุงุฑุงุช ุงูุชุญููู
            col1, col2, col3 = st.columns(3)
            with col1:
                st.download_button(
                    "๐ฅ ุชุญููู PDF",
                    data=report_data,
                    file_name=f"ุชูุฑูุฑ_{report_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col2:
                st.download_button(
                    "๐ ุชุตุฏูุฑ Excel",
                    data=report_data,
                    file_name=f"ุชูุฑูุฑ_{report_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col3:
                st.button("๐จ๏ธ ุทุจุงุนุฉ ุงูุชูุฑูุฑ", key="print_report")
    
    with report_tabs[2]:
        st.markdown("##### ๐ ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุชุญููููุฉ")
        
        # ุจูุงูุงุช ูููุฐุฌูุฉ ููุฑุณูู ุงูุจูุงููุฉ
        chart_data = {
            'ููุน ุงููุณุชุญู': ['ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ', 'ุจุฏู ุงูุนูู ุงูุฅุถุงูู', 'ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช', 'ุงูุถูุงู ุงูุงุฌุชูุงุนู'],
            'ุงููุจูุบ (ุฏููุงุฑ)': [2500, 800, 600, 450]
        }
        
        chart_df = pd.DataFrame(chart_data)
        
        col1, col2 = st.columns(2)
        
        with col1:
            st.bar_chart(chart_df.set_index('ููุน ุงููุณุชุญู'))
        with col2:
            st.line_chart(chart_df.set_index('ููุน ุงููุณุชุญู'))

# ==========================
# ๐๏ธ ุฏูุงู ุงูุญุณุงุจ ุงูููุณุนุฉ
# ==========================
def calculate_end_service_detailed(salary, years, months, contract_type, end_reason):
    """ุญุณุงุจ ููุตู ูููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ูุน ุงูุฎุทูุงุช"""
    total_months = years * 12 + months
    
    calculation_steps = []
    
    if end_reason in ["ุงุณุชูุงูุฉ", "ุงูุชูุงุก ุนูุฏ"]:
        if total_months < 12:
            amount = 0
            calculation_steps.append("ุฃูู ูู ุณูุฉ ุฎุฏูุฉ: ูุง ุชุณุชุญู ุงูููุงูุฃุฉ")
        elif total_months <= 60:
            amount = (salary * total_months) / 24
            calculation_steps.append(f"1-5 ุณููุงุช: ุซูุซ ุงูุฑุงุชุจ ุนู ูู ุดูุฑ = ({salary} ร {total_months}) รท 24")
        else:
            first_5 = (salary * 60) / 24
            remaining = (salary * (total_months - 60)) / 12
            amount = first_5 + remaining
            calculation_steps.append(f"ุฃูู 5 ุณููุงุช: ุซูุซ ุงูุฑุงุชุจ = ({salary} ร 60) รท 24 = {first_5:,.0f}")
            calculation_steps.append(f"ุงูุณููุงุช ุงูุชุงููุฉ: ุซูุซู ุงูุฑุงุชุจ = ({salary} ร {total_months-60}) รท 12 = {remaining:,.0f}")
    else:  # ุฅููุงุก ุฎุฏูุฉ
        if total_months <= 60:
            amount = (salary * total_months) / 12
            calculation_steps.append(f"1-5 ุณููุงุช: ุงูุฑุงุชุจ ุงููุงูู ุนู ูู ุดูุฑ = ({salary} ร {total_months}) รท 12")
        else:
            first_5 = (salary * 60) / 12
            remaining = (salary * (total_months - 60)) / 8
            amount = first_5 + remaining
            calculation_steps.append(f"ุฃูู 5 ุณููุงุช: ุงูุฑุงุชุจ ุงููุงูู = ({salary} ร 60) รท 12 = {first_5:,.0f}")
            calculation_steps.append(f"ุงูุณููุงุช ุงูุชุงููุฉ: ูุฑุชุจุงู ุนู ูู ุณูุฉ = ({salary} ร {total_months-60}) รท 8 = {remaining:,.0f}")
    
    reference = "ุงูููุงุฏ 74-77 ูู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู"
    return amount, reference, calculation_steps

def calculate_all_benefits(basic_salary, years, months, overtime_hours, overtime_type, 
                          vacation_days, sick_days, emergency_days, housing, transport, other, deductions):
    """ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช ุฏูุนุฉ ูุงุญุฏุฉ"""
    
    # ุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ
    basic_benefits = basic_salary
    
    # ุงูุนูู ุงูุฅุถุงูู
    hourly_rate = basic_salary / (30 * 8)
    overtime_rate = 1.25 if overtime_type == "ููุงุฑู" else 1.5
    overtime = overtime_hours * hourly_rate * overtime_rate
    
    # ุงูุฅุฌุงุฒุงุช
    daily_rate = basic_salary / 30
    vacation_benefits = daily_rate * vacation_days
    sick_benefits = daily_rate * sick_days * 0.5  # ูุตู ุงูุฑุงุชุจ ููุฅุฌุงุฒุฉ ุงููุฑุถูุฉ
    emergency_benefits = daily_rate * emergency_days
    
    # ุงูุจุฏูุงุช
    allowances = housing + transport + other
    
    # ุงูุฅุฌูุงูู
    total_benefits = basic_benefits + overtime + vacation_benefits + sick_benefits + emergency_benefits + allowances
    net_due = total_benefits - deductions
    
    return {
        'basic_benefits': basic_benefits,
        'overtime': overtime,
        'vacation_benefits': vacation_benefits + sick_benefits + emergency_benefits,
        'allowances': allowances,
        'deductions': deductions,
        'net_due': net_due,
        'breakdown': {
            'ุงูุฑุงุชุจ ุงูุฃุณุงุณู': basic_benefits,
            'ุจุฏู ุงูุนูู ุงูุฅุถุงูู': overtime,
            'ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช': vacation_benefits,
            'ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ': sick_benefits,
            'ุงูุฅุฌุงุฒุฉ ุงูุทุงุฑุฆุฉ': emergency_benefits,
            'ุจุฏู ุงูุณูู': housing,
            'ุจุฏู ุงูููุงุตูุงุช': transport,
            'ุจุฏูุงุช ุฃุฎุฑู': other
        }
    }

def generate_detailed_report(report_type):
    """ุชูููุฏ ุชูุฑูุฑ ููุตู"""
    reports = {
        "ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ": """
        ุชูุฑูุฑ ููุตู ุนู ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
        ==============================
        
        ุงูุชุงุฑูุฎ: {date}
        
        ุงููุญุชููุงุช:
        1. ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
        2. ุทุฑููุฉ ุงูุญุณุงุจ
        3. ุงููุชุงุฆุฌ
        4. ุงูุฃุณุงุณ ุงููุงูููู
        5. ุงูุชูุตูุงุช
        
        ุชู ุฅูุดุงุก ุงูุชูุฑูุฑ ุจูุงุณุทุฉ ุงูููุตุฉ ุงููุงููููุฉ ุงูุฐููุฉ 2025
        """.format(date=datetime.now().strftime('%Y-%m-%d')),
        
        "ุชูุฑูุฑ ุดุงูู ูุฌููุน ุงููุณุชุญูุงุช": """
        ุงูุชูุฑูุฑ ุงูุดุงูู ูููุณุชุญูุงุช ุงููุงููููุฉ
        ==============================
        
        ูุฐุง ุงูุชูุฑูุฑ ูุดูู ูุงูุฉ ุงููุณุชุญูุงุช ุงููุณุชุญูุฉ ูุงููููุงู
        ูููุงู ูุฃุญุฏุซ ุงูุชุนุฏููุงุช ุงูุชุดุฑูุนูุฉ 2025
        
        ุงููุญุชููุงุช:
        - ุงูุฑุงุชุจ ูุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ
        - ุจุฏู ุงูุนูู ุงูุฅุถุงูู
        - ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช
        - ุงุดุชุฑุงูุงุช ุงูุถูุงู ุงูุงุฌุชูุงุนู
        - ุงูุชุนููุถุงุช ูุงููุณุชุญูุงุช ุงูุฅุถุงููุฉ
        
        ุชุงุฑูุฎ ุงูุฅูุดุงุก: {date}
        """.format(date=datetime.now().strftime('%Y-%m-%d'))
    }
    
    return reports.get(report_type, "ุชูุฑูุฑ ุบูุฑ ูุชููุฑ")

def generate_end_service_report(salary, years, months, end_service, total_due, reference):
    """ุชูููุฏ ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ"""
    return f"""
    ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
    =======================
    
    ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ:
    - ุงูุฑุงุชุจ ุงูุฃุฎูุฑ: {salary:,.0f} ุฏููุงุฑ
    - ูุฏุฉ ุงูุฎุฏูุฉ: {years} ุณูุฉ ู {months} ุดูุฑ
    - ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ: {end_service:,.0f} ุฏููุงุฑ
    - ุงูุฅุฌูุงูู ุงููุณุชุญู: {total_due:,.0f} ุฏููุงุฑ
    
    ุงูุฃุณุงุณ ุงููุงูููู:
    {reference}
    
    ููุงุญุธุงุช:
    - ุงูุชูุฑูุฑ ูุฃุบุฑุงุถ ุงูุชูุนูุฉ ูุงูุชุนููู ููุท
    - ููุตู ุจุงูุชุดุงูุฑ ูุน ูุฎุชุต ูุงูููู
    - ุงูุญุณุงุจุงุช ููู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู 2025
    
    ุชุงุฑูุฎ ุงูุฅูุดุงุก: {datetime.now().strftime('%Y-%m-%d %H:%M')}
    """

# ==========================
# ๐งฎ ุฅุถุงูุฉ ูุณู ุงูุญุงุณุจุงุช ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
# ==========================
# ุณูุชู ุฏูุฌ ูุฐุง ูุน ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ุงูููุฌูุฏุฉ
# ==========================
# ๐ ูุญุงูู ุงูุดููู ุงูุดุงูู ูุงููุชูุฏู
# ==========================
def show_complaint_simulator():
    st.markdown("### ๐ ูุญุงูู ุงูุดููู ุงูุฐูู - ูุธุงู ุงูุชุญููู ูุงูุชูุฌูู ุงูุนุงู")
    
    # ุชููููุงุช ุฃูุงู ูุฅุฎูุงุก ูุณุคูููุฉ ููุณุนุฉ
    st.markdown("""
    <div style="background: #FFFBEB; padding: 1.5rem; border-radius: 10px; border: 2px solid #F59E0B; margin-bottom: 2rem;">
        <h4 style="color: #D97706; margin-top: 0;">๐ข ุชููููุงุช ูุงูุฉ</h4>
        <ul style="color: #92400E;">
            <li><strong>ูุฐุง ุงููุญุงูู ููุฏู ุชุญูููุงู ุนุงูุงู ูุชูุนููุงู ููุท</strong></li>
            <li><strong>ูุง ูุตุฏุฑ ุฃุญูุงูุงู ูุงููููุฉ ุฃู ุงุณุชุดุงุฑุงุช ููุฒูุฉ</strong></li>
            <li><strong>ูุง ูุชู ุชุฎุฒูู ุฃู ูุนูููุงุช ุดุฎุตูุฉ</strong></li>
            <li><strong>ููุตู ุฏุงุฆูุงู ุจุงุณุชุดุงุฑุฉ ูุญุงูู ูุชุฎุตุต</strong></li>
            <li><strong>ุงููุนูููุงุช ูุฃุบุฑุงุถ ุงูุชูุนูุฉ ูุงูุชุนููู ุงูุนุงู</strong></li>
        </ul>
    </div>
    """, unsafe_allow_html=True)
    
    complaint_tabs = st.tabs([
        "๐ ุชุญููู ุงููุดููุฉ", 
        "๐งฉ ุชุดุฎูุต ุงูุญุงูุฉ",
        "๐ ุฎุทุฉ ุงูุนูู", 
        "โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู",
        "๐ ููุดุฆ ุงููุซุงุฆู",
        "๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู",
        "๐ ุชุญููู ุงููุฎุงุทุฑ",
        "๐ ุงูุฏุนู ุงูููุฑู"
    ])
    
    with complaint_tabs[0]:
        show_problem_analysis()
    
    with complaint_tabs[1]:
        show_case_diagnosis()
    
    with complaint_tabs[2]:
        show_action_plan()
    
    with complaint_tabs[3]:
        show_legal_framework()
    
    with complaint_tabs[4]:
        show_document_generator()
    
    with complaint_tabs[5]:
        show_solutions_map()
    
    with complaint_tabs[6]:
        show_risk_analysis()
    
    with complaint_tabs[7]:
        show_immediate_support()

# ==========================
# ๐ ุชุญููู ุงููุดููุฉ ุงููุชูุฏู
# ==========================
def show_problem_analysis():
    st.markdown("#### ๐ ุงูุชุญููู ุงููุชูุฏู ูููุดููุฉ")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ุชุตููู ุงููุดููุฉ")
        complaint_category = st.selectbox("ุงููุฆุฉ ุงูุฑุฆูุณูุฉ", [
            "๐ฐ ูุดุงูู ูุงููุฉ",
            "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ", 
            "โฐ ุธุฑูู ุงูุนูู",
            "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ",
            "๐ ุนููุฏ ูุชูุธูู",
            "๐ด ุฅุฌุงุฒุงุช ูุฑุงุญุฉ",
            "๐ง ูุดุงูู ุชูููุฉ",
            "๐จ ุญุงูุงุช ุทุงุฑุฆุฉ"
        ], key="complaint_category")
        
        complaint_type = st.selectbox("ููุน ุงููุดููุฉ ุงููุญุฏุฏ", get_complaint_types(complaint_category), key="complaint_type")
        
        st.subheader("ุงูุณูุงู ุงูุฒููู")
        start_date = st.date_input("ุชุงุฑูุฎ ุจุฏุงูุฉ ุงููุดููุฉ")
        duration = st.selectbox("ูุฏุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ", [
            "ุฃูู ูู ุฃุณุจูุน", "1-4 ุฃุณุงุจูุน", "1-3 ุฃุดูุฑ", "3-6 ุฃุดูุฑ", "6-12 ุดูุฑ", "ุฃูุซุฑ ูู ุณูุฉ"
        ])
        frequency = st.selectbox("ุชูุฑุงุฑ ุงููุดููุฉ", [
            "ุญุงุฏุซุฉ ูุงุญุฏุฉ", "ูุชูุฑุฑุฉ ุฃุณุจูุนูุงู", "ูุชูุฑุฑุฉ ุดูุฑูุงู", "ูุณุชูุฑุฉ", "ุบูุฑ ููุชุธูุฉ"
        ])
    
    with col2:
        st.subheader("ุชุฃุซูุฑ ุงููุดููุฉ")
        severity = st.select_slider("ุดุฏุฉ ุงูุชุฃุซูุฑ", [
            "ููุฎูุถ", "ูุชูุณุท", "ูุฑุชูุน", "ุญุฑุฌ", "ูุงุฑุซู"
        ])
        
        affected_areas = st.multiselect("ุงููุฌุงูุงุช ุงููุชุฃุซุฑุฉ", [
            "ุงูุฏุฎู ุงููุงูู", "ุงูุตุญุฉ ุงูููุณูุฉ", "ุงูุตุญุฉ ุงูุฌุณุฏูุฉ", 
            "ุงูุฃุฏุงุก ุงููุธููู", "ุงูุนูุงูุงุช ุงูุนูููุฉ", "ุงูุณูุนุฉ ุงูููููุฉ",
            "ุงูุงุณุชูุฑุงุฑ ุงููุธููู", "ุงูุชุทูุฑ ุงููุธููู"
        ])
        
        st.subheader("ุงูุฌูุงุช ุงููุชุถููุฉ")
        involved_parties = st.multiselect("ุงูุฃุทุฑุงู ุงููุนููุฉ", [
            "ุตุงุญุจ ุงูุนูู", "ุงููุฏูุฑ ุงููุจุงุดุฑ", "ุฒููุงุก ุงูุนูู", 
            "ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ", "ุฌูุฉ ุญููููุฉ", "ุนููุงุก"
        ])
    
    # ูุตู ุงููุดููุฉ ุงูููุตู
    st.subheader("๐ ุงููุตู ุงูุชูุตููู ูููุดููุฉ")
    problem_description = st.text_area(
        "ุตู ุงููุดููุฉ ุจุดูู ููุตู ููุงุถุญ",
        placeholder="""ูุซุงู: 
ุจุฏุฃุช ุงููุดููุฉ ุนูุฏูุง... 
ุงูุชุฃุซูุฑ ุงููุจุงุดุฑ ูุงู...
ุญุงููุช ุญู ุงููุดููุฉ ุนู ุทุฑูู...
ุงููุชูุฌุฉ ูุงูุช...""",
        height=150
    )
    
    # ุงูุฃุฏูุฉ ูุงููุณุชูุฏุงุช
    with st.expander("๐ ุงูุฃุฏูุฉ ูุงููุณุชูุฏุงุช ุงููุชุงุญุฉ"):
        col1, col2, col3 = st.columns(3)
        with col1:
            st.checkbox("ุนููุฏ ุงูุนูู")
            st.checkbox("ูุดูู ุงูุฑูุงุชุจ")
            st.checkbox("ูุฑุงุณูุงุช ุฑุณููุฉ")
        with col2:
            st.checkbox("ุฅุดุนุงุฑุงุช ูุฅุฎุทุงุฑุงุช")
            st.checkbox("ุชูุงุฑูุฑ ุทุจูุฉ")
            st.checkbox("ุตูุฑ ุฃู ุชุณุฌููุงุช")
        with col3:
            st.checkbox("ุดูุงุฏุงุช ูุดูุงุฏุงุช")
            st.checkbox("ุฅุซุจุงุชุงุช ูุงููุฉ")
            st.checkbox("ุฃุฏูุฉ ุฃุฎุฑู")
    
    if st.button("๐ ุจุฏุก ุงูุชุญููู ุงูุดุงูู", type="primary", key="start_analysis"):
        if problem_description:
            with st.spinner("ุฌุงุฑู ุชุญููู ุงููุดููุฉ ูุชูุฏูู ุงูุชูุตูุงุช ุงูุนุงูุฉ..."):
                analysis_result = analyze_complaint_advanced(
                    complaint_category, complaint_type, problem_description, 
                    severity, duration, frequency, affected_areas
                )
                
                display_analysis_results(analysis_result)

# ==========================
# ๐งฉ ุชุดุฎูุต ุงูุญุงูุฉ ุงููุชูุฏู
# ==========================
def show_case_diagnosis():
    st.markdown("#### ๐งฉ ุงูุชุดุฎูุต ุงููุชูุฏู ููุญุงูุฉ")
    
    st.info("""
    **๐ฏ ุงููุฏู:** ููู ุฃุจุนุงุฏ ุงููุดููุฉ ุจุดูู ุฃุนูู ูุชุญุฏูุฏ ุงูุฃููุงุท ูุงูุงุชุฌุงูุงุช
    """)
    
    # ูุตูููุฉ ุงูุชุดุฎูุต
    diagnosis_matrix = {
        "ุงูุฌูุงูุจ ุงููุงููููุฉ": [
            "ูู ููุงู ูุฎุงููุฉ ูุงุถุญุฉ ูููุงูููุ",
            "ูุง ูู ุงูููุงุฏ ุงููุงููููุฉ ุงูููุทุจูุฉุ", 
            "ูู ุชูุฌุฏ ุณูุงุจู ูุถุงุฆูุฉ ูุดุงุจูุฉุ",
            "ูุง ูู ุงูุนููุจุงุช ุงููุญุชููุฉุ"
        ],
        "ุงูุฌูุงูุจ ุงูุฅุฌุฑุงุฆูุฉ": [
            "ูู ุชู ุงุชุจุงุน ุงูุฅุฌุฑุงุกุงุช ุงูุตุญูุญุฉุ",
            "ูุง ูู ุงูุฅุฌุฑุงุกุงุช ุงููุชุงุญุฉ ูุญู ุงููุดููุฉุ",
            "ูู ุชูุฌุฏ ูุณุงุทุฉ ุฃู ุตูุญ ููููุ",
            "ูุง ูู ุงูููู ุงููุงููููุฉ ุงููุทุจูุฉุ"
        ],
        "ุงูุฌูุงูุจ ุงููุงููุฉ": [
            "ูุง ูู ุงูุฎุณุงุฆุฑ ุงููุงููุฉ ุงููุญุชููุฉุ",
            "ูู ุชูุฌุฏ ูุณุชุญูุงุช ูุงููุฉ ูุชุฃุฎุฑุฉุ",
            "ูุง ูู ุงูุชูุงููู ุงููุชููุนุฉ ููุญูุ",
            "ูู ุชูุฌุฏ ุชุนููุถุงุช ูุณุชุญูุฉุ"
        ],
        "ุงูุฌูุงูุจ ุงูููุณูุฉ": [
            "ูุง ูู ุงูุชุฃุซูุฑ ุงูููุณู ูููุดููุฉุ",
            "ูู ุชูุฌุฏ ุฃุนุฑุงุถ ุชูุชุฑ ุฃู ุฅุฑูุงูุ",
            "ูุง ูู ูุณุชูู ุงูุถุบุท ุงููุงุชุฌุ",
            "ูู ุชุญุชุงุฌ ูุฏุนู ููุณูุ"
        ]
    }
    
    diagnosis_scores = {}
    
    for aspect, questions in diagnosis_matrix.items():
        with st.expander(f"๐ {aspect}", expanded=True):
            aspect_score = 0
            for question in questions:
                score = st.slider(
                    question,
                    1, 5, 3,
                    key=f"diag_{aspect}_{question}"
                )
                aspect_score += score
            
            diagnosis_scores[aspect] = aspect_score / len(questions)
            st.progress(diagnosis_scores[aspect] / 5)
            st.write(f"**ูุคุดุฑ {aspect}: {diagnosis_scores[aspect]:.1f}/5**")
    
    # ุชุญููู ุงููุชุงุฆุฌ
    if diagnosis_scores:
        st.markdown("#### ๐ ุชุญููู ุงูุชุดุฎูุต ุงูุดุงูู")
        
        col1, col2 = st.columns(2)
        
        with col1:
            # ูุฎุทุท ุงููุชุงุฆุฌ
            aspects = list(diagnosis_scores.keys())
            scores = list(diagnosis_scores.values())
            
            diagnosis_df = pd.DataFrame({
                'ุงูุฌุงูุจ': aspects,
                'ุงููุคุดุฑ': scores
            })
            
            st.bar_chart(diagnosis_df.set_index('ุงูุฌุงูุจ'))
        
        with col2:
            # ุงูุชูุตูุงุช
            st.markdown("##### ๐ก ุงูุชูุตูุงุช ุงูุชุดุฎูุตูุฉ")
            
            high_risk_aspects = [aspect for aspect, score in diagnosis_scores.items() if score >= 4]
            medium_risk_aspects = [aspect for aspect, score in diagnosis_scores.items() if 3 <= score < 4]
            
            if high_risk_aspects:
                st.error("**ูุฌุงูุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ:**")
                for aspect in high_risk_aspects:
                    st.write(f"๐จ {aspect} - ูุญุชุงุฌ ุชุฏุฎู ุนุงุฌู")
            
            if medium_risk_aspects:
                st.warning("**ูุฌุงูุงุช ูุชูุณุทุฉ ุงูุฎุทูุฑุฉ:**")
                for aspect in medium_risk_aspects:
                    st.write(f"โ๏ธ {aspect} - ูุญุชุงุฌ ูุชุงุจุนุฉ")

# ==========================
# ๐ ุฎุทุฉ ุงูุนูู ุงููุชูุฏูุฉ
# ==========================
def show_action_plan():
    st.markdown("#### ๐ ุฎุทุฉ ุงูุนูู ุงูุดุงููุฉ")
    
    # ูุฑุงุญู ุงูุฎุทุฉ
    plan_stages = {
        "ุงููุฑุญูุฉ ูก: ุงูุทูุงุฑุฆ ูุงูููุฑูุฉ (ูขูค-ูคูจ ุณุงุนุฉ)": [
            "ุชุฃููู ุงูุฃุฏูุฉ ูุงููุณุชูุฏุงุช",
            "ุชูููู ุงููุฎุงุทุฑ ุงูููุฑูุฉ", 
            "ุงุชุฎุงุฐ ุฅุฌุฑุงุกุงุช ููุงุฆูุฉ",
            "ุงูุชูุงุตู ูุน ุฌูุงุช ุงูุฏุนู"
        ],
        "ุงููุฑุญูุฉ ูข: ุงูุชุตุนูุฏ ุงูุฑุณูู (ุฃุณุจูุน)": [
            "ุฅุนุฏุงุฏ ุงููุซุงุฆู ุงูุฑุณููุฉ",
            "ุงูุชูุงุตู ูุน ุงูุฅุฏุงุฑุฉ",
            "ุชูุฏูู ุงูุดููู ุงูุฏุงุฎููุฉ",
            "ุทูุจ ูุณุงุทุฉ ุฑุณููุฉ"
        ],
        "ุงููุฑุญูุฉ ูฃ: ุงูุฅุฌุฑุงุกุงุช ุงููุงููููุฉ (ูข-ูค ุฃุณุงุจูุน)": [
            "ุงูุชูุฌู ููุฌูุงุช ุงูุญููููุฉ",
            "ุชูุฏูู ุดููู ุฑุณููุฉ",
            "ุงููุดุงุฑูุฉ ูู ุฌูุณุงุช ุงูุตูุญ",
            "ุฅุนุฏุงุฏ ุงููุณุชูุฏุงุช ุงููุถุงุฆูุฉ"
        ],
        "ุงููุฑุญูุฉ ูค: ุงููุชุงุจุนุฉ ูุงููุชุงุฆุฌ (ูก-ูฃ ุฃุดูุฑ)": [
            "ูุชุงุจุนุฉ ุณูุฑ ุงููุถูุฉ",
            "ุชูููุฐ ุงููุฑุงุฑุงุช",
            "ุงูุชูููู ูุงููุญุงุณุจุฉ",
            "ููุน ุชูุฑุงุฑ ุงููุดููุฉ"
        ]
    }
    
    selected_stage = st.selectbox("ุงุฎุชุฑ ูุฑุญูุฉ ุงูุฎุทุฉ", list(plan_stages.keys()))
    
    with st.expander(f"๐ ุชูุงุตูู {selected_stage}", expanded=True):
        actions = plan_stages[selected_stage]
        
        for i, action in enumerate(actions, 1):
            col1, col2, col3, col4 = st.columns([3, 1, 1, 1])
            
            with col1:
                st.write(f"**{i}. {action}**")
            
            with col2:
                status = st.selectbox(
                    "ุงูุญุงูุฉ",
                    ["ูู ูุจุฏุฃ", "ููุฏ ุงูุชูููุฐ", "ููุชูู", "ูุชุฃุฎุฑ"],
                    key=f"status_{selected_stage}_{i}"
                )
            
            with col3:
                responsible = st.selectbox(
                    "ุงููุณุคูู",
                    ["ุฃูุช", "ูุญุงูู", "ุฌูุฉ ุญููููุฉ", "ูุดุชุฑู"],
                    key=f"responsible_{selected_stage}_{i}"
                )
            
            with col4:
                deadline = st.date_input(
                    "ุงูููุนุฏ ุงูููุงุฆู",
                    key=f"deadline_{selected_stage}_{i}"
                )
        
        # ุชูุฏู ุงููุฑุญูุฉ
        progress = st.slider("ุชูุฏู ุงููุฑุญูุฉ", 0, 100, 0, key=f"progress_{selected_stage}")
        st.progress(progress/100)
    
    # ุฎูุงุฑุงุช ุงูุชุญููู
    col1, col2, col3 = st.columns(3)
    with col1:
        if st.button("๐ฅ ุชุญููู ุฎุทุฉ ุงูุนูู", key="download_plan"):
            st.success("ุฌุงุฑู ุฅูุดุงุก ุฎุทุฉ ุงูุนูู ุงูุดุงููุฉ...")
    with col2:
        if st.button("๐ ุจุฏุก ุฎุทุฉ ุฌุฏูุฏุฉ", key="new_plan"):
            st.info("ุจุฏุก ุฎุทุฉ ุนูู ุฌุฏูุฏุฉ")
    with col3:
        if st.button("๐ง ูุดุงุฑูุฉ ุงูุฎุทุฉ", key="share_plan"):
            st.warning("ููุฒุฉ ุงููุดุงุฑูุฉ ููุฏ ุงูุชุทููุฑ")

# ==========================
# โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู ุงูููุณุน
# ==========================
def show_legal_framework():
    st.markdown("#### โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู ุงูุดุงูู")
    
    legal_tabs = st.tabs(["ุงูููุงุฏ ุงููุงููููุฉ", "ุงูุณูุงุจู ุงููุถุงุฆูุฉ", "ุงูููุงุฆุญ ุงูุชูููุฐูุฉ", "ุงูุงุฌุชูุงุฏุงุช ุงูููููุฉ"])
    
    with legal_tabs[0]:
        st.markdown("##### ๐ ุงูููุงุฏ ุงููุงููููุฉ ุงูููุทุจูุฉ")
        
        legal_articles = {
            "ุงููุงุฏุฉ 13": "ูุฌูุจ ูุชุงุจุฉ ุนูุฏ ุงูุนูู",
            "ุงููุงุฏุฉ 35": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ",
            "ุงููุงุฏุฉ 42": "ุจุฏู ุงูุนูู ุงูุฅุถุงูู", 
            "ุงููุงุฏุฉ 55": "ููุนุฏ ุตุฑู ุงูุฃุฌุฑ",
            "ุงููุงุฏุฉ 72": "ุฅููุงุก ุนูุฏ ุงูุนูู",
            "ุงููุงุฏุฉ 73": "ุงููุตู ุงูุชุนุณูู",
            "ุงููุงุฏุฉ 74": "ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ",
            "ุงููุงุฏุฉ 79": "ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ"
        }
        
        for article, description in legal_articles.items():
            with st.expander(f"๐ {article}: {description}"):
                st.write(f"**ุงููุต ุงููุงูู:** {get_article_full_text(article)}")
                st.write(f"**ุงูุชุทุจููุงุช:** {get_article_applications(article)}")
                st.write(f"**ุงูุงุณุชุซูุงุกุงุช:** {get_article_exceptions(article)}")
    
    with legal_tabs[1]:
        st.markdown("##### โ๏ธ ุงูุณูุงุจู ุงููุถุงุฆูุฉ ุฐุงุช ุงูุตูุฉ")
        
        legal_precedents = [
            {
                "ุงููุถูุฉ": "ุชูููุฒ ุนูู 150/2023 - ุชุฃุฎุฑ ุตุฑู ุงูุฑูุงุชุจ",
                "ุงููุจุฏุฃ": "ูุฌูุจ ุงูุชุนููุถ ุนู ุงูุฃุถุฑุงุฑ ุงููุงุชุฌุฉ ุนู ุชุฃุฎูุฑ ุตุฑู ุงูุฑูุงุชุจ",
                "ุงูุชุทุจูู": "ููุทุจู ุนูู ุญุงูุงุช ุงูุชุฃุฎูุฑ ุงููุชูุฑุฑ ุฃู ุงูุทููู"
            },
            {
                "ุงููุถูุฉ": "ุชูููุฒ ุนูู 85/2022 - ุงููุตู ุงูุชุนุณูู", 
                "ุงููุจุฏุฃ": "ูุฌูุจ ุฅุซุจุงุช ุงููุจุฑุฑ ุงููุดุฑูุน ูููุตู",
                "ุงูุชุทุจูู": "ููุทุจู ุนูู ุญุงูุงุช ุงููุตู ุจุฏูู ุฅูุฐุงุฑ ุฃู ุณุจุจ ูุงุถุญ"
            }
        ]
        
        for precedent in legal_precedents:
            with st.expander(f"โ๏ธ {precedent['ุงููุถูุฉ']}"):
                st.write(f"**ุงููุจุฏุฃ ุงููุงูููู:** {precedent['ุงููุจุฏุฃ']}")
                st.write(f"**ูุฌุงู ุงูุชุทุจูู:** {precedent['ุงูุชุทุจูู']}")

# ==========================
# ๐ ููุดุฆ ุงููุซุงุฆู ุงููุชูุฏู
# ==========================
def show_document_generator():
    st.markdown("#### ๐ ููุดุฆ ุงููุซุงุฆู ุงูุฐูู")
    
    doc_type = st.selectbox("ููุน ุงููุซููุฉ", [
        "ุฅูุฐุงุฑ ุฑุณูู ูุตุงุญุจ ุงูุนูู",
        "ุดููู ููุฏูุฑูุฉ ุงูุนูู", 
        "ุทูุจ ูุณุงุทุฉ",
        "ุนุฑูุถุฉ ุฏุนูู",
        "ุทูุจ ุงุณุชุดุงุฑุฉ ูุงููููุฉ",
        "ูุฑุงุณูุฉ ุฑุณููุฉ",
        "ุฅูุฑุงุฑ ุฃู ุชูุงุฒู",
        "ุงุชูุงููุฉ ุชุณููุฉ"
    ])
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ")
        recipient_name = st.text_input("ุงุณู ุงููุณุชูู", placeholder="ุงุณู ุตุงุญุจ ุงูุนูู ุฃู ุงูุฌูุฉ")
        issue_date = st.date_input("ุชุงุฑูุฎ ุงููุซููุฉ")
        reference_number = st.text_input("ุฑูู ุงูุฅุดุงุฑุฉ (ุงุฎุชูุงุฑู)")
    
    with col2:
        st.subheader("ุชูุงุตูู ุงููุดููุฉ")
        problem_summary = st.text_area("ููุฎุต ุงููุดููุฉ", height=100)
        requested_action = st.text_input("ุงูุฅุฌุฑุงุก ุงููุทููุจ")
        deadline_days = st.number_input("ุงููููุฉ ุงููุทููุจุฉ (ุฃูุงู)", min_value=1, max_value=90, value=14)
    
    if st.button("๐ ุฅูุดุงุก ุงููุซููุฉ", key="generate_document"):
        document_content = generate_legal_document(
            doc_type, recipient_name, issue_date, problem_summary, 
            requested_action, deadline_days
        )
        
        st.success("## ๐ ุงููุซููุฉ ุงููููุดุฃุฉ")
        st.text_area("ูุญุชูู ุงููุซููุฉ", document_content, height=300)
        
        # ุฎูุงุฑุงุช ุงูุชุญููู
        col1, col2, col3 = st.columns(3)
        with col1:
            st.download_button(
                "๐ฅ ุชุญููู DOC",
                data=document_content,
                file_name=f"{doc_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                mime="text/plain"
            )
        with col2:
            st.download_button(
                "๐ ุชุญููู PDF",
                data=document_content,
                file_name=f"{doc_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                mime="text/plain"
            )
        with col3:
            if st.button("๐ ูุณุฎ ูููุตูุต"):
                st.success("ุชู ุงููุณุฎ ููุญุงูุธุฉ")

# ==========================
# ๐๏ธ ุฏูุงู ูุณุงุนุฏุฉ ูููุญุงูู
# ==========================
def get_complaint_types(category):
    """ุงูุญุตูู ุนูู ุฃููุงุน ุงููุดุงูู ุญุณุจ ุงููุฆุฉ"""
    types_map = {
        "๐ฐ ูุดุงูู ูุงููุฉ": [
            "ุชุฃุฎุฑ ุตุฑู ุงูุฑูุงุชุจ", "ุฎุตู ุบูุฑ ูุงูููู", "ุญุฑูุงู ูู ุนูุงูุงุช",
            "ุนุฏู ุตุฑู ูุณุชุญูุงุช ููุงูุฉ ุงูุฎุฏูุฉ", "ูุดุงูู ูู ุงูุจุฏูุงุช"
        ],
        "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": [
            "ูุตู ุชุนุณูู", "ุฅููุงุก ุฎุฏูุฉ ุจุฏูู ุฅูุฐุงุฑ", "ุถุบุท ููุงุณุชูุงูุฉ",
            "ุฅููุงุก ุฎุฏูุฉ ุฃุซูุงุก ุงูุฅุฌุงุฒุฉ", "ูุตู ุชุฃุฏูุจู ุบูุฑ ูุจุฑุฑ"
        ],
        "โฐ ุธุฑูู ุงูุนูู": [
            "ุณุงุนุงุช ุนูู ุฅุถุงููุฉ ูุณุฑูุฉ", "ุนุฏู ููุญ ูุชุฑุงุช ุฑุงุญุฉ", "ุนูู ูู ุงูุนุทู",
            "ุชุบููุฑ ุธุฑูู ุงูุนูู ุจุดูู ููุงุฌุฆ", "ุถุบุท ุนูู ุบูุฑ ูุนููู"
        ],
        "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ": [
            "ุจูุฆุฉ ุนูู ุบูุฑ ุขููุฉ", "ุนุฏู ุชูููุฑ ูุนุฏุงุช ููุงูุฉ", "ุชุญุฑุด ุฌูุณู",
            "ุชูููุฒ ุนูู ุฃุณุงุณ ุงูุฌูุณ ุฃู ุงูุณู", "ุชููุฑ ููุถุงููุงุช"
        ]
    }
    return types_map.get(category, ["ูุดููุฉ ุนุงูุฉ"])

def analyze_complaint_advanced(category, complaint_type, description, severity, duration, frequency, affected_areas):
    """ุชุญููู ูุชูุฏู ูููุดููุฉ"""
    
    # ุชุญููู ุงูุดุฏุฉ ูุงูุชุฃุซูุฑ
    severity_scores = {
        "ููุฎูุถ": 1, "ูุชูุณุท": 2, "ูุฑุชูุน": 3, "ุญุฑุฌ": 4, "ูุงุฑุซู": 5
    }
    
    duration_scores = {
        "ุฃูู ูู ุฃุณุจูุน": 1, "1-4 ุฃุณุงุจูุน": 2, "1-3 ุฃุดูุฑ": 3, 
        "3-6 ุฃุดูุฑ": 4, "6-12 ุดูุฑ": 5, "ุฃูุซุฑ ูู ุณูุฉ": 6
    }
    
    base_score = severity_scores.get(severity, 1) * duration_scores.get(duration, 1)
    
    return {
        "risk_level": calculate_risk_level(base_score),
        "priority": calculate_priority(base_score, len(affected_areas)),
        "estimated_timeline": estimate_timeline(category, severity),
        "recommended_actions": generate_recommended_actions(category, complaint_type),
        "legal_references": get_legal_references(category),
        "support_resources": get_support_resources(category)
    }

def display_analysis_results(analysis):
    """ุนุฑุถ ูุชุงุฆุฌ ุงูุชุญููู"""
    
    st.success("## ๐ ูุชุงุฆุฌ ุงูุชุญููู ุงูุดุงูู")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.metric("ูุณุชูู ุงูุฎุทูุฑุฉ", analysis["risk_level"])
        st.metric("ุงูุฃููููุฉ", analysis["priority"])
    
    with col2:
        st.metric("ุงูุฅุทุงุฑ ุงูุฒููู ุงูููุฏุฑ", analysis["estimated_timeline"])
        st.metric("ุงููุฑุงุฌุน ุงููุงููููุฉ", f"{len(analysis['legal_references'])} ูุฑุฌุน")
    
    st.markdown("#### ๐ฏ ุงูุฅุฌุฑุงุกุงุช ุงูููุตู ุจูุง")
    for i, action in enumerate(analysis["recommended_actions"], 1):
        st.write(f"{i}. {action}")
    
    st.markdown("#### ๐ ุงููุฑุงุฌุน ุงููุงููููุฉ")
    for reference in analysis["legal_references"]:
        st.write(f"โข {reference}")
    
    st.markdown("#### ๐ ููุงุฑุฏ ุงูุฏุนู")
    for resource in analysis["support_resources"]:
        st.write(f"โข {resource}")

def calculate_risk_level(score):
    """ุญุณุงุจ ูุณุชูู ุงูุฎุทูุฑุฉ"""
    if score >= 20:
        return "๐จ ุนุงูู ุฌุฏุงู"
    elif score >= 15:
        return "๐ด ุนุงูู"
    elif score >= 10:
        return "๐ก ูุชูุณุท"
    elif score >= 5:
        return "๐ข ููุฎูุถ"
    else:
        return "โช ุจุณูุท"

def calculate_priority(score, affected_areas_count):
    """ุญุณุงุจ ุงูุฃููููุฉ"""
    priority_score = score * (1 + affected_areas_count * 0.2)
    
    if priority_score >= 25:
        return "ุนุงุฌู"
    elif priority_score >= 15:
        return "ูุฑุชูุน"
    elif priority_score >= 8:
        return "ูุชูุณุท"
    else:
        return "ุนุงุฏู"

def estimate_timeline(category, severity):
    """ุชูุฏูุฑ ุงูุฅุทุงุฑ ุงูุฒููู"""
    timelines = {
        "๐ฐ ูุดุงูู ูุงููุฉ": "2-4 ุฃุณุงุจูุน",
        "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": "4-8 ุฃุณุงุจูุน", 
        "โฐ ุธุฑูู ุงูุนูู": "1-3 ุฃุณุงุจูุน",
        "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ": "1-2 ุฃุณุงุจูุน"
    }
    
    base_timeline = timelines.get(category, "2-4 ุฃุณุงุจูุน")
    
    # ุชุนุฏูู ุญุณุจ ุงูุดุฏุฉ
    if severity in ["ุญุฑุฌ", "ูุงุฑุซู"]:
        return f"ููุฑู - {base_timeline}"
    else:
        return base_timeline

def generate_recommended_actions(category, complaint_type):
    """ุชูููุฏ ุงูุฅุฌุฑุงุกุงุช ุงูููุตู ุจูุง"""
    actions_map = {
        "๐ฐ ูุดุงูู ูุงููุฉ": [
            "ุชูุซูู ูุงูุฉ ุงููุณุชูุฏุงุช ุงููุงููุฉ",
            "ุฅุฑุณุงู ุฅูุฐุงุฑ ุฑุณูู ูุตุงุญุจ ุงูุนูู",
            "ุงูุชูุฌู ููุฏูุฑูุฉ ุงูุนูู",
            "ุญุณุงุจ ุงููุณุชุญูุงุช ุงููุงููุฉ ุจุฏูุฉ"
        ],
        "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": [
            "ุทูุจ ุฃุณุจุงุจ ุงููุตู ุฎุทูุงู",
            "ูุฑุงุฌุนุฉ ุนูุฏ ุงูุนูู ูุงูุดุฑูุท",
            "ุญุณุงุจ ูุณุชุญูุงุช ููุงูุฉ ุงูุฎุฏูุฉ",
            "ุงุณุชุดุงุฑุฉ ูุญุงูู ูุชุฎุตุต"
        ]
    }
    
    return actions_map.get(category, [
        "ุชูุซูู ูุงูุฉ ุฌูุงูุจ ุงููุดููุฉ",
        "ุงูุจุญุซ ุนู ุฃุฏูุฉ ูุฅุซุจุงุชุงุช",
        "ุงูุชูุฌู ููุฌูุงุช ุงููุฎุชุตุฉ",
        "ุงููุญุงูุธุฉ ุนูู ุงููุฏูุก ูุงูุงุญุชุฑุงููุฉ"
    ])

def get_legal_references(category):
    """ุงูุญุตูู ุนูู ุงููุฑุงุฌุน ุงููุงููููุฉ"""
    references_map = {
        "๐ฐ ูุดุงูู ูุงููุฉ": [
            "ุงููุงุฏุฉ 55: ููุนุฏ ุตุฑู ุงูุฃุฌุฑ",
            "ุงููุงุฏุฉ 56: ุงูุชุนููุถ ุนู ุงูุชุฃุฎูุฑ", 
            "ุงููุงุฏุฉ 42: ุจุฏู ุงูุนูู ุงูุฅุถุงูู"
        ],
        "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": [
            "ุงููุงุฏุฉ 72: ุฅููุงุก ุนูุฏ ุงูุนูู",
            "ุงููุงุฏุฉ 73: ุงููุตู ุงูุชุนุณูู",
            "ุงููุงุฏุฉ 74: ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ"
        ]
    }
    
    return references_map.get(category, ["ูุงููู ุงูุนูู ุงูุฃุฑุฏูู ูุชุนุฏููุงุชู"])

def get_support_resources(category):
    """ุงูุญุตูู ุนูู ููุงุฑุฏ ุงูุฏุนู"""
    resources = [
        "ูุฒุงุฑุฉ ุงูุนูู: 06-5802666",
        "ููุงุจุฉ ุงููุญุงููู: 06-5664111", 
        "ูุฑุงูุฒ ุงูุฏุนู ุงููุงูููู ุงููุฌุงูู",
        "ุฎุทูุท ุงููุณุงุนุฏุฉ ุงูููุณูุฉ"
    ]
    
    if category == "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ":
        resources.append("ุงูุฏูุงุน ุงููุฏูู: 199")
        resources.append("ูุฑูุฒ ุงูุญูุงูุฉ ูู ุงูุชุญุฑุด")
    
    return resources

def generate_legal_document(doc_type, recipient, date, problem, action, deadline):
    """ุชูููุฏ ูุซููุฉ ูุงููููุฉ"""
    
    templates = {
        "ุฅูุฐุงุฑ ุฑุณูู ูุตุงุญุจ ุงูุนูู": f"""
        ุฅูุฐุงุฑ ุฑุณูู
        ุงูุชุงุฑูุฎ: {date}
        
        ุฅูู: {recipient}
        
        ุงูููุถูุน: {problem}
        
        ุฃูุง ุงูุนุงูู ูู ูุคุณุณุชููุ ุฃุญูุทูู ุนููุงู ุจุฃูู:
        {problem}
        
        ุฃุทูุจ ูููู:
        {action}
        
        ุขูู ูููู ูุนุงูุฌุฉ ุงูุฃูุฑ ุฎูุงู {deadline} ูููุงู ูู ุชุงุฑูุฎ ูุฐุง ุงูุฅูุฐุงุฑุ 
        ูุฅูุง ุณุฃุถุทุฑ ูุงุชุฎุงุฐ ุงูุฅุฌุฑุงุกุงุช ุงููุงููููุฉ ุงููุงุฒูุฉ.
        
        ูุชูุถููุง ุจูุจูู ูุงุฆู ุงูุงุญุชุฑุงูุ
        [ุงูุชูููุน]
        """,
        
        "ุดููู ููุฏูุฑูุฉ ุงูุนูู": f"""
        ุดููู ุฑุณููุฉ
        ุงูุชุงุฑูุฎ: {date}
        
        ุฅูู: ูุฏูุฑ ูุฏูุฑูุฉ ุงูุนูู ุงููุฎุชุตุฉ
        
        ุงูููุถูุน: ุดููู ุจุฎุตูุต {problem}
        
        ุฃุชูุฏู ูุณูุงุฏูู ุจูุฐู ุงูุดููู ุถุฏ: {recipient}
        
        ุชูุงุตูู ุงููุดููุฉ:
        {problem}
        
        ุงูุฅุฌุฑุงุก ุงููุทููุจ:
        {action}
        
        ุฃุฑุฌู ูู ุณูุงุฏูู ุงุชุฎุงุฐ ุงูุฅุฌุฑุงุกุงุช ุงููุงุฒูุฉ ูููุงู ูููุงููู.
        
        ูุชูุถููุง ุจูุจูู ูุงุฆู ุงูุงุญุชุฑุงูุ
        [ููุฏู ุงูุดููู]
        """
    }
    
    return templates.get(doc_type, "ูููุฐุฌ ุบูุฑ ูุชููุฑ")

# ==========================
# ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู (ุณูุชู ุงุณุชููุงููุง)
# ==========================
def show_solutions_map():
    st.markdown("#### ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู ูุงูุจุฏุงุฆู")
    st.info("ูุฐุง ุงููุณู ููุฏ ุงูุชุทููุฑ...")

def show_risk_analysis():
    st.markdown("#### ๐ ุชุญููู ุงููุฎุงุทุฑ ุงููุชูุฏู") 
    st.info("ูุฐุง ุงููุณู ููุฏ ุงูุชุทููุฑ...")

def show_immediate_support():
    st.markdown("#### ๐ ุงูุฏุนู ูุงููุณุงูุฏุฉ ุงูููุฑูุฉ")
    st.info("ูุฐุง ุงููุณู ููุฏ ุงูุชุทููุฑ...")

# ==========================
# ๐งญ ุฅุถุงูุฉ ุงููุญุงูู ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
# ==========================
# ุณูุชู ุฏูุฌ ูุฐุง ูุน ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ
# ==========================
# ๐๏ธ ุงูุฌูุงุช ุงููุฎุชุตุฉ ุงููุญุณูุฉ
# ==========================
def show_authorities_section():
    st.markdown("### ๐๏ธ ุงูุฌูุงุช ุงููุฎุชุตุฉ - ุฏููู ุดุงูู ูุฌููุน ุงููุญุงูุธุงุช")
    
    authorities_tabs = st.tabs([
        "๐บ๏ธ ุฎุฑูุทุฉ ุงููุญุงูุธุงุช",
        "๐ ูุนูููุงุช ุงูุงุชุตุงู", 
        "๐ ุฅุฌุฑุงุกุงุช ุงูุดูุงูู",
        "โฐ ููุงุนูุฏ ุงูุนูู",
        "๐ ุงูุฎุฏูุงุช ุงูุฅููุชุฑูููุฉ"
    ])
    
    with authorities_tabs[0]:
        # ุชุญุฏูุซ ุงููุญุงูุธุงุช ูุงูุฌูุงุช 2025
        governorates = {
            "ุนูุงู": {
                "ูุฒุงุฑุฉ ุงูุนูู": {
                    "ูุงุชู": "06-5802666",
                    "ุนููุงู": "ุชูุงุน ุงูุนูู - ูุฌูุน ุงูุฏูุงุฆุฑ ุงูุญููููุฉ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุงูุชุฑุงุฎูุต", "ุงูุชูุชูุด", "ุงูุฅุฑุดุงุฏ"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                },
                "ูุญููุฉ ุงูุนูู": {
                    "ูุงุชู": "06-5651900", 
                    "ุนููุงู": "ุดุงุฑุน ุงููุฏููุฉ ุงููููุฑุฉ - ุจุฌุงูุจ ูุญููุฉ ุงูุจุฏุงุกุฉ",
                    "ุฎุฏูุงุช": ["ูุถุงูุง ุงูุนูู", "ุงูููุงุฒุนุงุช", "ุงูุทุนูู"],
                    "ุฃููุงุช": "8:00 ุต - 2:00 ู"
                },
                "ูุคุณุณุฉ ุงูุถูุงู ุงูุงุฌุชูุงุนู": {
                    "ูุงุชู": "06-5521221",
                    "ุนููุงู": "ุงูุดููุณุงูู - ูุฌูุน ุงูุถูุงู ุงูุงุฌุชูุงุนู",
                    "ุฎุฏูุงุช": ["ุชุฃูููุงุช ุงูุนุงูููู", "ูุนุงุดุงุช ุงูุชูุงุนุฏ", "ุฅุตุงุจุงุช ุงูุนูู"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                }
            },
            "ุฅุฑุจุฏ": {
                "ูุฏูุฑูุฉ ุงูุนูู ุฅุฑุจุฏ": {
                    "ูุงุชู": "02-7272111",
                    "ุนููุงู": "ูุณุท ุงููุฏููุฉ - ุจุฌุงูุจ ุจูุฏูุฉ ุฅุฑุจุฏ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุงูุชูุชูุด", "ุงูุชุฑุงุฎูุต"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                },
                "ูุญููุฉ ุงูุนูู ุฅุฑุจุฏ": {
                    "ูุงุชู": "02-7241502",
                    "ุนููุงู": "ููุทูุฉ ุงูุฑูุซุง - ุงููุฌูุน ุงููุถุงุฆู",
                    "ุฎุฏูุงุช": ["ูุถุงูุง ุงูุนูู", "ุงูุฌูุณุงุช"],
                    "ุฃููุงุช": "8:00 ุต - 2:00 ู"
                }
            },
            "ุงูุฒุฑูุงุก": {
                "ูุฏูุฑูุฉ ุงูุนูู ุงูุฒุฑูุงุก": {
                    "ูุงุชู": "05-3982110",
                    "ุนููุงู": "ูุฏููุฉ ุงูุฒุฑูุงุก ุงูุฌุฏูุฏุฉ - ุงูููุทูุฉ ุงูุฅุฏุงุฑูุฉ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุงูุชูุชูุด", "ุงูุชุฑุงุฎูุต"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                }
            },
            "ุงูุนูุจุฉ": {
                "ูุฏูุฑูุฉ ุงูุนูู ุงูุนูุจุฉ": {
                    "ูุงุชู": "03-2016211",
                    "ุนููุงู": "ุงูููุทูุฉ ุงูุงูุชุตุงุฏูุฉ - ูุจูู ุงูุฏูุงุฆุฑ ุงูุญููููุฉ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุชุฑุงุฎูุต ุงูุนูุงูุฉ"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                }
            }
        }
        
        selected_gov = st.selectbox("ุงุฎุชุฑ ุงููุญุงูุธุฉ", list(governorates.keys()))
        
        if selected_gov:
            st.success(f"### ๐ ุงูุฌูุงุช ุงููุฎุชุตุฉ ูู {selected_gov}")
            
            for authority, info in governorates[selected_gov].items():
                with st.expander(f"๐๏ธ {authority}"):
                    col1, col2 = st.columns([1, 2])
                    
                    with col1:
                        st.write("**๐ ูุนูููุงุช ุงูุงุชุตุงู:**")
                        st.write(f"**๐ ุงููุงุชู:** {info['ูุงุชู']}")
                        st.write(f"**๐ ุงูุนููุงู:** {info['ุนููุงู']}")
                        st.write(f"**๐ ุฃููุงุช ุงูุนูู:** {info['ุฃููุงุช']}")
                    
                    with col2:
                        st.write("**๐ ุงูุฎุฏูุงุช ุงูููุฏูุฉ:**")
                        for service in info['ุฎุฏูุงุช']:
                            st.write(f"โข {service}")
    
    with authorities_tabs[2]:
        st.markdown("#### ๐ ุฅุฌุฑุงุกุงุช ุชูุฏูู ุงูุดููู ุฎุทูุฉ ุจุฎุทูุฉ")
        
        complaint_steps = [
            {
                "ุงูุฎุทูุฉ": "ูก. ุชุฌููุฒ ุงููุณุชูุฏุงุช",
                "ุงูุชูุงุตูู": "ุฌูุน ูุงูุฉ ุงููุณุชูุฏุงุช ุงููุทููุจุฉ",
                "ุงููุณุชูุฏุงุช": ["ุนูุฏ ุงูุนูู", "ูุดูู ุงูุฑูุงุชุจ", "ุงููููุฉ ุงูุดุฎุตูุฉ", "ุงููุฑุงุณูุงุช"]
            },
            {
                "ุงูุฎุทูุฉ": "ูข. ุงูุชูุฌู ูููุฏูุฑูุฉ",
                "ุงูุชูุงุตูู": "ุงูุฐูุงุจ ุฅูู ูุฏูุฑูุฉ ุงูุนูู ุงููุฎุชุตุฉ",
                "ุงููุณุชูุฏุงุช": ["ุงููุณุชูุฏุงุช ุงููุฌูุฒุฉ", "ุทูุจ ุงูุดููู"]
            },
            {
                "ุงูุฎุทูุฉ": "ูฃ. ุชุนุจุฆุฉ ุงููููุฐุฌ",
                "ุงูุชูุงุตูู": "ุชุนุจุฆุฉ ูููุฐุฌ ุงูุดููู ุงูุฑุณูู",
                "ุงููุณุชูุฏุงุช": ["ุงููููุฐุฌ ุงููุนุจุฃ", "ุงููุณุชูุฏุงุช ุงูุฏุงุนูุฉ"]
            },
            {
                "ุงูุฎุทูุฉ": "ูค. ุงููุชุงุจุนุฉ",
                "ุงูุชูุงุตูู": "ูุชุงุจุนุฉ ุงูุดููู ุนุจุฑ ุงููุธุงู ุงูุฅููุชุฑููู",
                "ุงููุณุชูุฏุงุช": ["ุฑูู ุงูุดููู", "ูุนูููุงุช ุงููุชุงุจุนุฉ"]
            }
        ]
        
        for step in complaint_steps:
            with st.expander(f"๐ {step['ุงูุฎุทูุฉ']}"):
                st.write(f"**ุงูุชูุงุตูู:** {step['ุงูุชูุงุตูู']}")
                st.write("**ุงููุณุชูุฏุงุช ุงููุทููุจุฉ:**")
                for doc in step['ุงููุณุชูุฏุงุช']:
                    st.write(f"โข {doc}")
    
    with authorities_tabs[4]:
        st.markdown("#### ๐ ุงูุฎุฏูุงุช ุงูุฅููุชุฑูููุฉ ุงููุชุงุญุฉ")
        
        e_services = [
            {
                "ุงูุฎุฏูุฉ": "ุชูุฏูู ุดููู ุฅููุชุฑูููุงู",
                "ุงูุฑุงุจุท": "https://www.mol.gov.jo/complaints",
                "ุงููุฒุงูุง": ["24/7", "ูุชุงุจุนุฉ ููุฑูุฉ", "ุชูููุฑ ุงูููุช"]
            },
            {
                "ุงูุฎุฏูุฉ": "ุงูุงุณุชุนูุงู ุนู ูุถุงูุง ุงูุนูู",
                "ุงูุฑุงุจุท": "https://courts.jo/labor-cases", 
                "ุงููุฒุงูุง": ["ูุนูููุงุช ูุญุฏุซุฉ", "ุญุงูุฉ ุงููุถูุฉ", "ููุงุนูุฏ ุงูุฌูุณุงุช"]
            },
            {
                "ุงูุฎุฏูุฉ": "ุญุงุณุจุฉ ุงููุณุชุญูุงุช",
                "ุงูุฑุงุจุท": "https://www.mol.gov.jo/calculators",
                "ุงููุฒุงูุง": ["ุญุณุงุจุงุช ุฏูููุฉ", "ูุฑุงุฌุน ูุงููููุฉ", "ูุชุงุฆุฌ ููุฑูุฉ"]
            }
        ]
        
        for service in e_services:
            with st.expander(f"๐ {service['ุงูุฎุฏูุฉ']}"):
                st.write(f"**ุงูุฑุงุจุท:** {service['ุงูุฑุงุจุท']}")
                st.write("**ุงููุฒุงูุง:**")
                for advantage in service['ุงููุฒุงูุง']:
                    st.write(f"โข {advantage}")
# ==========================
# ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู ุงูุชูุงุนููุฉ ุงูููุณุนุฉ
# ==========================
def show_rights_map():
    st.markdown("### ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู ูุงูุงูุชุฒุงูุงุช ุงูุชูุงุนููุฉ - ูุญุฏุซุฉ 2025")
    
    map_tabs = st.tabs([
        "๐ท ุญููู ุงูุนุงูู", 
        "๐ ุงูุชุฒุงูุงุช ุตุงุญุจ ุงูุนูู",
        "๐ฐ ุงูุญููู ุงููุงููุฉ",
        "โฐ ููุช ุงูุนูู ูุงูุฅุฌุงุฒุงุช",
        "๐ก๏ธ ุงูุญูุงูุฉ ูุงูุณูุงูุฉ",
        "๐ ููุงุฑูุงุช ุชูุงุนููุฉ"
    ])
    
    with map_tabs[0]:
        st.markdown("#### ๐ท ุญููู ุงูุนุงูู ุงูุดุงููุฉ ูู ุงููุงููู ุงูุฃุฑุฏูู")
        
        rights_categories = {
            "๐ฐ ุงูุญููู ุงููุงููุฉ": {
                "items": [
                    {"right": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", "value": "290 ุฏููุงุฑ", "law": "ุงููุงุฏุฉ 35", "details": "ูููุคูููู ุฌุงูุนูุงู - 2025"},
                    {"right": "ุตุฑู ุงูุฑุงุชุจ ูู ุงูููุช", "value": "ุฃูู 7 ุฃูุงู", "law": "ุงููุงุฏุฉ 55", "details": "ูู ููุงูุฉ ุงูุดูุฑ"},
                    {"right": "ุจุฏู ุงูุนูู ุงูุฅุถุงูู", "value": "125% - 150%", "law": "ุงููุงุฏุฉ 42", "details": "125% ููุงุฑูุ 150% ูููู ูุนุทูุงุช"},
                    {"right": "ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ", "value": "ุญุณุจ ูุฏุฉ ุงูุฎุฏูุฉ", "law": "ุงูููุงุฏ 74-77", "details": "ุชุณุชุญู ุจุนุฏ ุณูุฉ ูุงุญุฏุฉ"}
                ]
            },
            "โฐ ููุช ุงูุนูู ูุงูุฑุงุญุฉ": {
                "items": [
                    {"right": "ุณุงุนุงุช ุงูุนูู ุงูููููุฉ", "value": "8 ุณุงุนุงุช", "law": "ุงููุงุฏุฉ 46", "details": "48 ุณุงุนุฉ ุฃุณุจูุนูุงู ูุญุฏ ุฃูุตู"},
                    {"right": "ุงูุฅุฌุงุฒุฉ ุงูุฃุณุจูุนูุฉ", "value": "ููู ูุงุญุฏ", "law": "ุงููุงุฏุฉ 48", "details": "ูุฏููุนุฉ ุงูุฃุฌุฑ"},
                    {"right": "ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "value": "14-28 ููู", "law": "ุงููุงุฏุฉ 52", "details": "ุญุณุจ ูุฏุฉ ุงูุฎุฏูุฉ"},
                    {"right": "ูุชุฑุงุช ุงูุฑุงุญุฉ", "value": "ุณุงุนุฉ ููููุงู", "law": "ุงููุงุฏุฉ 47", "details": "ููุนุงูููู 6 ุณุงุนุงุช ูุชูุงุตูุฉ"}
                ]
            },
            "๐ฅ ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ูุงูุงุฌุชูุงุนูุฉ": {
                "items": [
                    {"right": "ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ", "value": "14 ููู ูุงูู", "law": "ุงููุงุฏุฉ 58", "details": "ุซู ูุตู ุงูุฑุงุชุจ ููุฏุฉ 14 ููู"},
                    {"right": "ุฅุฌุงุฒุฉ ุงูุฃูููุฉ", "value": "10 ุฃุณุงุจูุน", "law": "ุงููุงุฏุฉ 69", "details": "ูุฏููุนุฉ ุงูุฃุฌุฑ ุจุงููุงูู - 2025"},
                    {"right": "ุงูุชุฃููู ุงูุตุญู", "value": "ุฅูุฒุงูู", "law": "ุงููุงุฏุฉ 81", "details": "ุนูู ุตุงุญุจ ุงูุนูู"},
                    {"right": "ุฅุฌุงุฒุฉ ุงููุถุน", "value": "3 ุฃูุงู", "law": "ุงููุงุฏุฉ 70", "details": "ููุฃุจ ูุฏููุนุฉ ุงูุฃุฌุฑ"}
                ]
            },
            "๐ก๏ธ ุงูุญูุงูุฉ ูุงูุณูุงูุฉ": {
                "items": [
                    {"right": "ุจูุฆุฉ ุนูู ุขููุฉ", "value": "ุฅูุฒุงููุฉ", "law": "ุงููุงุฏุฉ 79", "details": "ุชูููุฑ ูุนุฏุงุช ุงูุณูุงูุฉ"},
                    {"right": "ุงูุญูุงูุฉ ูู ุงูุชุญุฑุด", "value": "ุฅุฌุฑุงุกุงุช ุตุงุฑูุฉ", "law": "ุงููุงุฏุฉ 105 ููุฑุฑ", "details": "ุชุนุฏูู 2025"},
                    {"right": "ุงูุชุนููุถ ุนู ุงูุฅุตุงุจุงุช", "value": "ูุงูู ุงููููุงุช", "law": "ุงููุงุฏุฉ 82", "details": "ุจูุง ูููุง ุงูุฃุฌุฑ ุฎูุงู ุงูุนูุงุฌ"},
                    {"right": "ุงูุณุฑูุฉ ุงูููููุฉ", "value": "ูุญููุฉ", "law": "ุงููุงุฏุฉ 21", "details": "ุญูุงูุฉ ุจูุงูุงุช ุงูุนุงูู"}
                ]
            }
        }
        
        for category, rights in rights_categories.items():
            with st.expander(f"๐ {category}", expanded=True):
                cols = st.columns(2)
                for idx, item in enumerate(rights['items']):
                    with cols[idx % 2]:
                        st.markdown(f"""
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 0.5rem 0; border-left: 4px solid #2563EB;">
                        <h4 style="margin: 0 0 0.5rem 0;">{item['right']}</h4>
                        <p style="margin: 0.25rem 0; color: #059669;"><strong>๐ {item['value']}</strong></p>
                        <p style="margin: 0.25rem 0; color: #666; font-size: 0.9rem;">{item['details']}</p>
                        <p style="margin: 0.25rem 0; color: #1E40AF; font-size: 0.8rem;">โ๏ธ {item['law']}</p>
                        </div>
                        """, unsafe_allow_html=True)
    
    with map_tabs[1]:
        st.markdown("#### ๐ ุงูุงูุชุฒุงูุงุช ุงููุงููููุฉ ุงูุดุงููุฉ ูุฃุตุญุงุจ ุงูุนูู")
        
        obligations_categories = {
            "๐ ุงูุชูุซูู ูุงููุณุชูุฏุงุช": {
                "items": [
                    {"obligation": "ุนูุฏ ุนูู ููุชูุจ", "deadline": "ูุจู ุงูุจุฏุก", "law": "ุงููุงุฏุฉ 13", "penalty": "ุบุฑุงูุฉ 500-1000 ุฏููุงุฑ"},
                    {"obligation": "ุณุฌู ุงูุนุงูููู", "deadline": "ูุณุชูุฑ", "law": "ุงููุงุฏุฉ 26", "penalty": "ุบุฑุงูุฉ 300 ุฏููุงุฑ"},
                    {"obligation": "ููุงุฆุญ ุงูุนูู", "deadline": "30 ููู", "law": "ุงููุงุฏุฉ 27", "penalty": "ุบุฑุงูุฉ 200 ุฏููุงุฑ"},
                    {"obligation": "ูุดูู ุงูุฑูุงุชุจ", "deadline": "ุดูุฑู", "law": "ุงููุงุฏุฉ 55", "penalty": "ุบุฑุงูุฉ 500 ุฏููุงุฑ"}
                ]
            },
            "๐ฐ ุงูุงูุชุฒุงูุงุช ุงููุงููุฉ": {
                "items": [
                    {"obligation": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", "deadline": "ูุณุชูุฑ", "law": "ุงููุงุฏุฉ 35", "penalty": "ุบุฑุงูุฉ 1000 ุฏููุงุฑ"},
                    {"obligation": "ุชุณุฏูุฏ ุงูุถูุงู", "deadline": "ุดูุฑู", "law": "ูุงููู ุงูุถูุงู", "penalty": "ุบุฑุงูุฉ 5% ุดูุฑูุงู"},
                    {"obligation": "ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ", "deadline": "7 ุฃูุงู", "law": "ุงููุงุฏุฉ 77", "penalty": "ูุงุฆุฏุฉ 8% ุณูููุงู"},
                    {"obligation": "ุจุฏู ุงูุนูู ุงูุฅุถุงูู", "deadline": "ูุน ุงูุฑุงุชุจ", "law": "ุงููุงุฏุฉ 42", "penalty": "ูุถุงุนูุฉ ุงููุณุชุญู"}
                ]
            },
            "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ": {
                "items": [
                    {"obligation": "ุชูููุฑ ูุนุฏุงุช ุงูุณูุงูุฉ", "deadline": "ููุฑู", "law": "ุงููุงุฏุฉ 79", "penalty": "ุบุฑุงูุฉ 2000 ุฏููุงุฑ"},
                    {"obligation": "ุชุฏุฑูุจ ุงูุนุงูููู", "deadline": "ูุจู ุงูุจุฏุก", "law": "ุงููุงุฏุฉ 80", "penalty": "ุบุฑุงูุฉ 500 ุฏููุงุฑ"},
                    {"obligation": "ุงูุฅุจูุงุบ ุนู ุงูุญูุงุฏุซ", "deadline": "24 ุณุงุนุฉ", "law": "ุงููุงุฏุฉ 83", "penalty": "ุบุฑุงูุฉ 1000 ุฏููุงุฑ"},
                    {"obligation": "ุงููุญุต ุงูุทุจู ุงูุฏูุฑู", "deadline": "ุณููู", "law": "ุงููุงุฏุฉ 81", "penalty": "ุบุฑุงูุฉ 300 ุฏููุงุฑ"}
                ]
            },
            "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": {
                "items": [
                    {"obligation": "ุงูุฅุฎุทุงุฑ ุงููุณุจู", "deadline": "ุญุณุจ ุงููุฏุฉ", "law": "ุงููุงุฏุฉ 72", "penalty": "ุชุนููุถ ุนู ุงููุชุฑุฉ"},
                    {"obligation": "ุตุฑู ุงููุณุชุญูุงุช", "deadline": "7 ุฃูุงู", "law": "ุงููุงุฏุฉ 77", "penalty": "ูุงุฆุฏุฉ 8% ุณูููุงู"},
                    {"obligation": "ุดูุงุฏุฉ ุงูุฎุจุฑุฉ", "deadline": "ุนูุฏ ุงูุทูุจ", "law": "ุงููุงุฏุฉ 78", "penalty": "ุบุฑุงูุฉ 100 ุฏููุงุฑ"},
                    {"obligation": "ุชุณููู ุงููุณุชูุฏุงุช", "deadline": "ููุฑู", "law": "ุงููุงุฏุฉ 78", "penalty": "ุบุฑุงูุฉ 200 ุฏููุงุฑ"}
                ]
            }
        }
        
        for category, obligations in obligations_categories.items():
            with st.expander(f"๐ {category}", expanded=True):
                for item in obligations['items']:
                    col1, col2, col3, col4 = st.columns([3, 2, 2, 2])
                    with col1:
                        st.write(f"**{item['obligation']}**")
                    with col2:
                        st.warning(f"โฐ {item['deadline']}")
                    with col3:
                        st.info(f"โ๏ธ {item['law']}")
                    with col4:
                        st.error(f"๐ฐ {item['penalty']}")
    
    with map_tabs[5]:
        st.markdown("#### ๐ ููุงุฑูุงุช ุชูุงุนููุฉ ุจูู ุงูุญููู ูุงูุงูุชุฒุงูุงุช")
        
        comparison_data = {
            "ุงูุจูุฏ": ["ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", "ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "ุฅุฌุงุฒุฉ ุงูุฃูููุฉ", "ุณุงุนุงุช ุงูุนูู", "ุจุฏู ุงูุนูู ุงูุฅุถุงูู"],
            "ุญู ุงูุนุงูู": ["290 ุฏููุงุฑ", "14-28 ููู", "10 ุฃุณุงุจูุน", "48 ุณุงุนุฉ ุฃุณุจูุนูุงู", "125%-150%"],
            "ุงูุชุฒุงู ุตุงุญุจ ุงูุนูู": ["ุชุทุจูู 290 ุฏููุงุฑ", "ููุญ ุงูุฅุฌุงุฒุฉ ูุฏูุน ูุณุชุญูุงุชูุง", "ููุญ ุงูุฅุฌุงุฒุฉ ุจุฏูุน ูุงูู", "ุนุฏู ุชุฌุงูุฒ 48 ุณุงุนุฉ", "ุฏูุน ุงูุจุฏู ุงูุฅุถุงูู"],
            "ุงูุนููุจุฉ": ["ุบุฑุงูุฉ 1000 ุฏููุงุฑ", "ุฏูุน ูุณุชุญูุงุช ูุถุงุนูุฉ", "ุบุฑุงูุฉ 2000 ุฏููุงุฑ", "ุบุฑุงูุฉ 500 ุฏููุงุฑ", "ูุถุงุนูุฉ ุงููุณุชุญู"]
        }
        
        df = pd.DataFrame(comparison_data)
        st.dataframe(df, use_container_width=True)
        
        # ูุฎุทุท ุชูุงุนูู
        st.markdown("##### ๐ ูุฎุทุท ุงูููุงุฑูุงุช")
        chart_data = pd.DataFrame({
            'ุงูุญููู': [290, 21, 70, 48, 137.5],
            'ุงูุงูุชุฒุงูุงุช': [290, 21, 70, 48, 137.5]
        }, index=['ุงูุฃุฌูุฑ (ุฏููุงุฑ)', 'ุงูุฅุฌุงุฒุงุช (ููู)', 'ุงูุฃูููุฉ (ููู)', 'ุณุงุนุงุช ุงูุนูู', 'ุจุฏู ุฅุถุงูู (%)'])
        
        st.bar_chart(chart_data)
# ==========================
# โฐ ููุจู ุงูููุงุนูุฏ ุงูููุณุน
# ==========================
def show_reminder_system():
    st.markdown("### โฐ ููุจู ุงูููุงุนูุฏ ุงููุงููููุฉ - ูุธุงู ูุชูุงูู")
    
    reminder_tabs = st.tabs([
        "๐ ุฅุฏุงุฑุฉ ุงูุชุฐููุฑุงุช",
        "โ๏ธ ุงูููุงุนูุฏ ุงููุงููููุฉ", 
        "๐ ุชูููู ุงูููุงุนูุฏ",
        "๐ ุงูุฅุดุนุงุฑุงุช",
        "๐ ุฅุญุตุงุฆูุงุช ุงููุชุงุจุนุฉ"
    ])
    
    with reminder_tabs[0]:
        col1, col2 = st.columns([2, 1])
        
        with col1:
            st.markdown("#### ๐ ุฅุถุงูุฉ ุชุฐููุฑ ุฌุฏูุฏ")
            
            with st.form("add_reminder", clear_on_submit=True):
                col1, col2 = st.columns(2)
                
                with col1:
                    reminder_type = st.selectbox("ููุน ุงูุชุฐููุฑ", [
                        "ููุนุฏ ูุญููุฉ",
                        "ุขุฌู ุชุณููู ูุณุชูุฏ",
                        "ุฌูุณุฉ ุตูุญ", 
                        "ููุนุฏ ุฏูุน",
                        "ุงุฌุชูุงุน ุนูู",
                        "ููุนุฏ ุทุจู",
                        "ุงูุชูุงุก ุนูุฏ",
                        "ุฃุฎุฑู"
                    ])
                    
                    title = st.text_input("ุนููุงู ุงูุชุฐููุฑ ๐")
                    priority = st.select_slider("ุงูุฃููููุฉ ๐จ", options=["ููุฎูุถุฉ", "ูุชูุณุทุฉ", "ุนุงููุฉ", "ุนุงุฌูุฉ"])
                
                with col2:
                    due_date = st.date_input("ุงูุชุงุฑูุฎ ุงููุณุชูุฏู ๐", min_value=datetime.now().date())
                    due_time = st.time_input("ุงูููุช ุงููุณุชูุฏู โฐ", value=datetime.now().time())
                    category = st.selectbox("ุงูุชุตููู", ["ุนูู", "ูุถุงุฆู", "ูุงูู", "ุตุญู", "ุฅุฏุงุฑู"])
                
                description = st.text_area("ูุตู ุงูุชุฐููุฑ ๐", placeholder="ุฃุถู ุชูุงุตูู ุฅุถุงููุฉ ุนู ุงูุชุฐููุฑ...")
                
                if st.form_submit_button("โ ุฅุถุงูุฉ ุงูุชุฐููุฑ"):
                    new_reminder = {
                        "id": len(st.session_state.get('reminders', [])) + 1,
                        "type": reminder_type,
                        "title": title,
                        "description": description,
                        "due_date": due_date,
                        "due_time": due_time,
                        "priority": priority,
                        "category": category,
                        "created": datetime.now(),
                        "status": "ูุดุท"
                    }
                    if 'reminders' not in st.session_state:
                        st.session_state.reminders = []
                    st.session_state.reminders.append(new_reminder)
                    st.success("โ ุชู ุฅุถุงูุฉ ุงูุชุฐููุฑ ุจูุฌุงุญ!")
        
        with col2:
            st.markdown("#### ๐ ุงูุชุฐููุฑุงุช ุงููุงุฏูุฉ")
            
            if 'reminders' in st.session_state and st.session_state.reminders:
                now = datetime.now()
                upcoming = []
                
                for reminder in st.session_state.reminders:
                    reminder_datetime = datetime.combine(reminder['due_date'], reminder['due_time'])
                    if reminder_datetime >= now and reminder['status'] == 'ูุดุท':
                        upcoming.append(reminder)
                
                upcoming.sort(key=lambda x: datetime.combine(x['due_date'], x['due_time']))
                
                for i, reminder in enumerate(upcoming[:5]):
                    days_left = (reminder['due_date'] - now.date()).days
                    priority_color = {
                        "ุนุงุฌูุฉ": "๐ด",
                        "ุนุงููุฉ": "๐", 
                        "ูุชูุณุทุฉ": "๐ก",
                        "ููุฎูุถุฉ": "๐ข"
                    }
                    
                    with st.container():
                        st.write(f"{priority_color[reminder['priority']]} **{reminder['title']}**")
                        st.write(f"๐ {reminder['due_date']} | โฐ {reminder['due_time']}")
                        st.write(f"โณ {days_left} ููู ูุชุจูู | ๐ท๏ธ {reminder['type']}")
                        
                        # ุดุฑูุท ุงูุชูุฏู
                        progress = max(0, min(100, 100 - (days_left * 10)))
                        st.progress(progress / 100)
                        
                        col1, col2 = st.columns(2)
                        with col1:
                            if st.button("โ ุชู", key=f"done_{reminder['id']}"):
                                reminder['status'] = 'ููุชูู'
                                st.rerun()
                        with col2:
                            if st.button("๐๏ธ ุญุฐู", key=f"delete_{reminder['id']}"):
                                st.session_state.reminders.remove(reminder)
                                st.rerun()
                        st.write("---")
            else:
                st.info("๐ญ ูุง ุชูุฌุฏ ุชุฐููุฑุงุช ูุงุฏูุฉ")
    
    with reminder_tabs[1]:
        st.markdown("#### โ๏ธ ุงูููุงุนูุฏ ุงููุงููููุฉ ุงููุงูุฉ")
        
        legal_deadlines = {
            "ุชูุฏูู ุดููู ุนูู": {
                "ุงููููุฉ": "30 ูููุงู",
                "ูู": "ุชุงุฑูุฎ ูููุน ุงููุฎุงููุฉ",
                "ุฅูู": "ูุฏูุฑูุฉ ุงูุนูู ุงููุฎุชุตุฉ",
                "ุงููุงููู": "ุงููุงุฏุฉ 80"
            },
            "ุงูุทุนู ุนูู ูุฑุงุฑ ุงููุตู": {
                "ุงููููุฉ": "30 ูููุงู", 
                "ูู": "ุชุงุฑูุฎ ุงููุตู",
                "ุฅูู": "ูุญููุฉ ุงูุนูู",
                "ุงููุงููู": "ุงููุงุฏุฉ 73"
            },
            "ุตุฑู ูุณุชุญูุงุช ููุงูุฉ ุงูุฎุฏูุฉ": {
                "ุงููููุฉ": "7 ุฃูุงู",
                "ูู": "ุชุงุฑูุฎ ุฅููุงุก ุงูุฎุฏูุฉ", 
                "ุฅูู": "ุงูุนุงูู",
                "ุงููุงููู": "ุงููุงุฏุฉ 77"
            },
            "ุชูุฏูู ุทูุจ ุงูุตูุญ": {
                "ุงููููุฉ": "15 ูููุงู",
                "ูู": "ุชุงุฑูุฎ ุชูุฏูู ุงูุดููู",
                "ุฅูู": "ูุฏูุฑูุฉ ุงูุนูู", 
                "ุงููุงููู": "ูุธุงู ุงูุชุณููุฉ"
            }
        }
        
        for deadline, details in legal_deadlines.items():
            with st.expander(f"โ๏ธ {deadline}"):
                col1, col2 = st.columns(2)
                with col1:
                    st.write(f"**ุงููููุฉ:** {details['ุงููููุฉ']}")
                    st.write(f"**ูู:** {details['ูู']}")
                with col2:
                    st.write(f"**ุฅูู:** {details['ุฅูู']}")
                    st.write(f"**ุงูุฃุณุงุณ ุงููุงูููู:** {details['ุงููุงููู']}")
                
                # ุฅุถุงูุฉ ุชุฐููุฑ ุชููุงุฆู
                if st.button(f"โ ุฃุถู ุชุฐููุฑ ูู {deadline}", key=f"auto_{deadline}"):
                    st.info("ุณูุชู ุฅุถุงูุฉ ุชุฐููุฑ ุชููุงุฆู ููุฐุง ุงูููุนุฏ")
    
    with reminder_tabs[3]:
        st.markdown("#### ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช ูุงูุฅุฎุทุงุฑุงุช")
        
        notification_settings = {
            "ุงูุฅุดุนุงุฑุงุช ุงูุจุฑูุฏูุฉ": st.checkbox("ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุจุฑูุฏูุฉ", value=True),
            "ุงูุชุฐููุฑุงุช ุงูููููุฉ": st.checkbox("ุชุฐููุฑุงุช ููููุฉ", value=True),
            "ุชูุจููุงุช ุงูุทูุงุฑุฆ": st.checkbox("ุชูุจููุงุช ุงูููุงุนูุฏ ุงูุนุงุฌูุฉ", value=True),
            "ุชูุฑูุฑ ุฃุณุจูุนู": st.checkbox("ุชูุฑูุฑ ุฃุณุจูุนู ุจุงูููุงุนูุฏ", value=False)
        }
        
        st.markdown("##### ๐ง ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู")
        email = st.text_input("ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฅุดุนุงุฑุงุช", placeholder="example@email.com")
        
        if st.button("๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช"):
            st.success("ุชู ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ุจูุฌุงุญ")
    
    with reminder_tabs[4]:
        st.markdown("#### ๐ ุฅุญุตุงุฆูุงุช ุงููุชุงุจุนุฉ")
        
        if 'reminders' in st.session_state:
            reminders = st.session_state.reminders
            total = len(reminders)
            completed = len([r for r in reminders if r['status'] == 'ููุชูู'])
            active = len([r for r in reminders if r['status'] == 'ูุดุท'])
            overdue = len([r for r in reminders if datetime.combine(r['due_date'], r['due_time']) < datetime.now() and r['status'] == 'ูุดุท'])
            
            col1, col2, col3, col4 = st.columns(4)
            with col1:
                st.metric("ุฅุฌูุงูู ุงูุชุฐููุฑุงุช", total)
            with col2:
                st.metric("ุงูููุชููุฉ", completed, f"{completed/total*100:.0f}%" if total > 0 else "0%")
            with col3:
                st.metric("ุงููุดุทุฉ", active)
            with col4:
                st.metric("ุงููุชุฃุฎุฑุฉ", overdue, delta_color="inverse")
            
            # ูุฎุทุท ุชูุฒูุน ุงูุฃููููุงุช
            if total > 0:
                priorities = {}
                for reminder in reminders:
                    priorities[reminder['priority']] = priorities.get(reminder['priority'], 0) + 1
                
                st.markdown("##### ๐ ุชูุฒูุน ุงูุชุฐููุฑุงุช ุญุณุจ ุงูุฃููููุฉ")
                priority_df = pd.DataFrame({
                    'ุงูุฃููููุฉ': list(priorities.keys()),
                    'ุงูุนุฏุฏ': list(priorities.values())
                })
                st.bar_chart(priority_df.set_index('ุงูุฃููููุฉ'))
# ==========================
# ๐งญ ุงูุชูููุฐ ุงูุฑุฆูุณู ููุชุทุจูู
# ==========================
if __name__ == "__main__":
    main()