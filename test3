import streamlit as st
import pandas as pd
from datetime import datetime
import json

# ==========================
# ๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุงููุญุณูุฉ
# ==========================
def main():
    st.set_page_config(
        page_title="ุงูููุตุฉ ุงููุงููููุฉ ุงูุดุงููุฉ - ูุงููู ุงูุนูู ุงูุฃุฑุฏูู",
        page_icon="โ๏ธ",
        layout="wide",
        initial_sidebar_state="expanded"
    )
    
    # ุฅุถุงูุฉ CSS ูุฎุตุต
    st.markdown("""
    <style>
    .main-header {
        font-size: 2.5rem;
        color: #1f77b4;
        text-align: center;
        margin-bottom: 2rem;
    }
    .feature-card {
        background: #f0f2f6;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 1rem 0;
        border-left: 4px solid #1f77b4;
    }
    </style>
    """, unsafe_allow_html=True)
    
    # ุงูุดุฑูุท ุงูุฌุงูุจู
    with st.sidebar:
        st.image("https://via.placeholder.com/150x50?text=Law+Platform", width=150)
        st.title("โ๏ธ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ")
        
        menu_options = {
            "๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ": main_page,
            "๐ ุงูุฏุฑุงุณุงุช ูุงูุฃุจุญุงุซ": show_research_studies,
            "๐ ุงูุจุญุซ ุงููุชูุฏู": show_advanced_search,
            "๐๏ธ ุฃุฏูุงุช ุงูุจุงุญุซ": show_research_tools,
            "๐ ุงููุฑุงุฌุน ูุงููุตุงุฏุฑ": show_references_sources,
            "๐ ุงูููุงุฑูุงุช ุงูุฏูููุฉ": show_international_comparisons,
            "๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ": show_calculators_section,
            "๐ ูุญุงูู ุงูุดูุงูู": show_complaint_simulator,
            "๐๏ธ ุงูุฌูุงุช ุงููุฎุชุตุฉ": show_authorities_section,
            "๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู": show_rights_map,
            "โฐ ููุจู ุงูููุงุนูุฏ": show_reminder_system
        }
        
        selected_menu = st.selectbox("ุงุฎุชุฑ ุงููุณู", list(menu_options.keys()))
        
        if st.button("๐ ุชุญุฏูุซ ุงูุจูุงูุงุช"):
            st.rerun()
    
    # ุนุฑุถ ุงููุณู ุงููุญุฏุฏ
    if selected_menu in menu_options:
        menu_options[selected_menu]()

# ==========================
# ๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
# ==========================
def main_page():
    st.markdown('<h1 class="main-header">โ๏ธ ุงูููุตุฉ ุงููุงููููุฉ ุงูุดุงููุฉ - ูุงููู ุงูุนูู ุงูุฃุฑุฏูู 2025</h1>', unsafe_allow_html=True)
    
    # ุจุทุงูุงุช ุงูุฎุฏูุงุช
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.markdown("""
        <div class="feature-card">
            <h3>๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ</h3>
            <p>ุญุงุณุจุงุช ุฐููุฉ ูุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช ุงููุงููููุฉ ุจุฏูุฉ</p>
        </div>
        """, unsafe_allow_html=True)
        
    with col2:
        st.markdown("""
        <div class="feature-card">
            <h3>๐ ูุญุงูู ุงูุดูุงูู</h3>
            <p>ุชุญููู ูุดููุงุช ุงูุนูู ูุชูุฏูู ุญููู ูุฎุตุตุฉ</p>
        </div>
        """, unsafe_allow_html=True)
        
    with col3:
        st.markdown("""
        <div class="feature-card">
            <h3>๐ ุงูุฏุฑุงุณุงุช ูุงูุฃุจุญุงุซ</h3>
            <p>ุฃุญุฏุซ ุงูุฏุฑุงุณุงุช ูุงูุจุญูุซ ูู ูุงููู ุงูุนูู</p>
        </div>
        """, unsafe_allow_html=True)
    
    # ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
    st.markdown("## ๐ ูุธุฑุฉ ุณุฑูุนุฉ")
    col1, col2, col3, col4 = st.columns(4)
    
    with col1:
        st.metric("ุงูุชุดุฑูุนุงุช ุงููุดุทุฉ", "156", "12 ุฌุฏูุฏ")
    with col2:
        st.metric("ุงููุถุงูุง ุงูููุชููุฉ", "2,458", "8%")
    with col3:
        st.metric("ุงูุฏุฑุงุณุงุช ุงูููุดูุฑุฉ", "89", "3 ุฌุฏูุฏ")
    with col4:
        st.metric("ุงููุณุชููุฏูู", "15,236", "124 ุฌุฏูุฏ")

# ==========================
# ๐ ุงูุฏุฑุงุณุงุช ูุงูุฃุจุญุงุซ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_research_studies():
    st.markdown("#### ๐ ุงูููุตุฉ ุงูุจุญุซูุฉ ุงููุชูุงููุฉ")

    # ุชุตููู ูุชูุฏู ููุฏุฑุงุณุงุช
    research_categories = {
        "๐ ุงูุฏุฑุงุณุงุช ุงููููุฉ ูุงูุฅุญุตุงุฆูุฉ": {
            "description": "ุฏุฑุงุณุงุช ุชุนุชูุฏ ุนูู ุงูุชุญููู ุงูุฅุญุตุงุฆู ูุงูุจูุงูุงุช ุงูุฑูููุฉ",
            "studies": [
                {
                    "title": "ุชุญููู ุฃุซุฑ ุชุนุฏููุงุช ูุงููู ุงูุนูู 2024 ุนูู ูุคุดุฑุงุช ุณูู ุงูุนูู",
                    "author": "ุฏ. ูุญูุฏ ุฃุญูุฏ - ูุฑูุฒ ุงูุฏุฑุงุณุงุช ุงูุงูุชุตุงุฏูุฉ",
                    "year": "2024",
                    "methodology": "ุชุญููู ุงูุญุฏุงุฑ ูุจูุงูุงุช 1000 ููุดุฃุฉ ุฎูุงู 5 ุณููุงุช",
                    "findings": "ุชุญุณู ูู ูุคุดุฑุงุช ุงูุงุณุชูุฑุงุฑ ุงููุธููู ุจูุณุจุฉ 18%ุ ุงูุฎูุงุถ ูู ูุนุฏู ุฏูุฑุงู ุงูุนูุงูุฉ ุจูุณุจุฉ 12%",
                    "data_sources": ["ูุณุญ ุงูููู ุงูุนุงููุฉ", "ุจูุงูุงุช ูุฒุงุฑุฉ ุงูุนูู", "ุชูุงุฑูุฑ ุงูููุดุขุช"],
                    "statistical_tools": ["SPSS", "Stata", "ุชุญููู ุงูุงูุญุฏุงุฑ ุงููุชุนุฏุฏ"],
                    "sample_size": "1000 ููุดุฃุฉุ 5000 ุนุงูู",
                    "confidence_level": "95%",
                    "limitations": "ุนุฏู ุดููู ุงููุทุงุน ุบูุฑ ุงูููุธูุ ุชุญูุฒ ูู ุงูุฅุจูุงุบ ุงูุฐุงุชู"
                }
            ]
        },
        "๐ ุงูุฏุฑุงุณุงุช ุงูููุนูุฉ": {
            "description": "ุฏุฑุงุณุงุช ุชุนุชูุฏ ุนูู ุงูููุงุจูุงุช ูุงูููุงุญุธุฉ ูุงูุชุญููู ุงูููุนู",
            "studies": [
                {
                    "title": "ุชูููู ูุนุงููุฉ ุขููุงุช ุชุณููุฉ ููุงุฒุนุงุช ุงูุนูู ูู ุงูุฃุฑุฏู",
                    "author": "ุฏ. ุณุงุฑุฉ ุงูุฎูุงูุฏุฉ - ุงูุฌุงูุนุฉ ุงูุฃุฑุฏููุฉ",
                    "year": "2023",
                    "methodology": "ููุงุจูุงุช ูุนููุฉ ูุน 50 ุฎุจูุฑุงู ููุงุถูุงู ููุญุงููุงู",
                    "findings": "ููุงุกุฉ ูุธุงู ุงููุณุงุทุฉ ุจูุณุจุฉ 68%ุ ุญุงุฌุฉ ูุชุญุณูู ูุธุงู ุงูุชุญููู",
                    "data_sources": ["ููุงุจูุงุช ูุนููุฉ", "ุชุญููู ูุซุงุฆู", "ููุงุญุธุฉ ูุดุงุฑูุฉ"],
                    "analysis_method": "ุงูุชุญููู ุงูููุถูุนูุ ุชุญููู ุงููุญุชูู",
                    "sample_characteristics": "ุฎุจุฑุงุกุ ูุถุงุฉุ ูุญุงูููุ ุฃุทุฑุงู ููุงุฒุนุงุช",
                    "validity": "ุตุฏู ุงููุญุชููุ ุตุฏู ุงูุจูุงุก",
                    "limitations": "ุตุนูุจุฉ ุงููุตูู ูุจุนุถ ุงููุจุญูุซูู"
                }
            ]
        },
        "๐ ุงูุฏุฑุงุณุงุช ุงูููุงุฑูุฉ": {
            "description": "ุฏุฑุงุณุงุช ุชูุงุฑู ุงูุชุดุฑูุน ุงูุฃุฑุฏูู ูุน ุชุฌุงุฑุจ ุฏูููุฉ",
            "studies": [
                {
                    "title": "ุชุดุฑูุนุงุช ุงูุนูู ุงููุฑู: ููุงุฑูุฉ ุจูู ุงูุฃุฑุฏู ูุงูุฅูุงุฑุงุช ููุงููุฒูุง",
                    "author": "ุฏ. ุฎุงูุฏ ุฃุจู ุฑูุงู - ูุฑูุฒ ุงูุฏุฑุงุณุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ",
                    "year": "2024",
                    "methodology": "ุงููููุฌ ุงูููุงุฑู ูุชุญููู ุงูุณูุงุณุงุช",
                    "findings": "ุชููู ุงููููุฐุฌ ุงูุฅูุงุฑุงุชู ูู ุชูุธูู ุงูุนูู ุนู ุจุนุฏุ ุญุงุฌุฉ ุงูุฃุฑุฏู ูุชุทููุฑ ุขููุงุช ุงูุญูุงูุฉ",
                    "comparison_countries": ["ุงูุฃุฑุฏู", "ุงูุฅูุงุฑุงุช", "ูุงููุฒูุง", "ุชุฑููุง"],
                    "comparison_criteria": ["ุงูุญูุงูุฉ ุงูุงุฌุชูุงุนูุฉ", "ุงููุฑููุฉ", "ุงูุฅูุชุงุฌูุฉ", "ุงูุชูููุฉ"],
                    "policy_recommendations": "ุงุนุชูุงุฏ ูุธุงู ุชุฃูููู ุฎุงุตุ ุชุทููุฑ ุขููุงุช ุงูุฑูุงุจุฉ",
                    "impact_assessment": "ุชุญุณูู ุชูุงูุณูุฉ ุณูู ุงูุนููุ ุฌุฐุจ ุงูุงุณุชุซูุงุฑุงุช"
                }
            ]
        }
    }

    for category, info in research_categories.items():
        with st.expander(f"{category} - {info['description']}"):
            for study in info['studies']:
                with st.expander(f"๐ {study['title']}"):
                    col1, col2 = st.columns(2)

                    with col1:
                        st.write(f"**ุงูุจุงุญุซ:** {study['author']}")
                        st.write(f"**ุณูุฉ ุงููุดุฑ:** {study['year']}")
                        st.write(f"**ุงููููุฌูุฉ:** {study['methodology']}")
                        st.write(f"**ูุตุงุฏุฑ ุงูุจูุงูุงุช:** {', '.join(study['data_sources'])}")

                    with col2:
                        if 'statistical_tools' in study:
                            st.write(f"**ุงูุฃุฏูุงุช ุงูุฅุญุตุงุฆูุฉ:** {', '.join(study['statistical_tools'])}")
                        if 'sample_size' in study:
                            st.write(f"**ุญุฌู ุงูุนููุฉ:** {study['sample_size']}")
                        if 'confidence_level' in study:
                            st.write(f"**ูุณุชูู ุงูุซูุฉ:** {study['confidence_level']}")
                        if 'limitations' in study:
                            st.write(f"**ุงููุญุฏุฏุงุช:** {study['limitations']}")

                    st.write(f"**ุงููุชุงุฆุฌ ุงูุฑุฆูุณูุฉ:** {study['findings']}")

                    # ุฑูุงุจุท ููุตุงุฏุฑ ุฅุถุงููุฉ
                    col1, col2, col3 = st.columns(3)
                    with col1:
                        if st.button("๐ ุงููุต ุงููุงูู", key=f"full_{study['title']}"):
                            st.success("ุฌุงุฑู ุชุญููู ุงูุฏุฑุงุณุฉ ุงููุงููุฉ...")
                    with col2:
                        if st.button("๐ ุงููุฑุงุฌุน", key=f"refs_{study['title']}"):
                            st.info("ุนุฑุถ ูุงุฆูุฉ ุงููุฑุงุฌุน ุงููุงููุฉ...")
                    with col3:
                        if st.button("๐ฏ ุงูุชุทุจููุงุช", key=f"apps_{study['title']}"):
                            st.warning("ุนุฑุถ ุงูุชุทุจููุงุช ุงูุนูููุฉ ููุฏุฑุงุณุฉ...")

# ==========================
# ๐ ุงูุจุญุซ ุงููุชูุฏู ุงูููุณุน (ูุญุณูุฉ)
# ==========================
def show_advanced_search():
    st.markdown("#### ๐ ุงูููุตุฉ ุงููุชูุฏูุฉ ููุจุญุซ ุงูุนููู")

    # ุงูุจุญุซ ุงูุฏูุงูู ุงููุชูุฏู
    st.markdown("#### ๐ง ุงูุจุญุซ ุงูุฏูุงูู ูุงูููุงูููู")

    semantic_search = st.text_area(
        "ุงุฏุฎู ูููููู ุงูุจุญุซู ุฃู ูุฑุถูุชู",
        placeholder="ูุซุงู: ุฃุซุฑ ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ ุนูู ูุนุฏูุงุช ุงูููุฑ ูุงูุนูุงูุฉ ุบูุฑ ุงูุฑุณููุฉ ูู ุงููุทุงุน ุงูุฎุงุต ุงูุฃุฑุฏูู...",
        height=100
    )

    if st.button("๐งฉ ุจุญุซ ุฏูุงูู", key="semantic_search"):
        if semantic_search:
            # ูุญุงูุงุฉ ุงูุจุญุซ ุงูุฏูุงูู
            semantic_results = [
                {
                    "concept": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ",
                    "related_studies": ["ุฏุฑุงุณุฉ ุงูุฃุซุฑ ุงูุงูุชุตุงุฏู 2023", "ุชุญููู ุงูููุฑ 2022", "ุชูููู ุงูุณูุงุณุงุช 2024"],
                    "legal_provisions": ["ุงููุงุฏุฉ 35", "ูุธุงู ุงูุฃุฌูุฑ 2020", "ูุฑุงุฑุงุช ูุฌูุณ ุงููุฒุฑุงุก"],
                    "jurisprudence": ["ุชูููุฒ ุนูู 85/2019", "ุชูููุฒ ุนูู 150/2021", "ูุญููุฉ ุงุณุชุฆูุงู 2023"],
                    "statistical_data": ["ูุนุฏูุงุช ุงูุชูุธูู", "ุงูุฏุฎู ุงููุฑุฏู", "ุงูููุฑ ุงููุณุจู"],
                    "international_experiences": ["ุชุฌุฑุจุฉ ูุงููุฒูุง", "ูููุฐุฌ ุชุฑููุง", "ุณูุงุณุงุช ุงูุฎููุฌ"]
                }
            ]

            st.success("## ๐ง ูุชุงุฆุฌ ุงูุจุญุซ ุงูุฏูุงูู")

            for result in semantic_results:
                with st.expander(f"๐ ุงูููููู: {result['concept']}"):
                    col1, col2 = st.columns(2)

                    with col1:
                        st.write("**ุงูุฏุฑุงุณุงุช ุฐุงุช ุงูุตูุฉ:**")
                        for study in result['related_studies']:
                            st.write(f"โข {study}")

                        st.write("**ุงููุตูุต ุงูุชุดุฑูุนูุฉ:**")
                        for provision in result['legal_provisions']:
                            st.write(f"โข {provision}")

                    with col2:
                        st.write("**ุงูุณูุงุจู ุงููุถุงุฆูุฉ:**")
                        for case in result['jurisprudence']:
                            st.write(f"โข {case}")

                        st.write("**ุงูุจูุงูุงุช ุงูุฅุญุตุงุฆูุฉ:**")
                        for data in result['statistical_data']:
                            st.write(f"โข {data}")

    # ููุงุชุฑ ุงูุจุญุซ ุงููุชูุฏูุฉ
    st.markdown("#### ๐ฏ ููุงุชุฑ ุงูุจุญุซ ุงููุชูุฏูุฉ")

    col1, col2, col3 = st.columns(3)

    with col1:
        document_type = st.multiselect(
            "ููุน ุงููุซููุฉ",
            ["ุชุดุฑูุนุงุช", "ุณูุงุจู ูุถุงุฆูุฉ", "ุฏุฑุงุณุงุช ุฃูุงุฏูููุฉ", "ุชูุงุฑูุฑ ุฑุณููุฉ", "ููุงูุงุช"]
        )

        time_period = st.slider(
            "ุงููุชุฑุฉ ุงูุฒูููุฉ",
            1996, 2025, (2010, 2025)
        )

    with col2:
        research_methodology = st.multiselect(
            "ุงููููุฌูุฉ ุงูุจุญุซูุฉ",
            ["ููู", "ููุนู", "ููุงุฑู", "ุชุญูููู", "ุชุทุจููู"]
        )

        geographic_scope = st.selectbox(
            "ุงููุทุงู ุงูุฌุบุฑุงูู",
            ["ุงูุฃุฑุฏู", "ุฏูู ุนุฑุจูุฉ", "ุฏูููุฉ", "ููุงุฑู"]
        )

    with col3:
        legal_topic = st.multiselect(
            "ุงููุฌุงู ุงููุงูููู",
            ["ุนููุฏ ุงูุนูู", "ุงูุฃุฌูุฑ", "ุงูุณูุงูุฉ", "ุฅููุงุก ุงูุฎุฏูุฉ", "ุงูุชุฃูููุงุช"]
        )

        citation_count = st.slider(
            "ุญุฏ ุฃุฏูู ููุงุณุชุดูุงุฏุงุช",
            0, 100, 10
        )

    if st.button("๐ ุชุทุจูู ุงูููุงุชุฑ ูุงูุจุญุซ", key="advanced_filter_search"):
        st.success(f"ุฌุงุฑู ุงูุจุญุซ ูู {len(document_type)} ุฃููุงุน ูุซุงุฆู ุฎูุงู ุงููุชุฑุฉ {time_period[0]}-{time_period[1]}")

# ==========================
# ๐๏ธ ุฃุฏูุงุช ุงูุจุงุญุซ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_research_tools():
    st.markdown("#### ๐๏ธ ูุฌููุนุฉ ุงูุฃุฏูุงุช ุงูุจุญุซูุฉ ุงููุชูุงููุฉ")

    tool_tabs = st.tabs([
        "๐ ุฃุฏุงุฉ ุงูุงูุชุจุงุณ", 
        "๐ ููุงุฑูุฉ ุงูุชุดุฑูุนุงุช", 
        "๐ ูุญูู ุงููุตูุต",
        "๐พ ุฅุฏุงุฑุฉ ุงูููุชุจุฉ"
    ])

    with tool_tabs[0]:
        st.markdown("#### ๐ ุงูููุตุฉ ุงููุชูุงููุฉ ููุงูุชุจุงุณ ูุงูุชูุซูู")

        # ุฃูุธูุฉ ุงูุงูุชุจุงุณ ุงููุชุนุฏุฏุฉ
        citation_systems = {
            "APA": "ูุธุงู ุงูุฌูุนูุฉ ุงูุฃูุฑูููุฉ ูุนูู ุงูููุณ",
            "MLA": "ูุธุงู ุฌูุนูุฉ ุงููุบุงุช ุงูุญุฏูุซุฉ", 
            "Chicago": "ูุธุงู ุดููุงุบู",
            "Harvard": "ูุธุงู ูุงุฑูุงุฑุฏ",
            "OSCOLA": "ูุธุงู ุฃูุณููุฑุฏ ููุงูุชุจุงุณ ุงููุงูููู"
        }

        selected_system = st.selectbox("ุงุฎุชุฑ ูุธุงู ุงูุงูุชุจุงุณ", list(citation_systems.keys()))
        st.info(f"ุงููุธุงู ุงููุฎุชุงุฑ: {citation_systems[selected_system]}")

        # ูููุฐุฌ ูุชูุฏู ูุฅุฏุฎุงู ุงูุจูุงูุงุช
        col1, col2 = st.columns(2)

        with col1:
            doc_category = st.selectbox("ููุน ุงููุตุฏุฑ", [
                "ูุงููู ุฃู ุชุดุฑูุน",
                "ุญูู ูุถุงุฆู", 
                "ูุชุงุจ",
                "ููุงู ูุฌูุฉ", 
                "ุฑุณุงูุฉ ุนูููุฉ",
                "ุชูุฑูุฑ",
                "ูููุน ุฅููุชุฑููู"
            ])

            authors = st.text_area("ุงููุคูููู/ุงูุฌูุงุช (ุณุทุฑ ููู ูุคูู)")
            title = st.text_input("ุงูุนููุงู ุงููุงูู")
            year = st.number_input("ุณูุฉ ุงููุดุฑ", min_value=1900, max_value=2025, value=2024)

        with col2:
            publisher = st.text_input("ุงููุงุดุฑ/ุงูุฌูุฉ ุงููุงุดุฑุฉ")
            place = st.text_input("ููุงู ุงููุดุฑ")
            url = st.text_input("ุฑุงุจุท ุงููุตุฏุฑ (ูููุตุงุฏุฑ ุงูุฅููุชุฑูููุฉ)")
            accessed_date = st.date_input("ุชุงุฑูุฎ ุงููุตูู (ูููุตุงุฏุฑ ุงูุฅููุชุฑูููุฉ)")

        if st.button("๐๏ธ ุชูููุฏ ุงูุงูุชุจุงุณ", key="generate_advanced_citation"):
            citation = generate_advanced_citation(
                doc_category, authors, title, year, publisher, place,
                url, accessed_date, selected_system
            )

            st.success("#### ๐ ุงูุงูุชุจุงุณ ุงูุฌุงูุฒ")
            st.text_area("ุงูุงูุชุจุงุณ ุงูููุณู", citation, height=150)

            # ุฎูุงุฑุงุช ุฅุถุงููุฉ
            col1, col2, col3 = st.columns(3)
            with col1:
                st.download_button("๐ฅ ุชุญููู ุงูุงูุชุจุงุณ", data=citation, file_name="citation.txt")
            with col2:
                if st.button("๐ ูุณุฎ ููุญุงูุธุฉ"):
                    st.success("ุชู ุงููุณุฎ ููุญุงูุธุฉ")
            with col3:
                if st.button("๐ฏ ุฅุถุงูุฉ ููููุชุจุฉ"):
                    st.info("ุชูุช ุงูุฅุถุงูุฉ ููููุชุจุฉ ุงูุดุฎุตูุฉ")

    with tool_tabs[1]:
        st.markdown("#### ๐ ุฃุฏุงุฉ ุงูููุงุฑูุฉ ุงูุชุดุฑูุนูุฉ ุงููุชูุฏูุฉ")

        col1, col2 = st.columns(2)

        with col1:
            st.subheader("ุงููุต ุงูุฃูู")
            text1_category = st.selectbox("ุชุตููู ุงููุต ุงูุฃูู", ["ุชุดุฑูุน ุฃุฑุฏูู", "ุชุดุฑูุน ููุงุฑู", "ูุดุฑูุน ูุงููู"])
            text1_content = st.text_area("ุงููุต ุงูุฃูู", height=200)

        with col2:
            st.subheader("ุงููุต ุงูุซุงูู") 
            text2_category = st.selectbox("ุชุตููู ุงููุต ุงูุซุงูู", ["ุชุดุฑูุน ุฃุฑุฏูู", "ุชุดุฑูุน ููุงุฑู", "ูุดุฑูุน ูุงููู"])
            text2_content = st.text_area("ุงููุต ุงูุซุงูู", height=200)

        if st.button("๐ ุฅุฌุฑุงุก ุงูููุงุฑูุฉ", key="compare_texts"):
            # ูุญุงูุงุฉ ุงูููุงุฑูุฉ
            comparison_results = {
                "ุงูุชุดุงุจู": "75%",
                "ุงูุงุฎุชูุงูุงุช ุงูุฑุฆูุณูุฉ": [
                    "ุงุฎุชูุงู ูู ุชุนุฑูู ุงูุนุงูู",
                    "ุชูุงูุช ูู ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", 
                    "ุชุจุงูู ูู ุดุฑูุท ุฅููุงุก ุงูุฎุฏูุฉ"
                ],
                "ุงูุชูุตูุงุช": [
                    "ุชูุญูุฏ ุงูุชุนุฑููุงุช",
                    "ูุฑุงุนุงุฉ ุงููุนุงููุฑ ุงูุฏูููุฉ",
                    "ุชุญุณูู ุขููุงุช ุงูุญูุงูุฉ"
                ]
            }

            st.success("## ๐ ูุชุงุฆุฌ ุงูููุงุฑูุฉ")

            col1, col2 = st.columns(2)
            with col1:
                st.metric("ูุณุจุฉ ุงูุชุดุงุจู", comparison_results["ุงูุชุดุงุจู"])
                st.write("**ุงูุงุฎุชูุงูุงุช ุงูุฑุฆูุณูุฉ:**")
                for diff in comparison_results["ุงูุงุฎุชูุงูุงุช ุงูุฑุฆูุณูุฉ"]:
                    st.write(f"โข {diff}")
            with col2:
                st.write("**ุงูุชูุตูุงุช:**")
                for rec in comparison_results["ุงูุชูุตูุงุช"]:
                    st.write(f"๐ฏ {rec}")

# ==========================
# ๐ ุงููุฑุงุฌุน ูุงููุตุงุฏุฑ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_references_sources():
    st.markdown("#### ๐ ุงูููุณูุนุฉ ุงููุฑุฌุนูุฉ ุงูุดุงููุฉ")

    ref_tabs = st.tabs(["ุงููุตุงุฏุฑ ุงูุฑุณููุฉ", "ุงููุตุงุฏุฑ ุงูุฃูุงุฏูููุฉ", "ููุงุนุฏ ุงูุจูุงูุงุช", "ุงูุฏูุฑูุงุช"])

    with ref_tabs[0]:
        st.markdown("##### ๐ ุงููุฑุงุฌุน ุงูุชุดุฑูุนูุฉ ุงูุฑุณููุฉ")

        official_sources = [
            {
                "title": "ูุฌููุนุฉ ุงูููุงููู ุงูุฃุฑุฏููุฉ - ูุฒุงุฑุฉ ุงูุนุฏู",
                "type": "ุณูุณูุฉ ุชุดุฑูุนูุฉ",
                "years": "1996-2025",
                "access": "ูุชุงุญุฉ ูู ุงูููุชุจุฉ ุงููุทููุฉ",
                "importance": "โญโญโญโญโญ",
                "description": "ุงููุตุฏุฑ ุงูุฑุณูู ููุชุดุฑูุนุงุช ุงูุฃุฑุฏููุฉ"
            },
            {
                "title": "ุงูุฌุฑูุฏุฉ ุงูุฑุณููุฉ ุงูุฃุฑุฏููุฉ",
                "type": "ูุดุฑุฉ ุฑุณููุฉ", 
                "years": "1996-2025",
                "access": "ุฅููุชุฑููู ููุทุจูุน",
                "importance": "โญโญโญโญโญ",
                "description": "ุงููุดุฑ ุงูุฑุณูู ููููุงููู ูุงูุฃูุธูุฉ"
            },
            {
                "title": "ุชูุงุฑูุฑ ูุฒุงุฑุฉ ุงูุนูู ุงูุณูููุฉ",
                "type": "ุชูุงุฑูุฑ ุฑุณููุฉ",
                "years": "2000-2024", 
                "access": "ูููุน ุงููุฒุงุฑุฉ ุงูุฅููุชุฑููู",
                "importance": "โญโญโญโญ",
                "description": "ุจูุงูุงุช ูุฅุญุตุงุฆูุงุช ุฑุณููุฉ ุนู ุณูู ุงูุนูู"
            }
        ]

        for source in official_sources:
            with st.expander(f"๐ {source['title']} ({source['importance']})"):
                col1, col2 = st.columns(2)
                with col1:
                    st.write(f"**ุงูููุน:** {source['type']}")
                    st.write(f"**ุงููุชุฑุฉ:** {source['years']}")
                    st.write(f"**ุทุฑููุฉ ุงููุตูู:** {source['access']}")
                with col2:
                    st.write(f"**ุงูุฃูููุฉ:** {source['importance']}")
                    st.write(f"**ุงููุตู:** {source['description']}")

                if st.button(f"๐ ุงูุงูุชูุงู ูููุตุฏุฑ", key=f"goto_{source['title']}"):
                    st.info("ุฌุงุฑู ุงูุชูุฌูู ูููุตุฏุฑ ุงูุฑุณูู...")

    with ref_tabs[1]:
        st.markdown("##### ๐ ุงููุตุงุฏุฑ ุงูุฃูุงุฏูููุฉ ูุงูุจุญุซูุฉ")

        academic_sources = [
            {
                "title": "ุงููุฌูุฉ ุงูุฃุฑุฏููุฉ ูููุงููู",
                "publisher": "ุงูุฌุงูุนุฉ ุงูุฃุฑุฏููุฉ",
                "frequency": "ุฑุจุน ุณูููุฉ",
                "impact": "ูุฑูููุฉ",
                "topics": ["ูุงููู ุงูุนูู", "ุงูุชุดุฑูุนุงุช", "ุงูุชุญููู ุงููุถุงุฆู"]
            },
            {
                "title": "ุฃุจุญุงุซ ูููุฉ ุงูุญููู - ุฌุงูุนุฉ ุงููุฑููู",
                "publisher": "ุฌุงูุนุฉ ุงููุฑููู", 
                "frequency": "ุณูููุฉ",
                "impact": "ูุชูุณุทุฉ",
                "topics": ["ุงูุฏุฑุงุณุงุช ุงูููุงุฑูุฉ", "ุชุญููู ุงูุณูุงุณุงุช", "ุงูุชุดุฑูุนุงุช"]
            }
        ]

        for source in academic_sources:
            with st.expander(f"๐ {source['title']}"):
                st.write(f"**ุงููุงุดุฑ:** {source['publisher']}")
                st.write(f"**ุงูุชูุฑุงุฑ:** {source['frequency']}")
                st.write(f"**ุงูุชุฃุซูุฑ:** {source['impact']}")
                st.write(f"**ุงููุฌุงูุงุช:** {', '.join(source['topics'])}")

# ==========================
# ๐ ุงูููุงุฑูุงุช ุงูุฏูููุฉ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_international_comparisons():
    st.markdown("#### ๐ ุงูููุงุฑูุงุช ุงูุชุดุฑูุนูุฉ ุงูุฏูููุฉ")

    comp_tabs = st.tabs(["ููุงุฑูุงุช ุชูุงุนููุฉ", "ุชุญููู ุงูุณูุงุณุงุช", "ุฃูุถู ุงูููุงุฑุณุงุช", "ุงูุชูุงุฑูุฑ ุงูุฏูููุฉ"])

    with comp_tabs[0]:
        st.markdown("##### ๐ ุฃุฏุงุฉ ุงูููุงุฑูุฉ ุงูุชุดุฑูุนูุฉ ุงูุฏูููุฉ ุงูุชูุงุนููุฉ")

        col1, col2, col3 = st.columns(3)

        with col1:
            country1 = st.selectbox("ุงูุฏููุฉ ุงูุฃููู", [
                "ุงูุฃุฑุฏู", "ูุตุฑ", "ุงูุณุนูุฏูุฉ", "ุงูุฅูุงุฑุงุช", "ุชุฑููุง", "ูุงููุฒูุง", "ุณูุบุงููุฑุฉ", "ููุฑูุง ุงูุฌููุจูุฉ"
            ], key="country1")

        with col2:
            country2 = st.selectbox("ุงูุฏููุฉ ุงูุซุงููุฉ", [
                "ุงูุฃุฑุฏู", "ูุตุฑ", "ุงูุณุนูุฏูุฉ", "ุงูุฅูุงุฑุงุช", "ุชุฑููุง", "ูุงููุฒูุง", "ุณูุบุงููุฑุฉ", "ููุฑูุง ุงูุฌููุจูุฉ"
            ], key="country2")

        with col3:
            comparison_field = st.selectbox("ูุฌุงู ุงูููุงุฑูุฉ", [
                "ูุธุงู ุนููุฏ ุงูุนูู",
                "ุงูุญูุงูุฉ ูู ุงููุตู ุงูุชุนุณูู",
                "ูุธุงู ุงูุฃุฌูุฑ ูุงูุจุฏูุงุช",
                "ุงูุฅุฌุงุฒุงุช ูุงูุฑุนุงูุฉ ุงูุงุฌุชูุงุนูุฉ",
                "ุงูุตุญุฉ ูุงูุณูุงูุฉ ุงูููููุฉ",
                "ุงูุชุฃูููุงุช ุงูุงุฌุชูุงุนูุฉ",
                "ุชุณููุฉ ุงูููุงุฒุนุงุช ุงูุนูุงููุฉ",
                "ุงูุนูู ุงูููุงุจู ูุงูุญุฑูุงุช ุงูููุงุจูุฉ"
            ])

        if st.button("๐ ุฅุฌุฑุงุก ููุงุฑูุฉ ุชูุงุนููุฉ", key="interactive_comparison"):
            comparison_result = generate_interactive_comparison(country1, country2, comparison_field)

            st.success(f"## ๐ ููุงุฑูุฉ ุจูู {country1} ู {country2} ูู {comparison_field}")

            # ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฌุฏูู ููุงุฑู
            comparison_data = {
                "ุงููุนูุงุฑ": ["ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", "ุณุงุนุงุช ุงูุนูู ุงูุฃุณุจูุนูุฉ", "ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "ุฅุฌุงุฒุฉ ุงูุฃูููุฉ", "ูุชุฑุฉ ุงูุฅุฎุทุงุฑ"],
                country1: ["290 ุฏููุงุฑ", "48 ุณุงุนุฉ", "21 ููู", "10 ุฃุณุงุจูุน", "1 ุฃุณุจูุน/ุณูุฉ"],
                country2: ["320 ุฏููุงุฑ", "45 ุณุงุนุฉ", "25 ููู", "12 ุฃุณุจูุน", "2 ุฃุณุจูุน/ุณูุฉ"]
            }

            comp_df = pd.DataFrame(comparison_data)
            st.dataframe(comp_df, use_container_width=True)

            # ุชุญููู ุงููุชุงุฆุฌ
            st.markdown("##### ๐ ุชุญููู ุงููุฑููุงุช ูุงูุชูุตูุงุช")

            analysis_points = [
                f"**ููุฒุฉ ูุณุจูุฉ ูู {country1}:** ูุธุงู ูุชูุงุฒู ูู ุงูุฅุฌุงุฒุงุช",
                f"**ููุฒุฉ ูุณุจูุฉ ูู {country2}:** ุญูุงูุฉ ุฃูุจุฑ ูู ูุชุฑุงุช ุงูุฅุฎุทุงุฑ",
                f"**ูุฌุงูุงุช ุชุญุณูู ูู {country1}:** ุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ",
                f"**ูุฌุงูุงุช ุชุญุณูู ูู {country2}:** ุชุญุณูู ูุธุงู ุณุงุนุงุช ุงูุนูู"
            ]

            for point in analysis_points:
                st.write(f"โข {point}")

    with comp_tabs[1]:
        st.markdown("##### ๐ ุชุญููู ุงูุณูุงุณุงุช ูุงูุชุฌุงุฑุจ ุงูุฏูููุฉ")

        policy_analysis = [
            {
                "ุงูุจูุฏ": "ุณูุบุงููุฑุฉ",
                "ุงููููุฐุฌ": "ุงููููุฐุฌ ุงูุชูุงููู",
                "ุงููููุฒุงุช": ["ูุฑููุฉ ุนุงููุฉ", "ุชุฏุฑูุจ ูุณุชูุฑ", "ุดุฑุงูุฉ ุซูุงุซูุฉ"],
                "ุงูุชุญุฏูุงุช": ["ุชูุงูุช ูู ุงูุฏุฎู", "ุถุบุท ุชูุงูุณู"],
                "ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ": "ุฏูุฌ ุงููุฑููุฉ ูุน ุงูุญูุงูุฉ ุงูุงุฌุชูุงุนูุฉ"
            },
            {
                "ุงูุจูุฏ": "ุฃููุงููุง",
                "ุงููููุฐุฌ": "ุงููููุฐุฌ ุงูุงุฌุชูุงุนู",
                "ุงููููุฒุงุช": ["ุญูุงูุฉ ูููุฉ", "ุชุฏุฑูุจ ูููู ูุชููุฒ", "ุงุณุชูุฑุงุฑ ูุธููู"],
                "ุงูุชุญุฏูุงุช": ["ุชูุงููู ุนุงููุฉ", "ุจูุฑููุฑุงุทูุฉ"],
                "ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ": "ูุนุงููุฉ ูุธุงู ุงูุชุฏุฑูุจ ุงููุฒุฏูุฌ"
            },
            {
                "ุงูุจูุฏ": "ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ",
                "ุงููููุฐุฌ": "ุงููููุฐุฌ ุงูุชูููู",
                "ุงููููุฒุงุช": ["ุจูุฆุฉ ุฌุงุฐุจุฉ", "ุชุดุฑูุนุงุช ูุฑูุฉ", "ุงุณุชุซูุงุฑ ูู ุงูููุงูุจ"],
                "ุงูุชุญุฏูุงุช": ["ุชุจุงูู ูู ุงูุญููู", "ุงุนุชูุงุฏ ุนูู ุงูุนูุงูุฉ ุงููุงูุฏุฉ"],
                "ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ": "ุฑุจุท ุงูุชุดุฑูุนุงุช ุจุงุญุชูุงุฌุงุช ุงูุชูููุฉ"
            }
        ]

        for analysis in policy_analysis:
            with st.expander(f"๐๏ธ ุชุญููู ุณูุงุณุงุช {analysis['ุงูุจูุฏ']}", expanded=True):
                col1, col2 = st.columns(2)

                with col1:
                    st.write(f"**ุงููููุฐุฌ:** {analysis['ุงููููุฐุฌ']}")
                    st.write("**ุงููููุฒุงุช:**")
                    for advantage in analysis['ุงููููุฒุงุช']:
                        st.write(f"โ {advantage}")

                with col2:
                    st.write("**ุงูุชุญุฏูุงุช:**")
                    for challenge in analysis['ุงูุชุญุฏูุงุช']:
                        st.write(f"โ๏ธ {challenge}")
                    st.write(f"**ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ:** {analysis['ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ']}")

# ==========================
# ๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ ุงูููุณุนุฉ ุงูุดุงููุฉ (ูุญุณูุฉ)
# ==========================
def show_calculators_section():
    st.markdown("### ๐งฎ ุงูุญุงุณุจุงุช ุงููุงููููุฉ ุงููุชูุงููุฉ - ุงููุธุงู ุงูุดุงูู 2025")

    calc_tabs = st.tabs([
        "๐ฐ ููุงูุฉ ุงูุฎุฏูุฉ", 
        "โฐ ุงูุนูู ุงูุฅุถุงูู", 
        "๐ฅ ุงูุฅุฌุงุฒุงุช ูุงูุฃูููุฉ",
        "๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ",
        "๐ธ ุงูุชุนููุถุงุช",
        "๐ ุงูุฑูุงุชุจ ูุงูุงุณุชูุทุงุนุงุช",
        "๐๏ธ ุงูุถูุงู ุงูุงุฌุชูุงุนู",
        "๐ด ุงูุฅุฌุงุฒุงุช ุงููุฑูุจุฉ",
        "โ๏ธ ุงููุฎุงููุงุช ูุงูุบุฑุงูุงุช",
        "๐ ุชูุงุฑูุฑ ุงูุญุณุงุจุงุช"
    ])

    with calc_tabs[0]:
        show_end_of_service_calculator()

    with calc_tabs[1]:
        show_overtime_calculator()

    with calc_tabs[2]:
        show_vacation_calculator()

    with calc_tabs[3]:
        show_comprehensive_calculator()

    with calc_tabs[9]:
        show_calculations_reports()

# ==========================
# ๐ฐ ุญุงุณุจุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_end_of_service_calculator():
    st.markdown("#### ๐ฐ ุญุงุณุจุฉ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงููุชูุฏูุฉ 2025")

    col1, col2 = st.columns(2)

    with col1:
        st.subheader("ุงููุฏุฎูุงุช ุงูุฃุณุงุณูุฉ")
        salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุฎูุฑ (ุฏููุงุฑ)", min_value=290, value=500, key="end_salary")
        years = st.number_input("ุนุฏุฏ ุงูุณููุงุช", min_value=0, max_value=40, value=5, key="end_years")
        months = st.number_input("ุนุฏุฏ ุงูุฃุดูุฑ", min_value=0, max_value=11, value=0, key="end_months")

        st.subheader("ุชูุงุตูู ุฅุถุงููุฉ")
        has_vacation = st.checkbox("ููุงู ุฅุฌุงุฒุงุช ูุณุชุญูุฉ", value=True, key="end_vacation")
        vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุงุช ุงููุณุชุญูุฉ", value=14, key="end_vac_days") if has_vacation else 0

        has_overtime = st.checkbox("ููุงู ูุณุชุญูุงุช ุนูู ุฅุถุงูู", value=True, key="end_overtime")
        overtime_amount = st.number_input("ูุจูุบ ุงูุนูู ุงูุฅุถุงูู ุงููุณุชุญู", value=200, key="end_overtime_amt") if has_overtime else 0

    with col2:
        st.subheader("ุธุฑูู ุฅููุงุก ุงูุฎุฏูุฉ")
        contract_type = st.selectbox("ููุน ุงูุนูุฏ", ["ุฏุงุฆู", "ูุคูุช"], key="end_contract")
        end_reason = st.selectbox("ุณุจุจ ุฅููุงุก ุงูุฎุฏูุฉ", [
            "ุงุณุชูุงูุฉ", "ุฅููุงุก ุฎุฏูุฉ ูู ุตุงุญุจ ุงูุนูู", "ุงูุชูุงุก ุนูุฏ", "ููุงุฉ ุฃู ุนุฌุฒ", "ูุตู ุชุฃุฏูุจู"
        ], key="end_reason")

        if end_reason == "ูุตู ุชุฃุฏูุจู":
            st.warning("โ๏ธ ูู ุญุงูุฉ ุงููุตู ุงูุชุฃุฏูุจูุ ูุฏ ูุง ุชุณุชุญู ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ")

        st.subheader("ุฎูุงุฑุงุช ุงูุญุณุงุจ")
        include_benefits = st.checkbox("ุงุญุชุณุงุจ ุงูุจุฏูุงุช ูุงูููุงูุขุช", value=True, key="end_benefits")
        detailed_calculation = st.checkbox("ุนุฑุถ ุงูุชูุงุตูู ุฎุทูุฉ ุจุฎุทูุฉ", value=True, key="end_detailed")

    if st.button("๐งฎ ุงุญุณุจ ุงูููุงูุฃุฉ ุงูุดุงููุฉ", type="primary", key="calc_end_service"):
        with st.spinner("ุฌุงุฑู ุญุณุงุจ ุงููุณุชุญูุงุช..."):
            # ุงูุญุณุงุจุงุช ุงูุฃุณุงุณูุฉ
            end_service, reference, calculation_steps = calculate_end_service_detailed(
                salary, years, months, contract_type, end_reason
            )

            # ุงููุณุชุญูุงุช ุงูุฅุถุงููุฉ
            vacation_pay = (salary / 30) * vacation_days if has_vacation else 0
            total_due = end_service + vacation_pay + overtime_amount

            st.success(f"""
            ## ๐ ูุชุงุฆุฌ ุญุณุงุจ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุงูุดุงููุฉ

            **ุงูุชูุงุตูู ุงูุฃุณุงุณูุฉ:**
            - ๐ผ ุงูุฑุงุชุจ ุงูุฃุณุงุณู: **{salary:,.0f}** ุฏููุงุฑ
            - ๐ ูุฏุฉ ุงูุฎุฏูุฉ: **{years}** ุณูุฉ ู **{months}** ุดูุฑ
            - ๐ท๏ธ ููุน ุงูุนูุฏ: **{contract_type}**
            - ๐ฏ ุณุจุจ ุงูุฅููุงุก: **{end_reason}**

            **ุงููุณุชุญูุงุช ุงูุชูุตูููุฉ:**
            - ๐ฐ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ: **{end_service:,.0f}** ุฏููุงุฑ
            - ๐ด ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช: **{vacation_pay:,.0f}** ุฏููุงุฑ
            - โฐ ูุณุชุญูุงุช ุนูู ุฅุถุงูู: **{overtime_amount:,.0f}** ุฏููุงุฑ

            **๐ฐ ุงูุฅุฌูุงูู ุงููุณุชุญู:** **{total_due:,.0f}** ุฏููุงุฑ

            **ุงูุฃุณุงุณ ุงููุงูููู:**
            ๐ {reference}
            """)

            if detailed_calculation:
                with st.expander("๐ ุชูุงุตูู ุงูุญุณุงุจ ุฎุทูุฉ ุจุฎุทูุฉ", expanded=True):
                    for step in calculation_steps:
                        st.write(f"โข {step}")

            # ุฎูุงุฑุงุช ุงูุชุญููู
            col1, col2, col3 = st.columns(3)
            with col1:
                report_content = generate_end_service_report(salary, years, months, end_service, total_due, reference)
                st.download_button(
                    "๐ ุชูุฑูุฑ ููุตู",
                    data=report_content,
                    file_name=f"ุชูุฑูุฑ_ููุงูุฃุฉ_ููุงูุฉ_ุฎุฏูุฉ_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col2:
                st.button("๐จ๏ธ ุทุจุงุนุฉ ุงููุชุงุฆุฌ", key="print_end_service")
            with col3:
                st.button("๐พ ุญูุธ ูู ุงูุณุฌู", key="save_end_service")

# ==========================
# โฐ ุญุงุณุจุฉ ุงูุนูู ุงูุฅุถุงูู ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_overtime_calculator():
    st.markdown("#### โฐ ุญุงุณุจุฉ ุจุฏู ุงูุนูู ุงูุฅุถุงูู ุงููุชูุฏูุฉ")

    col1, col2 = st.columns(2)

    with col1:
        st.subheader("ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ")
        basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="overtime_salary")
        regular_hours_weekly = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฃุณุจูุนูุฉ ุงูุนุงุฏูุฉ", value=48, key="regular_hours")

        st.subheader("ุชูุงุตูู ุงูุนูู ุงูุฅุถุงูู")
        overtime_type = st.selectbox("ููุน ุงูุนูู ุงูุฅุถุงูู", [
            "ููุงุฑู (8 ุต - 4 ู)", 
            "ูููู (4 ู - 8 ุต)", 
            "ุนุทูุฉ ุฑุณููุฉ", 
            "ุฌูุนุฉ ูุนุทู ุฏูููุฉ"
        ], key="overtime_type")

    with col2:
        st.subheader("ุชูุฒูุน ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ")
        daily_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูููููุฉ", value=2, key="daily_overtime")
        weekly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุฃุณุจูุนูุฉ", value=10, key="weekly_overtime")
        monthly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุดูุฑูุฉ", value=40, key="monthly_overtime")

        st.subheader("ูุชุฑุฉ ุงูุญุณุงุจ")
        calculation_period = st.selectbox("ูุชุฑุฉ ุงูุญุณุงุจ", ["ููู", "ุฃุณุจูุน", "ุดูุฑ", "ุฑุจุน ุณููู", "ุณููู"], key="overtime_period")

    if st.button("๐งฎ ุงุญุณุจ ุจุฏู ุงูุนูู ุงูุฅุถุงูู", key="calc_overtime_advanced"):
        hourly_rate = basic_salary / (30 * 8)  # 8 ุณุงุนุงุช ููููุงู

        # ุชุญุฏูุฏ ูุนุฏู ุงูุฒูุงุฏุฉ ุญุณุจ ููุน ุงูุนูู ุงูุฅุถุงูู
        rates = {
            "ููุงุฑู (8 ุต - 4 ู)": 1.25,
            "ูููู (4 ู - 8 ุต)": 1.5,
            "ุนุทูุฉ ุฑุณููุฉ": 1.5,
            "ุฌูุนุฉ ูุนุทู ุฏูููุฉ": 1.5
        }

        rate = rates[overtime_type]

        # ุญุณุงุจ ุงูุณุงุนุงุช ุญุณุจ ุงููุชุฑุฉ
        if calculation_period == "ููู":
            overtime_hours = daily_overtime
        elif calculation_period == "ุฃุณุจูุน":
            overtime_hours = weekly_overtime
        else:  # ุดูุฑ ุฃู ุฃูุซุฑ
            overtime_hours = monthly_overtime

        overtime_pay = overtime_hours * hourly_rate * rate

        st.success(f"""
        ## โฐ ูุชุงุฆุฌ ุญุณุงุจ ุจุฏู ุงูุนูู ุงูุฅุถุงูู

        **ุงูุชูุงุตูู:**
        - ๐ผ ุงูุฑุงุชุจ ุงูุฃุณุงุณู: **{basic_salary:,.0f}** ุฏููุงุฑ
        - โฑ๏ธ ุณุงุนุงุช ุงูุนูู ุงูุนุงุฏูุฉ: **{regular_hours_weekly}** ุณุงุนุฉ ุฃุณุจูุนูุงู
        - ๐ผ ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู: **{overtime_hours}** ุณุงุนุฉ ({calculation_period})
        - ๐ ููุน ุงูุนูู ุงูุฅุถุงูู: **{overtime_type}**
        - ๐ธ ุงูุณุงุนุฉ ุงูุฃุณุงุณูุฉ: **{hourly_rate:,.2f}** ุฏููุงุฑ
        - ๐ ูุนุฏู ุงูุฒูุงุฏุฉ: **{int((rate-1)*100)}%**

        **ุงููุชูุฌุฉ:**
        - ๐ฐ ุจุฏู ุงูุนูู ุงูุฅุถุงูู: **{overtime_pay:,.0f}** ุฏููุงุฑ

        **ุงูุฃุณุงุณ ุงููุงูููู:**
        - ุงููุงุฏุฉ 42 ูู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู
        - ูุฌุจ ุฃู ูุง ุชุฒูุฏ ุณุงุนุงุช ุงูุนูู ุงููุนููุฉ ุนู 8 ุณุงุนุงุช ููููุงู
        - ุงูุญุฏ ุงูุฃูุตู ููุนูู ุงูุฅุถุงูู: ุณุงุนุชูู ููููุงู
        """)

        # ุชุญุฐูุฑุงุช ูุงููููุฉ
        if daily_overtime > 2:
            st.error("โ๏ธ ุชุฌุงูุฒ ุงูุญุฏ ุงููุงูููู ููุนูู ุงูุฅุถุงูู ุงููููู (ุณุงุนุชุงู ูุญุฏ ุฃูุตู)")
        if regular_hours_weekly + weekly_overtime > 60:
            st.warning("โ๏ธ ุงูุชุฑุงุจ ุฃู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ูุณุงุนุงุช ุงูุนูู ุงูุฃุณุจูุนูุฉ")

# ==========================
# ๐ฅ ุญุงุณุจุฉ ุงูุฅุฌุงุฒุงุช ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_vacation_calculator():
    st.markdown("#### ๐ฅ ุญุงุณุจุฉ ุงูุฅุฌุงุฒุงุช ูุงููุณุชุญูุงุช ุงูุดุงููุฉ")

    vacation_tabs = st.tabs(["ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "ุฅุฌุงุฒุฉ ุงูุฃูููุฉ", "ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ", "ุงูุฅุฌุงุฒุงุช ุงููุฑูุจุฉ"])

    with vacation_tabs[0]:
        st.markdown("##### ๐ด ุญุงุณุจุฉ ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ")

        col1, col2 = st.columns(2)

        with col1:
            basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="annual_salary")
            service_years = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุณููุงุช)", value=3, key="annual_years")
            actual_vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ", value=14, key="annual_days")

        with col2:
            vacation_type = st.selectbox("ููุน ุงูุฅุฌุงุฒุฉ", [
                "ุนุงุฏูุฉ", "ูุฑุถูุฉ", "ุทุงุฑุฆุฉ", "ุฏุฑุงุณูุฉ"
            ], key="annual_type")

            include_allowances = st.checkbox("ุงุญุชุณุงุจ ุงูุจุฏูุงุช", value=True, key="annual_allowances")

        if st.button("๐งฎ ุงุญุณุจ ูุณุชุญูุงุช ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", key="calc_annual"):
            daily_rate = basic_salary / 30
            vacation_pay = daily_rate * actual_vacation_days

            # ุชุญุฏูุฏ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ ุญุณุจ ูุฏุฉ ุงูุฎุฏูุฉ
            if service_years < 5:
                entitled_days = 14
            elif service_years < 10:
                entitled_days = 21
            else:
                entitled_days = 28

            st.success(f"""
            ## ๐ด ูุชุงุฆุฌ ุญุณุงุจ ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ

            **ุงูุญููู ุงููุณุชุญูุฉ:**
            - ๐ ูุฏุฉ ุงูุฎุฏูุฉ: **{service_years}** ุณููุงุช
            - ๐ฏ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ: **{entitled_days}** ููู
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ: **{actual_vacation_days}** ููู

            **ุงููุณุชุญูุงุช ุงููุงููุฉ:**
            - ๐ฐ ุงูุฃุฌุฑ ุงููููู: **{daily_rate:,.2f}** ุฏููุงุฑ
            - ๐ธ ูุณุชุญูุงุช ุงูุฅุฌุงุฒุฉ: **{vacation_pay:,.0f}** ุฏููุงุฑ

            **ุงูุฃุณุงุณ ุงููุงูููู:**
            - ุงููุงุฏุฉ 52: ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ
            - ุงููุงุฏุฉ 53: ุงุณุชุญูุงู ุงูุฅุฌุงุฒุฉ
            - ุงููุงุฏุฉ 54: ุตุฑู ุฃุฌุฑ ุงูุฅุฌุงุฒุฉ
            """)

    with vacation_tabs[1]:
        st.markdown("##### ๐คฐ ุญุงุณุจุฉ ุฅุฌุงุฒุฉ ุงูุฃูููุฉ 2025")

        col1, col2 = st.columns(2)

        with col1:
            salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="maternity_salary")
            actual_leave = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ", value=70, key="maternity_days")
            multiple_birth = st.checkbox("ุญุงูุฉ ููุงุฏุฉ ูุชุนุฏุฏุฉ", key="maternity_multiple")

        with col2:
            complications = st.checkbox("ููุงู ูุถุงุนูุงุช ููุงุฏุฉ", key="maternity_complications")
            previous_maternity = st.number_input("ุนุฏุฏ ูุฑุงุช ุฅุฌุงุฒุฉ ุงูุฃูููุฉ ุงูุณุงุจูุฉ", value=0, key="maternity_previous")

        if st.button("๐งฎ ุงุญุณุจ ูุณุชุญูุงุช ุงูุฃูููุฉ", key="calc_maternity"):
            # ุญุณุจ ุงูุชุนุฏููุงุช 2025
            entitled_days = 70  # 10 ุฃุณุงุจูุน
            if multiple_birth:
                entitled_days += 14  # ุฃุณุจูุนูู ุฅุถุงูููู
            if complications:
                entitled_days += 14  # ุฃุณุจูุนูู ุฅุถุงูููู

            daily_rate = salary / 30
            maternity_pay = daily_rate * min(actual_leave, entitled_days)

            st.success(f"""
            ## ๐คฐ ูุชุงุฆุฌ ุญุณุงุจ ุฅุฌุงุฒุฉ ุงูุฃูููุฉ

            **ุงูุญููู ุงููุณุชุญูุฉ:**
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุณุชุญูุฉ: **{entitled_days}** ููู
            - ๐ ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุนููุฉ: **{actual_leave}** ููู
            - ๐ฐ ุงูุฃุฌุฑ ุงููููู: **{daily_rate:,.2f}** ุฏููุงุฑ

            **ุงููุณุชุญูุงุช ุงููุงููุฉ:**
            - ๐ธ ูุณุชุญูุงุช ุงูุฃูููุฉ: **{maternity_pay:,.0f}** ุฏููุงุฑ

            **ุงูุฃุณุงุณ ุงููุงูููู:**
            - ุงููุงุฏุฉ 69 (ูุนุฏูุฉ 2025): ุฅุฌุงุฒุฉ ุฃูููุฉ 10 ุฃุณุงุจูุน
            - ุงููุงุฏุฉ 70: ุฅุฌุงุฒุฉ ูุงูุฏูุฉ
            - ูุฑุงุฑุงุช ูุฒุงุฑุฉ ุงูุนูู 2025
            """)

# ==========================
# ๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_comprehensive_calculator():
    st.markdown("#### ๐ ุงูุญุงุณุจุฉ ุงูุดุงููุฉ ูููุณุชุญูุงุช ุงููุงููููุฉ")

    st.info("""
    **๐ฏ ูุฐู ุงูุญุงุณุจุฉ ุชูููู ูู ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช ุงููุงููููุฉ ุฏูุนุฉ ูุงุญุฏุฉ**
    ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ูุณูุชู ุญุณุงุจ ูุงูุฉ ุงููุณุชุญูุงุช ุชููุงุฆูุงู
    """)

    col1, col2, col3 = st.columns(3)

    with col1:
        st.subheader("ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ")
        basic_salary = st.number_input("ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฏููุงุฑ)", value=500, key="comp_salary")
        service_years = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุณููุงุช)", value=3, key="comp_years")
        service_months = st.number_input("ูุฏุฉ ุงูุฎุฏูุฉ (ุฃุดูุฑ)", value=6, key="comp_months")

    with col2:
        st.subheader("ุงูุนูู ุงูุฅุถุงูู")
        monthly_overtime = st.number_input("ุณุงุนุงุช ุงูุนูู ุงูุฅุถุงูู ุงูุดูุฑูุฉ", value=20, key="comp_overtime")
        overtime_type = st.selectbox("ููุน ุงูุนูู ุงูุฅุถุงูู", ["ููุงุฑู", "ูููู"], key="comp_overtime_type")

    with col3:
        st.subheader("ุงูุฅุฌุงุฒุงุช ุงููุณุชุญูุฉ")
        vacation_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", value=14, key="comp_vacation")
        sick_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ", value=5, key="comp_sick")
        emergency_days = st.number_input("ุฃูุงู ุงูุฅุฌุงุฒุฉ ุงูุทุงุฑุฆุฉ", value=3, key="comp_emergency")

    # ุฎูุงุฑุงุช ุฅุถุงููุฉ
    with st.expander("โ๏ธ ุฎูุงุฑุงุช ูุชูุฏูุฉ", expanded=False):
        col1, col2 = st.columns(2)

        with col1:
            housing_allowance = st.number_input("ุจุฏู ุงูุณูู", value=100, key="comp_housing")
            transport_allowance = st.number_input("ุจุฏู ุงูููุงุตูุงุช", value=50, key="comp_transport")

        with col2:
            other_allowances = st.number_input("ุจุฏูุงุช ุฃุฎุฑู", value=0, key="comp_other")
            deductions = st.number_input("ุงูุงุณุชูุทุงุนุงุช", value=0, key="comp_deductions")

    if st.button("๐งฎ ุงุญุณุจ ุฌููุน ุงููุณุชุญูุงุช", type="primary", key="calc_comprehensive"):
        with st.spinner("ุฌุงุฑู ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช..."):
            # ุญุณุงุจ ูุงูุฉ ุงููุณุชุญูุงุช
            results = calculate_all_benefits(
                basic_salary, service_years, service_months, monthly_overtime, overtime_type,
                vacation_days, sick_days, emergency_days, housing_allowance, 
                transport_allowance, other_allowances, deductions
            )

            st.success("## ๐ฐ ูุชุงุฆุฌ ุงูุญุณุงุจ ุงูุดุงูู")

            # ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฃุนูุฏุฉ
            col1, col2, col3 = st.columns(3)

            with col1:
                st.metric("ุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ", f"{results['basic_benefits']:,.0f} ุฏููุงุฑ")
                st.metric("ุจุฏู ุงูุนูู ุงูุฅุถุงูู", f"{results['overtime']:,.0f} ุฏููุงุฑ")

            with col2:
                st.metric("ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช", f"{results['vacation_benefits']:,.0f} ุฏููุงุฑ")
                st.metric("ุงูุจุฏูุงุช ุงูุฅุถุงููุฉ", f"{results['allowances']:,.0f} ุฏููุงุฑ")

            with col3:
                st.metric("ุงูุงุณุชูุทุงุนุงุช", f"{-results['deductions']:,.0f} ุฏููุงุฑ")
                st.metric("ุงูุตุงูู ุงููุณุชุญู", f"{results['net_due']:,.0f} ุฏููุงุฑ", 
                         delta=f"{results['net_due'] - results['basic_benefits']:+.0f}")

            # ุชูุงุตูู ุฅุถุงููุฉ
            with st.expander("๐ ุงูุชูุงุตูู ุงููุงููุฉ", expanded=True):
                st.write("**ุชูุตูู ุงููุณุชุญูุงุช:**")
                for benefit, amount in results['breakdown'].items():
                    st.write(f"- {benefit}: {amount:,.0f} ุฏููุงุฑ")

                st.write("**ุงูุชูุตูุงุช:**")
                st.write("- ููุตู ุจูุฑุงุฌุนุฉ ุงูุญุณุงุจุงุช ูุน ูุฎุชุต ูุงูููู")
                st.write("- ุงูุงุญุชูุงุธ ุจูุณุฎุฉ ูู ูุดูู ุงูุญุณุงุจุงุช")
                st.write("- ูุชุงุจุนุฉ ุฃู ูุณุชุญูุงุช ูุชุฃุฎุฑุฉ ูุน ุตุงุญุจ ุงูุนูู")

# ==========================
# ๐ ุชูุงุฑูุฑ ุงูุญุณุงุจุงุช ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_calculations_reports():
    st.markdown("#### ๐ ูุธุงู ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช")

    report_tabs = st.tabs(["ุงูุชูุงุฑูุฑ ุงูุชูุตูููุฉ", "ุงูููุงุฑูุงุช", "ุงูุฑุณูู ุงูุจูุงููุฉ", "ุงูุชููุนุงุช"])

    with report_tabs[0]:
        st.markdown("##### ๐ ุงูุชูุงุฑูุฑ ุงูุชูุตูููุฉ ููุญุณุงุจุงุช")

        report_type = st.selectbox("ููุน ุงูุชูุฑูุฑ", [
            "ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ",
            "ุชูุฑูุฑ ุงูุนูู ุงูุฅุถุงูู", 
            "ุชูุฑูุฑ ุงูุฅุฌุงุฒุงุช",
            "ุชูุฑูุฑ ุงูุถูุงู ุงูุงุฌุชูุงุนู",
            "ุชูุฑูุฑ ุดุงูู ูุฌููุน ุงููุณุชุญูุงุช"
        ])

        if st.button("๐ ุฅูุดุงุก ุงูุชูุฑูุฑ", key="generate_report"):
            # ูุญุงูุงุฉ ุฅูุดุงุก ุงูุชูุฑูุฑ
            report_data = generate_detailed_report(report_type)

            st.success("## ๐ ุงูุชูุฑูุฑ ุงูุชูุตููู")
            st.write(report_data)

            # ุฎูุงุฑุงุช ุงูุชุญููู
            col1, col2, col3 = st.columns(3)
            with col1:
                st.download_button(
                    "๐ฅ ุชุญููู PDF",
                    data=report_data,
                    file_name=f"ุชูุฑูุฑ_{report_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col2:
                st.download_button(
                    "๐ ุชุตุฏูุฑ Excel",
                    data=report_data,
                    file_name=f"ุชูุฑูุฑ_{report_type}_{datetime.now().strftime('%Y%m%d')}.txt",
                    mime="text/plain"
                )
            with col3:
                st.button("๐จ๏ธ ุทุจุงุนุฉ ุงูุชูุฑูุฑ", key="print_report")

    with report_tabs[2]:
        st.markdown("##### ๐ ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุชุญููููุฉ")

        # ุจูุงูุงุช ูููุฐุฌูุฉ ููุฑุณูู ุงูุจูุงููุฉ
        chart_data = {
            'ููุน ุงููุณุชุญู': ['ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ', 'ุจุฏู ุงูุนูู ุงูุฅุถุงูู', 'ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช', 'ุงูุถูุงู ุงูุงุฌุชูุงุนู'],
            'ุงููุจูุบ (ุฏููุงุฑ)': [2500, 800, 600, 450]
        }

        chart_df = pd.DataFrame(chart_data)

        col1, col2 = st.columns(2)

        with col1:
            st.bar_chart(chart_df.set_index('ููุน ุงููุณุชุญู'))
        with col2:
            st.line_chart(chart_df.set_index('ููุน ุงููุณุชุญู'))

# ==========================
# ๐๏ธ ุฏูุงู ุงูุญุณุงุจ ุงููุณุงุนุฏุฉ (ูุญุณูุฉ)
# ==========================
def calculate_end_service_detailed(salary, years, months, contract_type, end_reason):
    """ุญุณุงุจ ููุตู ูููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ูุน ุงูุฎุทูุงุช"""
    total_months = years * 12 + months

    calculation_steps = []

    if end_reason in ["ุงุณุชูุงูุฉ", "ุงูุชูุงุก ุนูุฏ"]:
        if total_months < 12:
            amount = 0
            calculation_steps.append("ุฃูู ูู ุณูุฉ ุฎุฏูุฉ: ูุง ุชุณุชุญู ุงูููุงูุฃุฉ")
        elif total_months <= 60:
            amount = (salary * total_months) / 24
            calculation_steps.append(f"1-5 ุณููุงุช: ุซูุซ ุงูุฑุงุชุจ ุนู ูู ุดูุฑ = ({salary} ร {total_months}) รท 24")
        else:
            first_5 = (salary * 60) / 24
            remaining = (salary * (total_months - 60)) / 12
            amount = first_5 + remaining
            calculation_steps.append(f"ุฃูู 5 ุณููุงุช: ุซูุซ ุงูุฑุงุชุจ = ({salary} ร 60) รท 24 = {first_5:,.0f}")
            calculation_steps.append(f"ุงูุณููุงุช ุงูุชุงููุฉ: ุซูุซู ุงูุฑุงุชุจ = ({salary} ร {total_months-60}) รท 12 = {remaining:,.0f}")
    else:  # ุฅููุงุก ุฎุฏูุฉ
        if total_months <= 60:
            amount = (salary * total_months) / 12
            calculation_steps.append(f"1-5 ุณููุงุช: ุงูุฑุงุชุจ ุงููุงูู ุนู ูู ุดูุฑ = ({salary} ร {total_months}) รท 12")
        else:
            first_5 = (salary * 60) / 12
            remaining = (salary * (total_months - 60)) / 8
            amount = first_5 + remaining
            calculation_steps.append(f"ุฃูู 5 ุณููุงุช: ุงูุฑุงุชุจ ุงููุงูู = ({salary} ร 60) รท 12 = {first_5:,.0f}")
            calculation_steps.append(f"ุงูุณููุงุช ุงูุชุงููุฉ: ูุฑุชุจุงู ุนู ูู ุณูุฉ = ({salary} ร {total_months-60}) รท 8 = {remaining:,.0f}")

    reference = "ุงูููุงุฏ 74-77 ูู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู"
    return amount, reference, calculation_steps

def calculate_all_benefits(basic_salary, years, months, overtime_hours, overtime_type, 
                          vacation_days, sick_days, emergency_days, housing, transport, other, deductions):
    """ุญุณุงุจ ุฌููุน ุงููุณุชุญูุงุช ุฏูุนุฉ ูุงุญุฏุฉ"""

    # ุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ
    basic_benefits = basic_salary

    # ุงูุนูู ุงูุฅุถุงูู
    hourly_rate = basic_salary / (30 * 8)
    overtime_rate = 1.25 if overtime_type == "ููุงุฑู" else 1.5
    overtime = overtime_hours * hourly_rate * overtime_rate

    # ุงูุฅุฌุงุฒุงุช
    daily_rate = basic_salary / 30
    vacation_benefits = daily_rate * vacation_days
    sick_benefits = daily_rate * sick_days * 0.5  # ูุตู ุงูุฑุงุชุจ ููุฅุฌุงุฒุฉ ุงููุฑุถูุฉ
    emergency_benefits = daily_rate * emergency_days

    # ุงูุจุฏูุงุช
    allowances = housing + transport + other

    # ุงูุฅุฌูุงูู
    total_benefits = basic_benefits + overtime + vacation_benefits + sick_benefits + emergency_benefits + allowances
    net_due = total_benefits - deductions

    return {
        'basic_benefits': basic_benefits,
        'overtime': overtime,
        'vacation_benefits': vacation_benefits + sick_benefits + emergency_benefits,
        'allowances': allowances,
        'deductions': deductions,
        'net_due': net_due,
        'breakdown': {
            'ุงูุฑุงุชุจ ุงูุฃุณุงุณู': basic_benefits,
            'ุจุฏู ุงูุนูู ุงูุฅุถุงูู': overtime,
            'ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช': vacation_benefits,
            'ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ': sick_benefits,
            'ุงูุฅุฌุงุฒุฉ ุงูุทุงุฑุฆุฉ': emergency_benefits,
            'ุจุฏู ุงูุณูู': housing,
            'ุจุฏู ุงูููุงุตูุงุช': transport,
            'ุจุฏูุงุช ุฃุฎุฑู': other
        }
    }

def generate_detailed_report(report_type):
    """ุชูููุฏ ุชูุฑูุฑ ููุตู"""
    reports = {
        "ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ": """
        ุชูุฑูุฑ ููุตู ุนู ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
        ==============================

        ุงูุชุงุฑูุฎ: {date}

        ุงููุญุชููุงุช:
        1. ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
        2. ุทุฑููุฉ ุงูุญุณุงุจ
        3. ุงููุชุงุฆุฌ
        4. ุงูุฃุณุงุณ ุงููุงูููู
        5. ุงูุชูุตูุงุช

        ุชู ุฅูุดุงุก ุงูุชูุฑูุฑ ุจูุงุณุทุฉ ุงูููุตุฉ ุงููุงููููุฉ ุงูุฐููุฉ 2025
        """.format(date=datetime.now().strftime('%Y-%m-%d')),

        "ุชูุฑูุฑ ุดุงูู ูุฌููุน ุงููุณุชุญูุงุช": """
        ุงูุชูุฑูุฑ ุงูุดุงูู ูููุณุชุญูุงุช ุงููุงููููุฉ
        ==============================

        ูุฐุง ุงูุชูุฑูุฑ ูุดูู ูุงูุฉ ุงููุณุชุญูุงุช ุงููุณุชุญูุฉ ูุงููููุงู
        ูููุงู ูุฃุญุฏุซ ุงูุชุนุฏููุงุช ุงูุชุดุฑูุนูุฉ 2025

        ุงููุญุชููุงุช:
        - ุงูุฑุงุชุจ ูุงููุณุชุญูุงุช ุงูุฃุณุงุณูุฉ
        - ุจุฏู ุงูุนูู ุงูุฅุถุงูู
        - ูุณุชุญูุงุช ุงูุฅุฌุงุฒุงุช
        - ุงุดุชุฑุงูุงุช ุงูุถูุงู ุงูุงุฌุชูุงุนู
        - ุงูุชุนููุถุงุช ูุงููุณุชุญูุงุช ุงูุฅุถุงููุฉ

        ุชุงุฑูุฎ ุงูุฅูุดุงุก: {date}
        """.format(date=datetime.now().strftime('%Y-%m-%d'))
    }

    return reports.get(report_type, "ุชูุฑูุฑ ุบูุฑ ูุชููุฑ")

def generate_end_service_report(salary, years, months, end_service, total_due, reference):
    """ุชูููุฏ ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ"""
    return f"""
    ุชูุฑูุฑ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ
    =======================

    ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ:
    - ุงูุฑุงุชุจ ุงูุฃุฎูุฑ: {salary:,.0f} ุฏููุงุฑ
    - ูุฏุฉ ุงูุฎุฏูุฉ: {years} ุณูุฉ ู {months} ุดูุฑ
    - ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ: {end_service:,.0f} ุฏููุงุฑ
    - ุงูุฅุฌูุงูู ุงููุณุชุญู: {total_due:,.0f} ุฏููุงุฑ

    ุงูุฃุณุงุณ ุงููุงูููู:
    {reference}

    ููุงุญุธุงุช:
    - ุงูุชูุฑูุฑ ูุฃุบุฑุงุถ ุงูุชูุนูุฉ ูุงูุชุนููู ููุท
    - ููุตู ุจุงูุชุดุงูุฑ ูุน ูุฎุชุต ูุงูููู
    - ุงูุญุณุงุจุงุช ููู ูุงููู ุงูุนูู ุงูุฃุฑุฏูู 2025

    ุชุงุฑูุฎ ุงูุฅูุดุงุก: {datetime.now().strftime('%Y-%m-%d %H:%M')}
    """

def generate_advanced_citation(doc_category, authors, title, year, publisher, place, url, accessed_date, system):
    """ุชูููุฏ ุงูุชุจุงุณ ูุชูุฏู"""
    return f"""
    ูุธุงู ุงูุงูุชุจุงุณ: {system}
    ููุน ุงููุตุฏุฑ: {doc_category}
    ุงููุคูููู: {authors}
    ุงูุนููุงู: {title}
    ุณูุฉ ุงููุดุฑ: {year}
    ุงููุงุดุฑ: {publisher}
    ููุงู ุงููุดุฑ: {place}
    ุงูุฑุงุจุท: {url}
    ุชุงุฑูุฎ ุงููุตูู: {accessed_date}
    """

def generate_interactive_comparison(country1, country2, field):
    """ุชูููุฏ ููุงุฑูุฉ ุชูุงุนููุฉ"""
    return {
        "country1": country1,
        "country2": country2, 
        "field": field,
        "timestamp": datetime.now()
    }

# ==========================
# ๐ ูุญุงูู ุงูุดููู ุงูุดุงูู (ูุญุณูุฉ)
# ==========================
def show_complaint_simulator():
    st.markdown("### ๐ ูุญุงูู ุงูุดููู ุงูุฐูู - ูุธุงู ุงูุชุญููู ูุงูุชูุฌูู ุงูุนุงู")

    st.markdown("""
    <div style="background: #FFFBEB; padding: 1.5rem; border-radius: 10px; border: 2px solid #F59E0B; margin-bottom: 2rem;">
        <h4 style="color: #D97706; margin-top: 0;">๐ข ุชููููุงุช ูุงูุฉ</h4>
        <ul style="color: #92400E;">
            <li><strong>ูุฐุง ุงููุญุงูู ููุฏู ุชุญูููุงู ุนุงูุงู ูุชูุนููุงู ููุท</strong></li>
            <li><strong>ูุง ูุตุฏุฑ ุฃุญูุงูุงู ูุงููููุฉ ุฃู ุงุณุชุดุงุฑุงุช ููุฒูุฉ</strong></li>
            <li><strong>ูุง ูุชู ุชุฎุฒูู ุฃู ูุนูููุงุช ุดุฎุตูุฉ</strong></li>
            <li><strong>ููุตู ุฏุงุฆูุงู ุจุงุณุชุดุงุฑุฉ ูุญุงูู ูุชุฎุตุต</strong></li>
            <li><strong>ุงููุนูููุงุช ูุฃุบุฑุงุถ ุงูุชูุนูุฉ ูุงูุชุนููู ุงูุนุงู</strong></li>
        </ul>
    </div>
    """, unsafe_allow_html=True)

    complaint_tabs = st.tabs([
        "๐ ุชุญููู ุงููุดููุฉ", 
        "๐งฉ ุชุดุฎูุต ุงูุญุงูุฉ",
        "๐ ุฎุทุฉ ุงูุนูู", 
        "โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู"
    ])

    with complaint_tabs[0]:
        show_problem_analysis()

    with complaint_tabs[3]:
        show_legal_framework()

# ==========================
# ๐ ุชุญููู ุงููุดููุฉ ุงููุชูุฏู (ูุญุณูุฉ)
# ==========================
def show_problem_analysis():
    st.markdown("#### ๐ ุงูุชุญููู ุงููุชูุฏู ูููุดููุฉ")

    col1, col2 = st.columns(2)

    with col1:
        st.subheader("ุชุตููู ุงููุดููุฉ")
        complaint_category = st.selectbox("ุงููุฆุฉ ุงูุฑุฆูุณูุฉ", [
            "๐ฐ ูุดุงูู ูุงููุฉ",
            "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ", 
            "โฐ ุธุฑูู ุงูุนูู",
            "๐ก๏ธ ุงูุณูุงูุฉ ูุงูุญูุงูุฉ",
            "๐ ุนููุฏ ูุชูุธูู",
            "๐ด ุฅุฌุงุฒุงุช ูุฑุงุญุฉ",
            "๐ง ูุดุงูู ุชูููุฉ",
            "๐จ ุญุงูุงุช ุทุงุฑุฆุฉ"
        ], key="complaint_category")

        complaint_type = st.selectbox("ููุน ุงููุดููุฉ ุงููุญุฏุฏ", get_complaint_types(complaint_category), key="complaint_type")

        st.subheader("ุงูุณูุงู ุงูุฒููู")
        start_date = st.date_input("ุชุงุฑูุฎ ุจุฏุงูุฉ ุงููุดููุฉ")
        duration = st.selectbox("ูุฏุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ", [
            "ุฃูู ูู ุฃุณุจูุน", "1-4 ุฃุณุงุจูุน", "1-3 ุฃุดูุฑ", "3-6 ุฃุดูุฑ", "6-12 ุดูุฑ", "ุฃูุซุฑ ูู ุณูุฉ"
        ])
        frequency = st.selectbox("ุชูุฑุงุฑ ุงููุดููุฉ", [
            "ุญุงุฏุซุฉ ูุงุญุฏุฉ", "ูุชูุฑุฑุฉ ุฃุณุจูุนูุงู", "ูุชูุฑุฑุฉ ุดูุฑูุงู", "ูุณุชูุฑุฉ", "ุบูุฑ ููุชุธูุฉ"
        ])

    with col2:
        st.subheader("ุชุฃุซูุฑ ุงููุดููุฉ")
        severity = st.select_slider("ุดุฏุฉ ุงูุชุฃุซูุฑ", [
            "ููุฎูุถ", "ูุชูุณุท", "ูุฑุชูุน", "ุญุฑุฌ", "ูุงุฑุซู"
        ])

        affected_areas = st.multiselect("ุงููุฌุงูุงุช ุงููุชุฃุซุฑุฉ", [
            "ุงูุฏุฎู ุงููุงูู", "ุงูุตุญุฉ ุงูููุณูุฉ", "ุงูุตุญุฉ ุงูุฌุณุฏูุฉ", 
            "ุงูุฃุฏุงุก ุงููุธููู", "ุงูุนูุงูุงุช ุงูุนูููุฉ", "ุงูุณูุนุฉ ุงูููููุฉ",
            "ุงูุงุณุชูุฑุงุฑ ุงููุธููู", "ุงูุชุทูุฑ ุงููุธููู"
        ])

        st.subheader("ุงูุฌูุงุช ุงููุชุถููุฉ")
        involved_parties = st.multiselect("ุงูุฃุทุฑุงู ุงููุนููุฉ", [
            "ุตุงุญุจ ุงูุนูู", "ุงููุฏูุฑ ุงููุจุงุดุฑ", "ุฒููุงุก ุงูุนูู", 
            "ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ", "ุฌูุฉ ุญููููุฉ", "ุนููุงุก"
        ])

    # ูุตู ุงููุดููุฉ ุงูููุตู
    st.subheader("๐ ุงููุตู ุงูุชูุตููู ูููุดููุฉ")
    problem_description = st.text_area(
        "ุตู ุงููุดููุฉ ุจุดูู ููุตู ููุงุถุญ",
        placeholder="""ูุซุงู: 
ุจุฏุฃุช ุงููุดููุฉ ุนูุฏูุง... 
ุงูุชุฃุซูุฑ ุงููุจุงุดุฑ ูุงู...
ุญุงููุช ุญู ุงููุดููุฉ ุนู ุทุฑูู...
ุงููุชูุฌุฉ ูุงูุช...""",
        height=150
    )

    if st.button("๐ ุจุฏุก ุงูุชุญููู ุงูุดุงูู", type="primary", key="start_analysis"):
        if problem_description:
            with st.spinner("ุฌุงุฑู ุชุญููู ุงููุดููุฉ ูุชูุฏูู ุงูุชูุตูุงุช ุงูุนุงูุฉ..."):
                analysis_result = analyze_complaint_advanced(
                    complaint_category, complaint_type, problem_description, 
                    severity, duration, frequency, affected_areas
                )

                display_analysis_results(analysis_result)

# ==========================
# โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู ุงูููุณุน (ูุญุณูุฉ)
# ==========================
def show_legal_framework():
    st.markdown("#### โ๏ธ ุงูุฅุทุงุฑ ุงููุงูููู ุงูุดุงูู")

    legal_tabs = st.tabs(["ุงูููุงุฏ ุงููุงููููุฉ", "ุงูุณูุงุจู ุงููุถุงุฆูุฉ", "ุงูููุงุฆุญ ุงูุชูููุฐูุฉ", "ุงูุงุฌุชูุงุฏุงุช ุงูููููุฉ"])

    with legal_tabs[0]:
        st.markdown("##### ๐ ุงูููุงุฏ ุงููุงููููุฉ ุงูููุทุจูุฉ")

        legal_articles = {
            "ุงููุงุฏุฉ 13": "ูุฌูุจ ูุชุงุจุฉ ุนูุฏ ุงูุนูู",
            "ุงููุงุฏุฉ 35": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ",
            "ุงููุงุฏุฉ 42": "ุจุฏู ุงูุนูู ุงูุฅุถุงูู", 
            "ุงููุงุฏุฉ 55": "ููุนุฏ ุตุฑู ุงูุฃุฌุฑ",
            "ุงููุงุฏุฉ 72": "ุฅููุงุก ุนูุฏ ุงูุนูู",
            "ุงููุงุฏุฉ 73": "ุงููุตู ุงูุชุนุณูู",
            "ุงููุงุฏุฉ 74": "ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ",
            "ุงููุงุฏุฉ 79": "ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ"
        }

        for article, description in legal_articles.items():
            with st.expander(f"๐ {article}: {description}"):
                st.write(f"**ุงููุต ุงููุงูู:** {get_article_full_text(article)}")
                st.write(f"**ุงูุชุทุจููุงุช:** {get_article_applications(article)}")
                st.write(f"**ุงูุงุณุชุซูุงุกุงุช:** {get_article_exceptions(article)}")

    with legal_tabs[1]:
        st.markdown("##### โ๏ธ ุงูุณูุงุจู ุงููุถุงุฆูุฉ ุฐุงุช ุงูุตูุฉ")

        legal_precedents = [
            {
                "ุงููุถูุฉ": "ุชูููุฒ ุนูู 150/2023 - ุชุฃุฎุฑ ุตุฑู ุงูุฑูุงุชุจ",
                "ุงููุจุฏุฃ": "ูุฌูุจ ุงูุชุนููุถ ุนู ุงูุฃุถุฑุงุฑ ุงููุงุชุฌุฉ ุนู ุชุฃุฎูุฑ ุตุฑู ุงูุฑูุงุชุจ",
                "ุงูุชุทุจูู": "ููุทุจู ุนูู ุญุงูุงุช ุงูุชุฃุฎูุฑ ุงููุชูุฑุฑ ุฃู ุงูุทููู"
            },
            {
                "ุงููุถูุฉ": "ุชูููุฒ ุนูู 85/2022 - ุงููุตู ุงูุชุนุณูู", 
                "ุงููุจุฏุฃ": "ูุฌูุจ ุฅุซุจุงุช ุงููุจุฑุฑ ุงููุดุฑูุน ูููุตู",
                "ุงูุชุทุจูู": "ููุทุจู ุนูู ุญุงูุงุช ุงููุตู ุจุฏูู ุฅูุฐุงุฑ ุฃู ุณุจุจ ูุงุถุญ"
            }
        ]

        for precedent in legal_precedents:
            with st.expander(f"โ๏ธ {precedent['ุงููุถูุฉ']}"):
                st.write(f"**ุงููุจุฏุฃ ุงููุงูููู:** {precedent['ุงููุจุฏุฃ']}")
                st.write(f"**ูุฌุงู ุงูุชุทุจูู:** {precedent['ุงูุชุทุจูู']}")

# ==========================
# ๐๏ธ ุงูุฌูุงุช ุงููุฎุชุตุฉ ุงููุญุณูุฉ (ูุญุณูุฉ)
# ==========================
def show_authorities_section():
    st.markdown("### ๐๏ธ ุงูุฌูุงุช ุงููุฎุชุตุฉ - ุฏููู ุดุงูู ูุฌููุน ุงููุญุงูุธุงุช")

    authorities_tabs = st.tabs([
        "๐บ๏ธ ุฎุฑูุทุฉ ุงููุญุงูุธุงุช",
        "๐ ูุนูููุงุช ุงูุงุชุตุงู", 
        "๐ ุฅุฌุฑุงุกุงุช ุงูุดูุงูู",
        "โฐ ููุงุนูุฏ ุงูุนูู",
        "๐ ุงูุฎุฏูุงุช ุงูุฅููุชุฑูููุฉ"
    ])

    with authorities_tabs[0]:
        governorates = {
            "ุนูุงู": {
                "ูุฒุงุฑุฉ ุงูุนูู": {
                    "ูุงุชู": "06-5802666",
                    "ุนููุงู": "ุชูุงุน ุงูุนูู - ูุฌูุน ุงูุฏูุงุฆุฑ ุงูุญููููุฉ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุงูุชุฑุงุฎูุต", "ุงูุชูุชูุด", "ุงูุฅุฑุดุงุฏ"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                }
            },
            "ุฅุฑุจุฏ": {
                "ูุฏูุฑูุฉ ุงูุนูู ุฅุฑุจุฏ": {
                    "ูุงุชู": "02-7272111",
                    "ุนููุงู": "ูุณุท ุงููุฏููุฉ - ุจุฌุงูุจ ุจูุฏูุฉ ุฅุฑุจุฏ",
                    "ุฎุฏูุงุช": ["ุดูุงูู ุงูุนูู", "ุงูุชูุชูุด", "ุงูุชุฑุงุฎูุต"],
                    "ุฃููุงุช": "8:00 ุต - 3:00 ู"
                }
            }
        }

        selected_gov = st.selectbox("ุงุฎุชุฑ ุงููุญุงูุธุฉ", list(governorates.keys()))

        if selected_gov:
            st.success(f"### ๐ ุงูุฌูุงุช ุงููุฎุชุตุฉ ูู {selected_gov}")

            for authority, info in governorates[selected_gov].items():
                with st.expander(f"๐๏ธ {authority}"):
                    col1, col2 = st.columns([1, 2])

                    with col1:
                        st.write("**๐ ูุนูููุงุช ุงูุงุชุตุงู:**")
                        st.write(f"**๐ ุงููุงุชู:** {info['ูุงุชู']}")
                        st.write(f"**๐ ุงูุนููุงู:** {info['ุนููุงู']}")
                        st.write(f"**๐ ุฃููุงุช ุงูุนูู:** {info['ุฃููุงุช']}")

                    with col2:
                        st.write("**๐ ุงูุฎุฏูุงุช ุงูููุฏูุฉ:**")
                        for service in info['ุฎุฏูุงุช']:
                            st.write(f"โข {service}")

# ==========================
# ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู ุงูุชูุงุนููุฉ ุงูููุณุนุฉ (ูุญุณูุฉ)
# ==========================
def show_rights_map():
    st.markdown("### ๐บ๏ธ ุฎุฑูุทุฉ ุงูุญููู ูุงูุงูุชุฒุงูุงุช ุงูุชูุงุนููุฉ - ูุญุฏุซุฉ 2025")

    map_tabs = st.tabs([
        "๐ท ุญููู ุงูุนุงูู", 
        "๐ ุงูุชุฒุงูุงุช ุตุงุญุจ ุงูุนูู",
        "๐ฐ ุงูุญููู ุงููุงููุฉ",
        "โฐ ููุช ุงูุนูู ูุงูุฅุฌุงุฒุงุช",
        "๐ก๏ธ ุงูุญูุงูุฉ ูุงูุณูุงูุฉ",
        "๐ ููุงุฑูุงุช ุชูุงุนููุฉ"
    ])

    with map_tabs[0]:
        st.markdown("#### ๐ท ุญููู ุงูุนุงูู ุงูุดุงููุฉ ูู ุงููุงููู ุงูุฃุฑุฏูู")

        rights_categories = {
            "๐ฐ ุงูุญููู ุงููุงููุฉ": {
                "items": [
                    {"right": "ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ", "value": "290 ุฏููุงุฑ", "law": "ุงููุงุฏุฉ 35", "details": "ูููุคูููู ุฌุงูุนูุงู - 2025"},
                    {"right": "ุตุฑู ุงูุฑุงุชุจ ูู ุงูููุช", "value": "ุฃูู 7 ุฃูุงู", "law": "ุงููุงุฏุฉ 55", "details": "ูู ููุงูุฉ ุงูุดูุฑ"},
                    {"right": "ุจุฏู ุงูุนูู ุงูุฅุถุงูู", "value": "125% - 150%", "law": "ุงููุงุฏุฉ 42", "details": "125% ููุงุฑูุ 150% ูููู ูุนุทูุงุช"}
                ]
            },
            "โฐ ููุช ุงูุนูู ูุงูุฑุงุญุฉ": {
                "items": [
                    {"right": "ุณุงุนุงุช ุงูุนูู ุงูููููุฉ", "value": "8 ุณุงุนุงุช", "law": "ุงููุงุฏุฉ 46", "details": "48 ุณุงุนุฉ ุฃุณุจูุนูุงู ูุญุฏ ุฃูุตู"},
                    {"right": "ุงูุฅุฌุงุฒุฉ ุงูุฃุณุจูุนูุฉ", "value": "ููู ูุงุญุฏ", "law": "ุงููุงุฏุฉ 48", "details": "ูุฏููุนุฉ ุงูุฃุฌุฑ"},
                    {"right": "ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ", "value": "14-28 ููู", "law": "ุงููุงุฏุฉ 52", "details": "ุญุณุจ ูุฏุฉ ุงูุฎุฏูุฉ"}
                ]
            }
        }

        for category, rights in rights_categories.items():
            with st.expander(f"๐ {category}", expanded=True):
                cols = st.columns(2)
                for idx, item in enumerate(rights['items']):
                    with cols[idx % 2]:
                        st.markdown(f"""
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 0.5rem 0; border-left: 4px solid #2563EB;">
                        <h4 style="margin: 0 0 0.5rem 0;">{item['right']}</h4>
                        <p style="margin: 0.25rem 0; color: #059669;"><strong>๐ {item['value']}</strong></p>
                        <p style="margin: 0.25rem 0; color: #666; font-size: 0.9rem;">{item['details']}</p>
                        <p style="margin: 0.25rem 0; color: #1E40AF; font-size: 0.8rem;">โ๏ธ {item['law']}</p>
                        </div>
                        """, unsafe_allow_html=True)

# ==========================
# โฐ ููุจู ุงูููุงุนูุฏ ุงูููุณุน (ูุญุณูุฉ)
# ==========================
def show_reminder_system():
    st.markdown("### โฐ ููุจู ุงูููุงุนูุฏ ุงููุงููููุฉ - ูุธุงู ูุชูุงูู")

    reminder_tabs = st.tabs([
        "๐ ุฅุฏุงุฑุฉ ุงูุชุฐููุฑุงุช",
        "โ๏ธ ุงูููุงุนูุฏ ุงููุงููููุฉ", 
        "๐ ุชูููู ุงูููุงุนูุฏ",
        "๐ ุงูุฅุดุนุงุฑุงุช"
    ])

    with reminder_tabs[0]:
        col1, col2 = st.columns([2, 1])

        with col1:
            st.markdown("#### ๐ ุฅุถุงูุฉ ุชุฐููุฑ ุฌุฏูุฏ")

            with st.form("add_reminder", clear_on_submit=True):
                col1, col2 = st.columns(2)

                with col1:
                    reminder_type = st.selectbox("ููุน ุงูุชุฐููุฑ", [
                        "ููุนุฏ ูุญููุฉ",
                        "ุขุฌู ุชุณููู ูุณุชูุฏ",
                        "ุฌูุณุฉ ุตูุญ", 
                        "ููุนุฏ ุฏูุน",
                        "ุงุฌุชูุงุน ุนูู"
                    ])

                    title = st.text_input("ุนููุงู ุงูุชุฐููุฑ ๐")
                    priority = st.select_slider("ุงูุฃููููุฉ ๐จ", options=["ููุฎูุถุฉ", "ูุชูุณุทุฉ", "ุนุงููุฉ", "ุนุงุฌูุฉ"])

                with col2:
                    due_date = st.date_input("ุงูุชุงุฑูุฎ ุงููุณุชูุฏู ๐", min_value=datetime.now().date())
                    due_time = st.time_input("ุงูููุช ุงููุณุชูุฏู โฐ", value=datetime.now().time())
                    category = st.selectbox("ุงูุชุตููู", ["ุนูู", "ูุถุงุฆู", "ูุงูู", "ุตุญู", "ุฅุฏุงุฑู"])

                description = st.text_area("ูุตู ุงูุชุฐููุฑ ๐", placeholder="ุฃุถู ุชูุงุตูู ุฅุถุงููุฉ ุนู ุงูุชุฐููุฑ...")

                if st.form_submit_button("โ ุฅุถุงูุฉ ุงูุชุฐููุฑ"):
                    if 'reminders' not in st.session_state:
                        st.session_state.reminders = []
                    
                    new_reminder = {
                        "id": len(st.session_state.reminders) + 1,
                        "type": reminder_type,
                        "title": title,
                        "description": description,
                        "due_date": due_date,
                        "due_time": due_time,
                        "priority": priority,
                        "category": category,
                        "created": datetime.now(),
                        "status": "ูุดุท"
                    }
                    st.session_state.reminders.append(new_reminder)
                    st.success("โ ุชู ุฅุถุงูุฉ ุงูุชุฐููุฑ ุจูุฌุงุญ!")

# ==========================
# ๐๏ธ ุฏูุงู ูุณุงุนุฏุฉ ุฅุถุงููุฉ (ูุญุณูุฉ)
# ==========================
def get_complaint_types(category):
    """ุงูุญุตูู ุนูู ุฃููุงุน ุงููุดุงูู ุญุณุจ ุงููุฆุฉ"""
    types_map = {
        "๐ฐ ูุดุงูู ูุงููุฉ": [
            "ุชุฃุฎุฑ ุตุฑู ุงูุฑูุงุชุจ", "ุฎุตู ุบูุฑ ูุงูููู", "ุญุฑูุงู ูู ุนูุงูุงุช",
            "ุนุฏู ุตุฑู ูุณุชุญูุงุช ููุงูุฉ ุงูุฎุฏูุฉ", "ูุดุงูู ูู ุงูุจุฏูุงุช"
        ],
        "โ๏ธ ุฅููุงุก ุงูุฎุฏูุฉ": [
            "ูุตู ุชุนุณูู", "ุฅููุงุก ุฎุฏูุฉ ุจุฏูู ุฅูุฐุงุฑ", "ุถุบุท ููุงุณุชูุงูุฉ",
            "ุฅููุงุก ุฎุฏูุฉ ุฃุซูุงุก ุงูุฅุฌุงุฒุฉ", "ูุตู ุชุฃุฏูุจู ุบูุฑ ูุจุฑุฑ"
        ]
    }
    return types_map.get(category, ["ูุดููุฉ ุนุงูุฉ"])

def analyze_complaint_advanced(category, complaint_type, description, severity, duration, frequency, affected_areas):
    """ุชุญููู ูุชูุฏู ูููุดููุฉ"""
    return {
        "risk_level": "ูุชูุณุท",
        "priority": "ุนุงููุฉ",
        "estimated_timeline": "2-4 ุฃุณุงุจูุน",
        "recommended_actions": [
            "ุชูุซูู ูุงูุฉ ุงููุณุชูุฏุงุช ุงููุงููุฉ",
            "ุฅุฑุณุงู ุฅูุฐุงุฑ ุฑุณูู ูุตุงุญุจ ุงูุนูู",
            "ุงูุชูุฌู ููุฏูุฑูุฉ ุงูุนูู"
        ],
        "legal_references": ["ุงููุงุฏุฉ 55: ููุนุฏ ุตุฑู ุงูุฃุฌุฑ", "ุงููุงุฏุฉ 72: ุฅููุงุก ุนูุฏ ุงูุนูู"],
        "support_resources": ["ูุฒุงุฑุฉ ุงูุนูู: 06-5802666", "ููุงุจุฉ ุงููุญุงููู: 06-5664111"]
    }

def display_analysis_results(analysis):
    """ุนุฑุถ ูุชุงุฆุฌ ุงูุชุญููู"""
    st.success("## ๐ ูุชุงุฆุฌ ุงูุชุญููู ุงูุดุงูู")

    col1, col2 = st.columns(2)

    with col1:
        st.metric("ูุณุชูู ุงูุฎุทูุฑุฉ", analysis["risk_level"])
        st.metric("ุงูุฃููููุฉ", analysis["priority"])

    with col2:
        st.metric("ุงูุฅุทุงุฑ ุงูุฒููู ุงูููุฏุฑ", analysis["estimated_timeline"])
        st.metric("ุงููุฑุงุฌุน ุงููุงููููุฉ", f"{len(analysis['legal_references'])} ูุฑุฌุน")

    st.markdown("#### ๐ฏ ุงูุฅุฌุฑุงุกุงุช ุงูููุตู ุจูุง")
    for i, action in enumerate(analysis["recommended_actions"], 1):
        st.write(f"{i}. {action}")

def get_article_full_text(article):
    """ูุต ุงููุงุฏุฉ ุงููุงููููุฉ"""
    texts = {
        "ุงููุงุฏุฉ 35": "ูุญุฏุฏ ูุฌูุณ ุงููุฒุฑุงุก ุจูุงุก ุนูู ุชูุณูุจ ุงููุฒูุฑ ุงูุญุฏ ุงูุฃุฏูู ููุฃุฌูุฑ...",
        "ุงููุงุฏุฉ 42": "ูุนุทู ุงูุนุงูู ุจุฏู ุนูู ุฅุถุงูู ูุง ููู ุนู ุฃุฌุฑ ุงูุณุงุนุฉ ูุถุงูุงู ุฅููู (25%) ุนู ุณุงุนุงุช ุงูุนูู ุงูููุงุฑู...",
        "ุงููุงุฏุฉ 55": "ูุฌุจ ุฃู ูุฏูุน ุฃุฌุฑ ุงูุนุงูู ูุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ูู ุงูุดูุฑ...",
        "ุงููุงุฏุฉ 72": "ูุตุงุญุจ ุงูุนูู ุฅููุงุก ุนูุฏ ุงูุนูู ูุญุฏุฏ ุงููุฏุฉ ูุจู ุงูุชูุงุก ูุฏุชู...",
        "ุงููุงุฏุฉ 73": "ูุนุชุจุฑ ุฅููุงุก ุงูุฎุฏูุฉ ุชุนุณููุงู ุฅุฐุง ูู ููู ูุจููุงู ุนูู ุณุจุจ ูุดุฑูุน...",
        "ุงููุงุฏุฉ 74": "ูุณุชุญู ุงูุนุงูู ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ ุนู ูุฏุฉ ุฎุฏูุชู...",
        "ุงููุงุฏุฉ 79": "ูุฌุจ ุนูู ุตุงุญุจ ุงูุนูู ุชูููุฑ ูุณุงุฆู ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ..."
    }
    return texts.get(article, "ูุต ุงููุงุฏุฉ ุบูุฑ ูุชููุฑ ุญุงููุงู")

def get_article_applications(article):
    """ุชุทุจููุงุช ุงููุงุฏุฉ"""
    applications = {
        "ุงููุงุฏุฉ 35": "ุชุทุจู ุนูู ุฌููุน ุงูุนุงูููู ูู ุงููุทุงุน ุงูุฎุงุต",
        "ุงููุงุฏุฉ 42": "ุชูุทุจู ุนูู ุณุงุนุงุช ุงูุนูู ุงูุชู ุชุฒูุฏ ุนู 8 ุณุงุนุงุช ููููุงู",
        "ุงููุงุฏุฉ 55": "ุชูุทุจู ุนูู ุฌููุน ุฃููุงุน ุนููุฏ ุงูุนูู"
    }
    return applications.get(article, "ุชุทุจููุงุช ุนุงูุฉ")

def get_article_exceptions(article):
    """ุงุณุชุซูุงุกุงุช ุงููุงุฏุฉ"""
    exceptions = {
        "ุงููุงุฏุฉ 35": "ูุง ุชูุทุจู ุนูู ุงูุนุงูููู ูู ุงูุฒุฑุงุนุฉ ูุงูุฑุนู",
        "ุงููุงุฏุฉ 42": "ูุง ุชุดูู ุจุนุถ ูุฆุงุช ุงูุนุงูููู ูู ุงูููุงุตุจ ุงูุนููุง",
        "ุงููุงุฏุฉ 55": "ูุง ุชูุฌุฏ ุงุณุชุซูุงุกุงุช"
    }
    return exceptions.get(article, "ูุง ุชูุฌุฏ ุงุณุชุซูุงุกุงุช ูุญุฏุฏุฉ")

# ==========================
# ๐ ุชุดุบูู ุงูุชุทุจูู
# ==========================
if __name__ == "__main__":
    main()